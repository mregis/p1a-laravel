document.write('<link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-1564cdcc2939872e81719982075d3d93.css">')
document.write('<div id=\"gist7376550\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-markdown-js\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"blob-wrapper data type-javascript \">\n      <table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-markdown-js-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"><\/td>\n        <td id=\"file-markdown-js-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Released under MIT license<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"><\/td>\n        <td id=\"file-markdown-js-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Copyright (c) 2009-2010 Dominic Baggott<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"><\/td>\n        <td id=\"file-markdown-js-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Copyright (c) 2009-2010 Ash Berlin<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"><\/td>\n        <td id=\"file-markdown-js-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Copyright (c) 2011 Christoph Dorn &lt;christoph@christophdorn.com&gt; (http://www.christophdorn.com)<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"><\/td>\n        <td id=\"file-markdown-js-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"><\/td>\n        <td id=\"file-markdown-js-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">/*<\/span>jshint browser:true, devel:true <span class=\"pl-c\">*/<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"><\/td>\n        <td id=\"file-markdown-js-LC7\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"><\/td>\n        <td id=\"file-markdown-js-LC8\" class=\"blob-code blob-code-inner js-file-line\">(<span class=\"pl-k\">function<\/span>( <span class=\"pl-smi\">expose<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"><\/td>\n        <td id=\"file-markdown-js-LC9\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"><\/td>\n        <td id=\"file-markdown-js-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">/**<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"><\/td>\n        <td id=\"file-markdown-js-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  class Markdown<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"><\/td>\n        <td id=\"file-markdown-js-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"><\/td>\n        <td id=\"file-markdown-js-LC13\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  Markdown processing in Javascript done right. We have very particular views<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"><\/td>\n        <td id=\"file-markdown-js-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  on what constitutes &#39;right&#39; which include:<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"><\/td>\n        <td id=\"file-markdown-js-LC15\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"><\/td>\n        <td id=\"file-markdown-js-LC16\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - produces well-formed HTML (this means that em and strong nesting is<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"><\/td>\n        <td id=\"file-markdown-js-LC17\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *    important)<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"><\/td>\n        <td id=\"file-markdown-js-LC18\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"><\/td>\n        <td id=\"file-markdown-js-LC19\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - has an intermediate representation to allow processing of parsed data (We<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"><\/td>\n        <td id=\"file-markdown-js-LC20\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *    in fact have two, both as [JsonML]: a markdown tree and an HTML tree).<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"><\/td>\n        <td id=\"file-markdown-js-LC21\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"><\/td>\n        <td id=\"file-markdown-js-LC22\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - is easily extensible to add new dialects without having to rewrite the<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"><\/td>\n        <td id=\"file-markdown-js-LC23\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *    entire parsing mechanics<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"><\/td>\n        <td id=\"file-markdown-js-LC24\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L25\" class=\"blob-num js-line-number\" data-line-number=\"25\"><\/td>\n        <td id=\"file-markdown-js-LC25\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - has a good test suite<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L26\" class=\"blob-num js-line-number\" data-line-number=\"26\"><\/td>\n        <td id=\"file-markdown-js-LC26\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L27\" class=\"blob-num js-line-number\" data-line-number=\"27\"><\/td>\n        <td id=\"file-markdown-js-LC27\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  This implementation fulfills all of these (except that the test suite could<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L28\" class=\"blob-num js-line-number\" data-line-number=\"28\"><\/td>\n        <td id=\"file-markdown-js-LC28\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  do with expanding to automatically run all the fixtures from other Markdown<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L29\" class=\"blob-num js-line-number\" data-line-number=\"29\"><\/td>\n        <td id=\"file-markdown-js-LC29\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  implementations.)<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L30\" class=\"blob-num js-line-number\" data-line-number=\"30\"><\/td>\n        <td id=\"file-markdown-js-LC30\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L31\" class=\"blob-num js-line-number\" data-line-number=\"31\"><\/td>\n        <td id=\"file-markdown-js-LC31\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  ##### Intermediate Representation<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L32\" class=\"blob-num js-line-number\" data-line-number=\"32\"><\/td>\n        <td id=\"file-markdown-js-LC32\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L33\" class=\"blob-num js-line-number\" data-line-number=\"33\"><\/td>\n        <td id=\"file-markdown-js-LC33\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  *TODO* Talk about this :) Its JsonML, but document the node names we use.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L34\" class=\"blob-num js-line-number\" data-line-number=\"34\"><\/td>\n        <td id=\"file-markdown-js-LC34\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L35\" class=\"blob-num js-line-number\" data-line-number=\"35\"><\/td>\n        <td id=\"file-markdown-js-LC35\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  [JsonML]: http://jsonml.org/ &quot;JSON Markup Language&quot;<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L36\" class=\"blob-num js-line-number\" data-line-number=\"36\"><\/td>\n        <td id=\"file-markdown-js-LC36\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<span class=\"pl-c\">*/<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L37\" class=\"blob-num js-line-number\" data-line-number=\"37\"><\/td>\n        <td id=\"file-markdown-js-LC37\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">var<\/span> Markdown <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">expose<\/span>.<span class=\"pl-en\">Markdown<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>(<span class=\"pl-smi\">dialect<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L38\" class=\"blob-num js-line-number\" data-line-number=\"38\"><\/td>\n        <td id=\"file-markdown-js-LC38\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">switch<\/span> (<span class=\"pl-k\">typeof<\/span> dialect) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L39\" class=\"blob-num js-line-number\" data-line-number=\"39\"><\/td>\n        <td id=\"file-markdown-js-LC39\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>undefined<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L40\" class=\"blob-num js-line-number\" data-line-number=\"40\"><\/td>\n        <td id=\"file-markdown-js-LC40\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Gruber<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L41\" class=\"blob-num js-line-number\" data-line-number=\"41\"><\/td>\n        <td id=\"file-markdown-js-LC41\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L42\" class=\"blob-num js-line-number\" data-line-number=\"42\"><\/td>\n        <td id=\"file-markdown-js-LC42\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>object<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L43\" class=\"blob-num js-line-number\" data-line-number=\"43\"><\/td>\n        <td id=\"file-markdown-js-LC43\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span> <span class=\"pl-k\">=<\/span> dialect;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L44\" class=\"blob-num js-line-number\" data-line-number=\"44\"><\/td>\n        <td id=\"file-markdown-js-LC44\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L45\" class=\"blob-num js-line-number\" data-line-number=\"45\"><\/td>\n        <td id=\"file-markdown-js-LC45\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">default<\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L46\" class=\"blob-num js-line-number\" data-line-number=\"46\"><\/td>\n        <td id=\"file-markdown-js-LC46\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( dialect <span class=\"pl-k\">in<\/span> <span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L47\" class=\"blob-num js-line-number\" data-line-number=\"47\"><\/td>\n        <td id=\"file-markdown-js-LC47\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>[dialect];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L48\" class=\"blob-num js-line-number\" data-line-number=\"48\"><\/td>\n        <td id=\"file-markdown-js-LC48\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L49\" class=\"blob-num js-line-number\" data-line-number=\"49\"><\/td>\n        <td id=\"file-markdown-js-LC49\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L50\" class=\"blob-num js-line-number\" data-line-number=\"50\"><\/td>\n        <td id=\"file-markdown-js-LC50\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">throw<\/span> <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">Error<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>Unknown Markdown dialect &#39;<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> <span class=\"pl-c1\">String<\/span>(dialect) <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&#39;<span class=\"pl-pds\">&quot;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L51\" class=\"blob-num js-line-number\" data-line-number=\"51\"><\/td>\n        <td id=\"file-markdown-js-LC51\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L52\" class=\"blob-num js-line-number\" data-line-number=\"52\"><\/td>\n        <td id=\"file-markdown-js-LC52\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L53\" class=\"blob-num js-line-number\" data-line-number=\"53\"><\/td>\n        <td id=\"file-markdown-js-LC53\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L54\" class=\"blob-num js-line-number\" data-line-number=\"54\"><\/td>\n        <td id=\"file-markdown-js-LC54\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">em_state<\/span> <span class=\"pl-k\">=<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L55\" class=\"blob-num js-line-number\" data-line-number=\"55\"><\/td>\n        <td id=\"file-markdown-js-LC55\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">strong_state<\/span> <span class=\"pl-k\">=<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L56\" class=\"blob-num js-line-number\" data-line-number=\"56\"><\/td>\n        <td id=\"file-markdown-js-LC56\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">debug_indent<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L57\" class=\"blob-num js-line-number\" data-line-number=\"57\"><\/td>\n        <td id=\"file-markdown-js-LC57\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L58\" class=\"blob-num js-line-number\" data-line-number=\"58\"><\/td>\n        <td id=\"file-markdown-js-LC58\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L59\" class=\"blob-num js-line-number\" data-line-number=\"59\"><\/td>\n        <td id=\"file-markdown-js-LC59\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">/**<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L60\" class=\"blob-num js-line-number\" data-line-number=\"60\"><\/td>\n        <td id=\"file-markdown-js-LC60\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  parse( markdown, [dialect] ) -&gt; JsonML<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L61\" class=\"blob-num js-line-number\" data-line-number=\"61\"><\/td>\n        <td id=\"file-markdown-js-LC61\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - markdown (String): markdown string to parse<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L62\" class=\"blob-num js-line-number\" data-line-number=\"62\"><\/td>\n        <td id=\"file-markdown-js-LC62\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - dialect (String | Dialect): the dialect to use, defaults to gruber<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L63\" class=\"blob-num js-line-number\" data-line-number=\"63\"><\/td>\n        <td id=\"file-markdown-js-LC63\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L64\" class=\"blob-num js-line-number\" data-line-number=\"64\"><\/td>\n        <td id=\"file-markdown-js-LC64\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  Parse `markdown` and return a markdown document as a Markdown.JsonML tree.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L65\" class=\"blob-num js-line-number\" data-line-number=\"65\"><\/td>\n        <td id=\"file-markdown-js-LC65\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<span class=\"pl-c\">*/<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L66\" class=\"blob-num js-line-number\" data-line-number=\"66\"><\/td>\n        <td id=\"file-markdown-js-LC66\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">expose<\/span>.<span class=\"pl-en\">parse<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>( <span class=\"pl-smi\">source<\/span>, <span class=\"pl-smi\">dialect<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L67\" class=\"blob-num js-line-number\" data-line-number=\"67\"><\/td>\n        <td id=\"file-markdown-js-LC67\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> dialect will default if undefined<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L68\" class=\"blob-num js-line-number\" data-line-number=\"68\"><\/td>\n        <td id=\"file-markdown-js-LC68\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> md <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">Markdown<\/span>( dialect );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L69\" class=\"blob-num js-line-number\" data-line-number=\"69\"><\/td>\n        <td id=\"file-markdown-js-LC69\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> <span class=\"pl-smi\">md<\/span>.<span class=\"pl-en\">toTree<\/span>( source );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L70\" class=\"blob-num js-line-number\" data-line-number=\"70\"><\/td>\n        <td id=\"file-markdown-js-LC70\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L71\" class=\"blob-num js-line-number\" data-line-number=\"71\"><\/td>\n        <td id=\"file-markdown-js-LC71\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L72\" class=\"blob-num js-line-number\" data-line-number=\"72\"><\/td>\n        <td id=\"file-markdown-js-LC72\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">/**<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L73\" class=\"blob-num js-line-number\" data-line-number=\"73\"><\/td>\n        <td id=\"file-markdown-js-LC73\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  toHTML( markdown, [dialect]  ) -&gt; String<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L74\" class=\"blob-num js-line-number\" data-line-number=\"74\"><\/td>\n        <td id=\"file-markdown-js-LC74\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  toHTML( md_tree ) -&gt; String<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L75\" class=\"blob-num js-line-number\" data-line-number=\"75\"><\/td>\n        <td id=\"file-markdown-js-LC75\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - markdown (String): markdown string to parse<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L76\" class=\"blob-num js-line-number\" data-line-number=\"76\"><\/td>\n        <td id=\"file-markdown-js-LC76\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - md_tree (Markdown.JsonML): parsed markdown tree<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L77\" class=\"blob-num js-line-number\" data-line-number=\"77\"><\/td>\n        <td id=\"file-markdown-js-LC77\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L78\" class=\"blob-num js-line-number\" data-line-number=\"78\"><\/td>\n        <td id=\"file-markdown-js-LC78\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  Take markdown (either as a string or as a JsonML tree) and run it through<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L79\" class=\"blob-num js-line-number\" data-line-number=\"79\"><\/td>\n        <td id=\"file-markdown-js-LC79\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  [[toHTMLTree]] then turn it into a well-formated HTML fragment.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L80\" class=\"blob-num js-line-number\" data-line-number=\"80\"><\/td>\n        <td id=\"file-markdown-js-LC80\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<span class=\"pl-c\">*/<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L81\" class=\"blob-num js-line-number\" data-line-number=\"81\"><\/td>\n        <td id=\"file-markdown-js-LC81\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">expose<\/span>.<span class=\"pl-en\">toHTML<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">toHTML<\/span>( <span class=\"pl-smi\">source<\/span> , <span class=\"pl-smi\">dialect<\/span> , <span class=\"pl-smi\">options<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L82\" class=\"blob-num js-line-number\" data-line-number=\"82\"><\/td>\n        <td id=\"file-markdown-js-LC82\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> input <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">expose<\/span>.<span class=\"pl-en\">toHTMLTree<\/span>( source , dialect , options );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L83\" class=\"blob-num js-line-number\" data-line-number=\"83\"><\/td>\n        <td id=\"file-markdown-js-LC83\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L84\" class=\"blob-num js-line-number\" data-line-number=\"84\"><\/td>\n        <td id=\"file-markdown-js-LC84\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> <span class=\"pl-smi\">expose<\/span>.<span class=\"pl-en\">renderJsonML<\/span>( input );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L85\" class=\"blob-num js-line-number\" data-line-number=\"85\"><\/td>\n        <td id=\"file-markdown-js-LC85\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L86\" class=\"blob-num js-line-number\" data-line-number=\"86\"><\/td>\n        <td id=\"file-markdown-js-LC86\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L87\" class=\"blob-num js-line-number\" data-line-number=\"87\"><\/td>\n        <td id=\"file-markdown-js-LC87\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">/**<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L88\" class=\"blob-num js-line-number\" data-line-number=\"88\"><\/td>\n        <td id=\"file-markdown-js-LC88\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  toHTMLTree( markdown, [dialect] ) -&gt; JsonML<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L89\" class=\"blob-num js-line-number\" data-line-number=\"89\"><\/td>\n        <td id=\"file-markdown-js-LC89\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  toHTMLTree( md_tree ) -&gt; JsonML<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L90\" class=\"blob-num js-line-number\" data-line-number=\"90\"><\/td>\n        <td id=\"file-markdown-js-LC90\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - markdown (String): markdown string to parse<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L91\" class=\"blob-num js-line-number\" data-line-number=\"91\"><\/td>\n        <td id=\"file-markdown-js-LC91\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - dialect (String | Dialect): the dialect to use, defaults to gruber<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L92\" class=\"blob-num js-line-number\" data-line-number=\"92\"><\/td>\n        <td id=\"file-markdown-js-LC92\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - md_tree (Markdown.JsonML): parsed markdown tree<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L93\" class=\"blob-num js-line-number\" data-line-number=\"93\"><\/td>\n        <td id=\"file-markdown-js-LC93\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L94\" class=\"blob-num js-line-number\" data-line-number=\"94\"><\/td>\n        <td id=\"file-markdown-js-LC94\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  Turn markdown into HTML, represented as a JsonML tree. If a string is given<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L95\" class=\"blob-num js-line-number\" data-line-number=\"95\"><\/td>\n        <td id=\"file-markdown-js-LC95\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  to this function, it is first parsed into a markdown tree by calling<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L96\" class=\"blob-num js-line-number\" data-line-number=\"96\"><\/td>\n        <td id=\"file-markdown-js-LC96\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  [[parse]].<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L97\" class=\"blob-num js-line-number\" data-line-number=\"97\"><\/td>\n        <td id=\"file-markdown-js-LC97\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<span class=\"pl-c\">*/<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L98\" class=\"blob-num js-line-number\" data-line-number=\"98\"><\/td>\n        <td id=\"file-markdown-js-LC98\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">expose<\/span>.<span class=\"pl-en\">toHTMLTree<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">toHTMLTree<\/span>( <span class=\"pl-smi\">input<\/span>, <span class=\"pl-smi\">dialect<\/span> , <span class=\"pl-smi\">options<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L99\" class=\"blob-num js-line-number\" data-line-number=\"99\"><\/td>\n        <td id=\"file-markdown-js-LC99\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> convert string input to an MD tree<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L100\" class=\"blob-num js-line-number\" data-line-number=\"100\"><\/td>\n        <td id=\"file-markdown-js-LC100\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">typeof<\/span> input <span class=\"pl-k\">===<\/span><span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span> ) input <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-c1\">parse<\/span>( input, dialect );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L101\" class=\"blob-num js-line-number\" data-line-number=\"101\"><\/td>\n        <td id=\"file-markdown-js-LC101\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L102\" class=\"blob-num js-line-number\" data-line-number=\"102\"><\/td>\n        <td id=\"file-markdown-js-LC102\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Now convert the MD tree to an HTML tree<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L103\" class=\"blob-num js-line-number\" data-line-number=\"103\"><\/td>\n        <td id=\"file-markdown-js-LC103\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L104\" class=\"blob-num js-line-number\" data-line-number=\"104\"><\/td>\n        <td id=\"file-markdown-js-LC104\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> remove references from the tree<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L105\" class=\"blob-num js-line-number\" data-line-number=\"105\"><\/td>\n        <td id=\"file-markdown-js-LC105\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> attrs <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">extract_attr<\/span>( input ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L106\" class=\"blob-num js-line-number\" data-line-number=\"106\"><\/td>\n        <td id=\"file-markdown-js-LC106\" class=\"blob-code blob-code-inner js-file-line\">      refs <span class=\"pl-k\">=<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L107\" class=\"blob-num js-line-number\" data-line-number=\"107\"><\/td>\n        <td id=\"file-markdown-js-LC107\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L108\" class=\"blob-num js-line-number\" data-line-number=\"108\"><\/td>\n        <td id=\"file-markdown-js-LC108\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( attrs <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">references<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L109\" class=\"blob-num js-line-number\" data-line-number=\"109\"><\/td>\n        <td id=\"file-markdown-js-LC109\" class=\"blob-code blob-code-inner js-file-line\">    refs <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">references<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L110\" class=\"blob-num js-line-number\" data-line-number=\"110\"><\/td>\n        <td id=\"file-markdown-js-LC110\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L111\" class=\"blob-num js-line-number\" data-line-number=\"111\"><\/td>\n        <td id=\"file-markdown-js-LC111\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L112\" class=\"blob-num js-line-number\" data-line-number=\"112\"><\/td>\n        <td id=\"file-markdown-js-LC112\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> html <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">convert_tree_to_html<\/span>( input, refs , options );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L113\" class=\"blob-num js-line-number\" data-line-number=\"113\"><\/td>\n        <td id=\"file-markdown-js-LC113\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-en\">merge_text_nodes<\/span>( html );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L114\" class=\"blob-num js-line-number\" data-line-number=\"114\"><\/td>\n        <td id=\"file-markdown-js-LC114\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> html;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L115\" class=\"blob-num js-line-number\" data-line-number=\"115\"><\/td>\n        <td id=\"file-markdown-js-LC115\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L116\" class=\"blob-num js-line-number\" data-line-number=\"116\"><\/td>\n        <td id=\"file-markdown-js-LC116\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L117\" class=\"blob-num js-line-number\" data-line-number=\"117\"><\/td>\n        <td id=\"file-markdown-js-LC117\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> For Spidermonkey based engines<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L118\" class=\"blob-num js-line-number\" data-line-number=\"118\"><\/td>\n        <td id=\"file-markdown-js-LC118\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">function<\/span> <span class=\"pl-en\">mk_block_toSource<\/span>() {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L119\" class=\"blob-num js-line-number\" data-line-number=\"119\"><\/td>\n        <td id=\"file-markdown-js-LC119\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>Markdown.mk_block( <span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L120\" class=\"blob-num js-line-number\" data-line-number=\"120\"><\/td>\n        <td id=\"file-markdown-js-LC120\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c1\">uneval<\/span>(<span class=\"pl-c1\">this<\/span>.<span class=\"pl-c1\">toString<\/span>()) <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L121\" class=\"blob-num js-line-number\" data-line-number=\"121\"><\/td>\n        <td id=\"file-markdown-js-LC121\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>, <span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L122\" class=\"blob-num js-line-number\" data-line-number=\"122\"><\/td>\n        <td id=\"file-markdown-js-LC122\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c1\">uneval<\/span>(<span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">trailing<\/span>) <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L123\" class=\"blob-num js-line-number\" data-line-number=\"123\"><\/td>\n        <td id=\"file-markdown-js-LC123\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>, <span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L124\" class=\"blob-num js-line-number\" data-line-number=\"124\"><\/td>\n        <td id=\"file-markdown-js-LC124\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c1\">uneval<\/span>(<span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">lineNumber<\/span>) <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L125\" class=\"blob-num js-line-number\" data-line-number=\"125\"><\/td>\n        <td id=\"file-markdown-js-LC125\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span> )<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L126\" class=\"blob-num js-line-number\" data-line-number=\"126\"><\/td>\n        <td id=\"file-markdown-js-LC126\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L127\" class=\"blob-num js-line-number\" data-line-number=\"127\"><\/td>\n        <td id=\"file-markdown-js-LC127\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L128\" class=\"blob-num js-line-number\" data-line-number=\"128\"><\/td>\n        <td id=\"file-markdown-js-LC128\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> node<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L129\" class=\"blob-num js-line-number\" data-line-number=\"129\"><\/td>\n        <td id=\"file-markdown-js-LC129\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">function<\/span> <span class=\"pl-en\">mk_block_inspect<\/span>() {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L130\" class=\"blob-num js-line-number\" data-line-number=\"130\"><\/td>\n        <td id=\"file-markdown-js-LC130\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> util <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">require<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>util<span class=\"pl-pds\">&quot;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L131\" class=\"blob-num js-line-number\" data-line-number=\"131\"><\/td>\n        <td id=\"file-markdown-js-LC131\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>Markdown.mk_block( <span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L132\" class=\"blob-num js-line-number\" data-line-number=\"132\"><\/td>\n        <td id=\"file-markdown-js-LC132\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">util<\/span>.<span class=\"pl-en\">inspect<\/span>(<span class=\"pl-c1\">this<\/span>.<span class=\"pl-c1\">toString<\/span>()) <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L133\" class=\"blob-num js-line-number\" data-line-number=\"133\"><\/td>\n        <td id=\"file-markdown-js-LC133\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>, <span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L134\" class=\"blob-num js-line-number\" data-line-number=\"134\"><\/td>\n        <td id=\"file-markdown-js-LC134\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">util<\/span>.<span class=\"pl-en\">inspect<\/span>(<span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">trailing<\/span>) <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L135\" class=\"blob-num js-line-number\" data-line-number=\"135\"><\/td>\n        <td id=\"file-markdown-js-LC135\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>, <span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L136\" class=\"blob-num js-line-number\" data-line-number=\"136\"><\/td>\n        <td id=\"file-markdown-js-LC136\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">util<\/span>.<span class=\"pl-en\">inspect<\/span>(<span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">lineNumber<\/span>) <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L137\" class=\"blob-num js-line-number\" data-line-number=\"137\"><\/td>\n        <td id=\"file-markdown-js-LC137\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span> )<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L138\" class=\"blob-num js-line-number\" data-line-number=\"138\"><\/td>\n        <td id=\"file-markdown-js-LC138\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L139\" class=\"blob-num js-line-number\" data-line-number=\"139\"><\/td>\n        <td id=\"file-markdown-js-LC139\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L140\" class=\"blob-num js-line-number\" data-line-number=\"140\"><\/td>\n        <td id=\"file-markdown-js-LC140\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L141\" class=\"blob-num js-line-number\" data-line-number=\"141\"><\/td>\n        <td id=\"file-markdown-js-LC141\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">var<\/span> mk_block <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-en\">mk_block<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>(<span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">trail<\/span>, <span class=\"pl-smi\">line<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L142\" class=\"blob-num js-line-number\" data-line-number=\"142\"><\/td>\n        <td id=\"file-markdown-js-LC142\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Be helpful for default case in tests.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L143\" class=\"blob-num js-line-number\" data-line-number=\"143\"><\/td>\n        <td id=\"file-markdown-js-LC143\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-c1\">arguments<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">==<\/span> <span class=\"pl-c1\">1<\/span> ) trail <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\n\\n<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L144\" class=\"blob-num js-line-number\" data-line-number=\"144\"><\/td>\n        <td id=\"file-markdown-js-LC144\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L145\" class=\"blob-num js-line-number\" data-line-number=\"145\"><\/td>\n        <td id=\"file-markdown-js-LC145\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> s <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">String<\/span>(block);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L146\" class=\"blob-num js-line-number\" data-line-number=\"146\"><\/td>\n        <td id=\"file-markdown-js-LC146\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">s<\/span>.<span class=\"pl-smi\">trailing<\/span> <span class=\"pl-k\">=<\/span> trail;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L147\" class=\"blob-num js-line-number\" data-line-number=\"147\"><\/td>\n        <td id=\"file-markdown-js-LC147\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> To make it clear its not just a string<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L148\" class=\"blob-num js-line-number\" data-line-number=\"148\"><\/td>\n        <td id=\"file-markdown-js-LC148\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">s<\/span>.<span class=\"pl-smi\">inspect<\/span> <span class=\"pl-k\">=<\/span> mk_block_inspect;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L149\" class=\"blob-num js-line-number\" data-line-number=\"149\"><\/td>\n        <td id=\"file-markdown-js-LC149\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">s<\/span>.<span class=\"pl-smi\">toSource<\/span> <span class=\"pl-k\">=<\/span> mk_block_toSource;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L150\" class=\"blob-num js-line-number\" data-line-number=\"150\"><\/td>\n        <td id=\"file-markdown-js-LC150\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L151\" class=\"blob-num js-line-number\" data-line-number=\"151\"><\/td>\n        <td id=\"file-markdown-js-LC151\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( line <span class=\"pl-k\">!=<\/span> <span class=\"pl-c1\">undefined<\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L152\" class=\"blob-num js-line-number\" data-line-number=\"152\"><\/td>\n        <td id=\"file-markdown-js-LC152\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">s<\/span>.<span class=\"pl-smi\">lineNumber<\/span> <span class=\"pl-k\">=<\/span> line;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L153\" class=\"blob-num js-line-number\" data-line-number=\"153\"><\/td>\n        <td id=\"file-markdown-js-LC153\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L154\" class=\"blob-num js-line-number\" data-line-number=\"154\"><\/td>\n        <td id=\"file-markdown-js-LC154\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> s;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L155\" class=\"blob-num js-line-number\" data-line-number=\"155\"><\/td>\n        <td id=\"file-markdown-js-LC155\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L156\" class=\"blob-num js-line-number\" data-line-number=\"156\"><\/td>\n        <td id=\"file-markdown-js-LC156\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L157\" class=\"blob-num js-line-number\" data-line-number=\"157\"><\/td>\n        <td id=\"file-markdown-js-LC157\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">function<\/span> <span class=\"pl-en\">count_lines<\/span>( <span class=\"pl-smi\">str<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L158\" class=\"blob-num js-line-number\" data-line-number=\"158\"><\/td>\n        <td id=\"file-markdown-js-LC158\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> n <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>, i <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L159\" class=\"blob-num js-line-number\" data-line-number=\"159\"><\/td>\n        <td id=\"file-markdown-js-LC159\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">while<\/span> ( ( i <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">str<\/span>.<span class=\"pl-c1\">indexOf<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\n<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>, i <span class=\"pl-k\">+<\/span> <span class=\"pl-c1\">1<\/span>) ) <span class=\"pl-k\">!==<\/span> <span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span> ) n<span class=\"pl-k\">++<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L160\" class=\"blob-num js-line-number\" data-line-number=\"160\"><\/td>\n        <td id=\"file-markdown-js-LC160\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> n;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L161\" class=\"blob-num js-line-number\" data-line-number=\"161\"><\/td>\n        <td id=\"file-markdown-js-LC161\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L162\" class=\"blob-num js-line-number\" data-line-number=\"162\"><\/td>\n        <td id=\"file-markdown-js-LC162\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L163\" class=\"blob-num js-line-number\" data-line-number=\"163\"><\/td>\n        <td id=\"file-markdown-js-LC163\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Internal - split source into rough blocks<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L164\" class=\"blob-num js-line-number\" data-line-number=\"164\"><\/td>\n        <td id=\"file-markdown-js-LC164\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-c1\">prototype<\/span>.<span class=\"pl-en\">split_blocks<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">splitBlocks<\/span>( <span class=\"pl-smi\">input<\/span>, <span class=\"pl-smi\">startLine<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L165\" class=\"blob-num js-line-number\" data-line-number=\"165\"><\/td>\n        <td id=\"file-markdown-js-LC165\" class=\"blob-code blob-code-inner js-file-line\">  input <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">input<\/span>.<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"><span class=\"pl-pds\">/<\/span>(<span class=\"pl-c1\">\\r\\n<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-c1\">\\n<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-c1\">\\r<\/span>)<span class=\"pl-pds\">/<\/span>g<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\n<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L166\" class=\"blob-num js-line-number\" data-line-number=\"166\"><\/td>\n        <td id=\"file-markdown-js-LC166\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> [\\s\\S] matches _anything_ (newline or space)<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L167\" class=\"blob-num js-line-number\" data-line-number=\"167\"><\/td>\n        <td id=\"file-markdown-js-LC167\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> [^] is equivalent but doesn&#39;t work in IEs.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L168\" class=\"blob-num js-line-number\" data-line-number=\"168\"><\/td>\n        <td id=\"file-markdown-js-LC168\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> re <span class=\"pl-k\">=<\/span><span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>(<span class=\"pl-c1\">[<span class=\"pl-c1\">\\s\\S<\/span>]<\/span><span class=\"pl-k\">+?<\/span>)(<span class=\"pl-k\">$<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-c1\">\\n<\/span>#<span class=\"pl-k\">|<\/span><span class=\"pl-c1\">\\n<\/span>(?:<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-c1\">\\n<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-k\">$<\/span>)<span class=\"pl-k\">+<\/span>)<span class=\"pl-pds\">/<\/span>g<\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L169\" class=\"blob-num js-line-number\" data-line-number=\"169\"><\/td>\n        <td id=\"file-markdown-js-LC169\" class=\"blob-code blob-code-inner js-file-line\">      blocks <span class=\"pl-k\">=<\/span> [],<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L170\" class=\"blob-num js-line-number\" data-line-number=\"170\"><\/td>\n        <td id=\"file-markdown-js-LC170\" class=\"blob-code blob-code-inner js-file-line\">      m;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L171\" class=\"blob-num js-line-number\" data-line-number=\"171\"><\/td>\n        <td id=\"file-markdown-js-LC171\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L172\" class=\"blob-num js-line-number\" data-line-number=\"172\"><\/td>\n        <td id=\"file-markdown-js-LC172\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> line_no <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">1<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L173\" class=\"blob-num js-line-number\" data-line-number=\"173\"><\/td>\n        <td id=\"file-markdown-js-LC173\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L174\" class=\"blob-num js-line-number\" data-line-number=\"174\"><\/td>\n        <td id=\"file-markdown-js-LC174\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( ( m <span class=\"pl-k\">=<\/span><span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>(<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-c1\">\\n<\/span>)<span class=\"pl-pds\">/<\/span><\/span>.<span class=\"pl-c1\">exec<\/span>(input) ) <span class=\"pl-k\">!=<\/span> <span class=\"pl-c1\">null<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L175\" class=\"blob-num js-line-number\" data-line-number=\"175\"><\/td>\n        <td id=\"file-markdown-js-LC175\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> skip (but count) leading blank lines<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L176\" class=\"blob-num js-line-number\" data-line-number=\"176\"><\/td>\n        <td id=\"file-markdown-js-LC176\" class=\"blob-code blob-code-inner js-file-line\">    line_no <span class=\"pl-k\">+=<\/span> <span class=\"pl-en\">count_lines<\/span>( m[<span class=\"pl-c1\">0<\/span>] );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L177\" class=\"blob-num js-line-number\" data-line-number=\"177\"><\/td>\n        <td id=\"file-markdown-js-LC177\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">re<\/span>.<span class=\"pl-c1\">lastIndex<\/span> <span class=\"pl-k\">=<\/span> m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L178\" class=\"blob-num js-line-number\" data-line-number=\"178\"><\/td>\n        <td id=\"file-markdown-js-LC178\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L179\" class=\"blob-num js-line-number\" data-line-number=\"179\"><\/td>\n        <td id=\"file-markdown-js-LC179\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L180\" class=\"blob-num js-line-number\" data-line-number=\"180\"><\/td>\n        <td id=\"file-markdown-js-LC180\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">while<\/span> ( ( m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">re<\/span>.<span class=\"pl-c1\">exec<\/span>(input) ) <span class=\"pl-k\">!==<\/span> <span class=\"pl-c1\">null<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L181\" class=\"blob-num js-line-number\" data-line-number=\"181\"><\/td>\n        <td id=\"file-markdown-js-LC181\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> (m[<span class=\"pl-c1\">2<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\n<\/span>#<span class=\"pl-pds\">&quot;<\/span><\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L182\" class=\"blob-num js-line-number\" data-line-number=\"182\"><\/td>\n        <td id=\"file-markdown-js-LC182\" class=\"blob-code blob-code-inner js-file-line\">      m[<span class=\"pl-c1\">2<\/span>] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\n<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L183\" class=\"blob-num js-line-number\" data-line-number=\"183\"><\/td>\n        <td id=\"file-markdown-js-LC183\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-smi\">re<\/span>.<span class=\"pl-c1\">lastIndex<\/span><span class=\"pl-k\">--<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L184\" class=\"blob-num js-line-number\" data-line-number=\"184\"><\/td>\n        <td id=\"file-markdown-js-LC184\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L185\" class=\"blob-num js-line-number\" data-line-number=\"185\"><\/td>\n        <td id=\"file-markdown-js-LC185\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">blocks<\/span>.<span class=\"pl-c1\">push<\/span>( <span class=\"pl-en\">mk_block<\/span>( m[<span class=\"pl-c1\">1<\/span>], m[<span class=\"pl-c1\">2<\/span>], line_no ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L186\" class=\"blob-num js-line-number\" data-line-number=\"186\"><\/td>\n        <td id=\"file-markdown-js-LC186\" class=\"blob-code blob-code-inner js-file-line\">    line_no <span class=\"pl-k\">+=<\/span> <span class=\"pl-en\">count_lines<\/span>( m[<span class=\"pl-c1\">0<\/span>] );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L187\" class=\"blob-num js-line-number\" data-line-number=\"187\"><\/td>\n        <td id=\"file-markdown-js-LC187\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L188\" class=\"blob-num js-line-number\" data-line-number=\"188\"><\/td>\n        <td id=\"file-markdown-js-LC188\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L189\" class=\"blob-num js-line-number\" data-line-number=\"189\"><\/td>\n        <td id=\"file-markdown-js-LC189\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> blocks;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L190\" class=\"blob-num js-line-number\" data-line-number=\"190\"><\/td>\n        <td id=\"file-markdown-js-LC190\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L191\" class=\"blob-num js-line-number\" data-line-number=\"191\"><\/td>\n        <td id=\"file-markdown-js-LC191\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L192\" class=\"blob-num js-line-number\" data-line-number=\"192\"><\/td>\n        <td id=\"file-markdown-js-LC192\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">/**<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L193\" class=\"blob-num js-line-number\" data-line-number=\"193\"><\/td>\n        <td id=\"file-markdown-js-LC193\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  Markdown#processBlock( block, next ) -&gt; undefined | [ JsonML, ... ]<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L194\" class=\"blob-num js-line-number\" data-line-number=\"194\"><\/td>\n        <td id=\"file-markdown-js-LC194\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - block (String): the block to process<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L195\" class=\"blob-num js-line-number\" data-line-number=\"195\"><\/td>\n        <td id=\"file-markdown-js-LC195\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - next (Array): the following blocks<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L196\" class=\"blob-num js-line-number\" data-line-number=\"196\"><\/td>\n        <td id=\"file-markdown-js-LC196\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L197\" class=\"blob-num js-line-number\" data-line-number=\"197\"><\/td>\n        <td id=\"file-markdown-js-LC197\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * Process `block` and return an array of JsonML nodes representing `block`.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L198\" class=\"blob-num js-line-number\" data-line-number=\"198\"><\/td>\n        <td id=\"file-markdown-js-LC198\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L199\" class=\"blob-num js-line-number\" data-line-number=\"199\"><\/td>\n        <td id=\"file-markdown-js-LC199\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * It does this by asking each block level function in the dialect to process<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L200\" class=\"blob-num js-line-number\" data-line-number=\"200\"><\/td>\n        <td id=\"file-markdown-js-LC200\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * the block until one can. Succesful handling is indicated by returning an<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L201\" class=\"blob-num js-line-number\" data-line-number=\"201\"><\/td>\n        <td id=\"file-markdown-js-LC201\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * array (with zero or more JsonML nodes), failure by a false value.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L202\" class=\"blob-num js-line-number\" data-line-number=\"202\"><\/td>\n        <td id=\"file-markdown-js-LC202\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L203\" class=\"blob-num js-line-number\" data-line-number=\"203\"><\/td>\n        <td id=\"file-markdown-js-LC203\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * Blocks handlers are responsible for calling [[Markdown#processInline]]<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L204\" class=\"blob-num js-line-number\" data-line-number=\"204\"><\/td>\n        <td id=\"file-markdown-js-LC204\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * themselves as appropriate.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L205\" class=\"blob-num js-line-number\" data-line-number=\"205\"><\/td>\n        <td id=\"file-markdown-js-LC205\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L206\" class=\"blob-num js-line-number\" data-line-number=\"206\"><\/td>\n        <td id=\"file-markdown-js-LC206\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * If the blocks were split incorrectly or adjacent blocks need collapsing you<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L207\" class=\"blob-num js-line-number\" data-line-number=\"207\"><\/td>\n        <td id=\"file-markdown-js-LC207\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * can adjust `next` in place using shift/splice etc.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L208\" class=\"blob-num js-line-number\" data-line-number=\"208\"><\/td>\n        <td id=\"file-markdown-js-LC208\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L209\" class=\"blob-num js-line-number\" data-line-number=\"209\"><\/td>\n        <td id=\"file-markdown-js-LC209\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * If any of this default behaviour is not right for the dialect, you can<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L210\" class=\"blob-num js-line-number\" data-line-number=\"210\"><\/td>\n        <td id=\"file-markdown-js-LC210\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * define a `__call__` method on the dialect that will get invoked to handle<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L211\" class=\"blob-num js-line-number\" data-line-number=\"211\"><\/td>\n        <td id=\"file-markdown-js-LC211\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * the block processing.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L212\" class=\"blob-num js-line-number\" data-line-number=\"212\"><\/td>\n        <td id=\"file-markdown-js-LC212\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> <span class=\"pl-c\">*/<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L213\" class=\"blob-num js-line-number\" data-line-number=\"213\"><\/td>\n        <td id=\"file-markdown-js-LC213\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-c1\">prototype<\/span>.<span class=\"pl-en\">processBlock<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">processBlock<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L214\" class=\"blob-num js-line-number\" data-line-number=\"214\"><\/td>\n        <td id=\"file-markdown-js-LC214\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> cbs <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-smi\">block<\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L215\" class=\"blob-num js-line-number\" data-line-number=\"215\"><\/td>\n        <td id=\"file-markdown-js-LC215\" class=\"blob-code blob-code-inner js-file-line\">      ord <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">cbs<\/span>.<span class=\"pl-smi\">__order__<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L216\" class=\"blob-num js-line-number\" data-line-number=\"216\"><\/td>\n        <td id=\"file-markdown-js-LC216\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L217\" class=\"blob-num js-line-number\" data-line-number=\"217\"><\/td>\n        <td id=\"file-markdown-js-LC217\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>__call__<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">in<\/span> cbs ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L218\" class=\"blob-num js-line-number\" data-line-number=\"218\"><\/td>\n        <td id=\"file-markdown-js-LC218\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> <span class=\"pl-smi\">cbs<\/span>.<span class=\"pl-smi\">__call__<\/span>.<span class=\"pl-c1\">call<\/span>(<span class=\"pl-c1\">this<\/span>, block, next);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L219\" class=\"blob-num js-line-number\" data-line-number=\"219\"><\/td>\n        <td id=\"file-markdown-js-LC219\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L220\" class=\"blob-num js-line-number\" data-line-number=\"220\"><\/td>\n        <td id=\"file-markdown-js-LC220\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L221\" class=\"blob-num js-line-number\" data-line-number=\"221\"><\/td>\n        <td id=\"file-markdown-js-LC221\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> i <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; i <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">ord<\/span>.<span class=\"pl-c1\">length<\/span>; i<span class=\"pl-k\">++<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L222\" class=\"blob-num js-line-number\" data-line-number=\"222\"><\/td>\n        <td id=\"file-markdown-js-LC222\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>D:this.debug( &quot;Testing&quot;, ord[i] );<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L223\" class=\"blob-num js-line-number\" data-line-number=\"223\"><\/td>\n        <td id=\"file-markdown-js-LC223\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">var<\/span> res <span class=\"pl-k\">=<\/span> cbs[ ord[i] ].<span class=\"pl-c1\">call<\/span>( <span class=\"pl-c1\">this<\/span>, block, next );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L224\" class=\"blob-num js-line-number\" data-line-number=\"224\"><\/td>\n        <td id=\"file-markdown-js-LC224\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( res ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L225\" class=\"blob-num js-line-number\" data-line-number=\"225\"><\/td>\n        <td id=\"file-markdown-js-LC225\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>D:this.debug(&quot;  matched&quot;);<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L226\" class=\"blob-num js-line-number\" data-line-number=\"226\"><\/td>\n        <td id=\"file-markdown-js-LC226\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span><span class=\"pl-en\">isArray<\/span>(res) <span class=\"pl-k\">||<\/span> ( <span class=\"pl-smi\">res<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&gt;<\/span> <span class=\"pl-c1\">0<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">!<\/span>( <span class=\"pl-en\">isArray<\/span>(res[<span class=\"pl-c1\">0<\/span>]) ) ) )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L227\" class=\"blob-num js-line-number\" data-line-number=\"227\"><\/td>\n        <td id=\"file-markdown-js-LC227\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">debug<\/span>(ord[i], <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>didn&#39;t return a proper array<span class=\"pl-pds\">&quot;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L228\" class=\"blob-num js-line-number\" data-line-number=\"228\"><\/td>\n        <td id=\"file-markdown-js-LC228\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>D:this.debug( &quot;&quot; );<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L229\" class=\"blob-num js-line-number\" data-line-number=\"229\"><\/td>\n        <td id=\"file-markdown-js-LC229\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> res;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L230\" class=\"blob-num js-line-number\" data-line-number=\"230\"><\/td>\n        <td id=\"file-markdown-js-LC230\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L231\" class=\"blob-num js-line-number\" data-line-number=\"231\"><\/td>\n        <td id=\"file-markdown-js-LC231\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L232\" class=\"blob-num js-line-number\" data-line-number=\"232\"><\/td>\n        <td id=\"file-markdown-js-LC232\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L233\" class=\"blob-num js-line-number\" data-line-number=\"233\"><\/td>\n        <td id=\"file-markdown-js-LC233\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Uhoh! no match! Should we throw an error?<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L234\" class=\"blob-num js-line-number\" data-line-number=\"234\"><\/td>\n        <td id=\"file-markdown-js-LC234\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L235\" class=\"blob-num js-line-number\" data-line-number=\"235\"><\/td>\n        <td id=\"file-markdown-js-LC235\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L236\" class=\"blob-num js-line-number\" data-line-number=\"236\"><\/td>\n        <td id=\"file-markdown-js-LC236\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L237\" class=\"blob-num js-line-number\" data-line-number=\"237\"><\/td>\n        <td id=\"file-markdown-js-LC237\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-c1\">prototype<\/span>.<span class=\"pl-en\">processInline<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">processInline<\/span>( <span class=\"pl-smi\">block<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L238\" class=\"blob-num js-line-number\" data-line-number=\"238\"><\/td>\n        <td id=\"file-markdown-js-LC238\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-smi\">inline<\/span>.<span class=\"pl-smi\">__call__<\/span>.<span class=\"pl-c1\">call<\/span>( <span class=\"pl-c1\">this<\/span>, <span class=\"pl-c1\">String<\/span>( block ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L239\" class=\"blob-num js-line-number\" data-line-number=\"239\"><\/td>\n        <td id=\"file-markdown-js-LC239\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L240\" class=\"blob-num js-line-number\" data-line-number=\"240\"><\/td>\n        <td id=\"file-markdown-js-LC240\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L241\" class=\"blob-num js-line-number\" data-line-number=\"241\"><\/td>\n        <td id=\"file-markdown-js-LC241\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">/**<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L242\" class=\"blob-num js-line-number\" data-line-number=\"242\"><\/td>\n        <td id=\"file-markdown-js-LC242\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  Markdown#toTree( source ) -&gt; JsonML<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L243\" class=\"blob-num js-line-number\" data-line-number=\"243\"><\/td>\n        <td id=\"file-markdown-js-LC243\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - source (String): markdown source to parse<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L244\" class=\"blob-num js-line-number\" data-line-number=\"244\"><\/td>\n        <td id=\"file-markdown-js-LC244\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L245\" class=\"blob-num js-line-number\" data-line-number=\"245\"><\/td>\n        <td id=\"file-markdown-js-LC245\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  Parse `source` into a JsonML tree representing the markdown document.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L246\" class=\"blob-num js-line-number\" data-line-number=\"246\"><\/td>\n        <td id=\"file-markdown-js-LC246\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<span class=\"pl-c\">*/<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L247\" class=\"blob-num js-line-number\" data-line-number=\"247\"><\/td>\n        <td id=\"file-markdown-js-LC247\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> custom_tree means set this.tree to `custom_tree` and restore old value on return<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L248\" class=\"blob-num js-line-number\" data-line-number=\"248\"><\/td>\n        <td id=\"file-markdown-js-LC248\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-c1\">prototype<\/span>.<span class=\"pl-en\">toTree<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">toTree<\/span>( <span class=\"pl-smi\">source<\/span>, <span class=\"pl-smi\">custom_root<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L249\" class=\"blob-num js-line-number\" data-line-number=\"249\"><\/td>\n        <td id=\"file-markdown-js-LC249\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> blocks <span class=\"pl-k\">=<\/span> source <span class=\"pl-k\">instanceof<\/span> <span class=\"pl-c1\">Array<\/span> <span class=\"pl-k\">?<\/span> source <span class=\"pl-k\">:<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">split_blocks<\/span>( source );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L250\" class=\"blob-num js-line-number\" data-line-number=\"250\"><\/td>\n        <td id=\"file-markdown-js-LC250\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L251\" class=\"blob-num js-line-number\" data-line-number=\"251\"><\/td>\n        <td id=\"file-markdown-js-LC251\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Make tree a member variable so its easier to mess with in extensions<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L252\" class=\"blob-num js-line-number\" data-line-number=\"252\"><\/td>\n        <td id=\"file-markdown-js-LC252\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> old_tree <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L253\" class=\"blob-num js-line-number\" data-line-number=\"253\"><\/td>\n        <td id=\"file-markdown-js-LC253\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">try<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L254\" class=\"blob-num js-line-number\" data-line-number=\"254\"><\/td>\n        <td id=\"file-markdown-js-LC254\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span> <span class=\"pl-k\">=<\/span> custom_root <span class=\"pl-k\">||<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span> <span class=\"pl-k\">||<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>markdown<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L255\" class=\"blob-num js-line-number\" data-line-number=\"255\"><\/td>\n        <td id=\"file-markdown-js-LC255\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L256\" class=\"blob-num js-line-number\" data-line-number=\"256\"><\/td>\n        <td id=\"file-markdown-js-LC256\" class=\"blob-code blob-code-inner js-file-line\">    blocks<span class=\"pl-k\">:<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L257\" class=\"blob-num js-line-number\" data-line-number=\"257\"><\/td>\n        <td id=\"file-markdown-js-LC257\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">while<\/span> ( <span class=\"pl-smi\">blocks<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L258\" class=\"blob-num js-line-number\" data-line-number=\"258\"><\/td>\n        <td id=\"file-markdown-js-LC258\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> b <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processBlock<\/span>( <span class=\"pl-smi\">blocks<\/span>.<span class=\"pl-c1\">shift<\/span>(), blocks );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L259\" class=\"blob-num js-line-number\" data-line-number=\"259\"><\/td>\n        <td id=\"file-markdown-js-LC259\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L260\" class=\"blob-num js-line-number\" data-line-number=\"260\"><\/td>\n        <td id=\"file-markdown-js-LC260\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Reference blocks and the like won&#39;t return any content<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L261\" class=\"blob-num js-line-number\" data-line-number=\"261\"><\/td>\n        <td id=\"file-markdown-js-LC261\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span><span class=\"pl-smi\">b<\/span>.<span class=\"pl-c1\">length<\/span> ) <span class=\"pl-k\">continue<\/span> blocks;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L262\" class=\"blob-num js-line-number\" data-line-number=\"262\"><\/td>\n        <td id=\"file-markdown-js-LC262\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L263\" class=\"blob-num js-line-number\" data-line-number=\"263\"><\/td>\n        <td id=\"file-markdown-js-LC263\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span>.<span class=\"pl-smi\">push<\/span>.<span class=\"pl-c1\">apply<\/span>( <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span>, b );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L264\" class=\"blob-num js-line-number\" data-line-number=\"264\"><\/td>\n        <td id=\"file-markdown-js-LC264\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L265\" class=\"blob-num js-line-number\" data-line-number=\"265\"><\/td>\n        <td id=\"file-markdown-js-LC265\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L266\" class=\"blob-num js-line-number\" data-line-number=\"266\"><\/td>\n        <td id=\"file-markdown-js-LC266\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L267\" class=\"blob-num js-line-number\" data-line-number=\"267\"><\/td>\n        <td id=\"file-markdown-js-LC267\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">finally<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L268\" class=\"blob-num js-line-number\" data-line-number=\"268\"><\/td>\n        <td id=\"file-markdown-js-LC268\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( custom_root ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L269\" class=\"blob-num js-line-number\" data-line-number=\"269\"><\/td>\n        <td id=\"file-markdown-js-LC269\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span> <span class=\"pl-k\">=<\/span> old_tree;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L270\" class=\"blob-num js-line-number\" data-line-number=\"270\"><\/td>\n        <td id=\"file-markdown-js-LC270\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L271\" class=\"blob-num js-line-number\" data-line-number=\"271\"><\/td>\n        <td id=\"file-markdown-js-LC271\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L272\" class=\"blob-num js-line-number\" data-line-number=\"272\"><\/td>\n        <td id=\"file-markdown-js-LC272\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L273\" class=\"blob-num js-line-number\" data-line-number=\"273\"><\/td>\n        <td id=\"file-markdown-js-LC273\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L274\" class=\"blob-num js-line-number\" data-line-number=\"274\"><\/td>\n        <td id=\"file-markdown-js-LC274\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Noop by default<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L275\" class=\"blob-num js-line-number\" data-line-number=\"275\"><\/td>\n        <td id=\"file-markdown-js-LC275\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-c1\">prototype<\/span>.<span class=\"pl-en\">debug<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> () {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L276\" class=\"blob-num js-line-number\" data-line-number=\"276\"><\/td>\n        <td id=\"file-markdown-js-LC276\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> args <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">Array<\/span>.<span class=\"pl-c1\">prototype<\/span>.<span class=\"pl-smi\">slice<\/span>.<span class=\"pl-c1\">call<\/span>( <span class=\"pl-c1\">arguments<\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L277\" class=\"blob-num js-line-number\" data-line-number=\"277\"><\/td>\n        <td id=\"file-markdown-js-LC277\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">args<\/span>.<span class=\"pl-c1\">unshift<\/span>(<span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">debug_indent<\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L278\" class=\"blob-num js-line-number\" data-line-number=\"278\"><\/td>\n        <td id=\"file-markdown-js-LC278\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">typeof<\/span> print <span class=\"pl-k\">!==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>undefined<span class=\"pl-pds\">&quot;<\/span><\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L279\" class=\"blob-num js-line-number\" data-line-number=\"279\"><\/td>\n        <td id=\"file-markdown-js-LC279\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-smi\">print<\/span>.<span class=\"pl-c1\">apply<\/span>( print, args );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L280\" class=\"blob-num js-line-number\" data-line-number=\"280\"><\/td>\n        <td id=\"file-markdown-js-LC280\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">typeof<\/span> <span class=\"pl-en\">console<\/span> <span class=\"pl-k\">!==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>undefined<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">typeof<\/span> <span class=\"pl-en\">console<\/span>.<span class=\"pl-smi\">log<\/span> <span class=\"pl-k\">!==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>undefined<span class=\"pl-pds\">&quot;<\/span><\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L281\" class=\"blob-num js-line-number\" data-line-number=\"281\"><\/td>\n        <td id=\"file-markdown-js-LC281\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-en\">console<\/span>.<span class=\"pl-smi\">log<\/span>.<span class=\"pl-c1\">apply<\/span>( <span class=\"pl-c1\">null<\/span>, args );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L282\" class=\"blob-num js-line-number\" data-line-number=\"282\"><\/td>\n        <td id=\"file-markdown-js-LC282\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L283\" class=\"blob-num js-line-number\" data-line-number=\"283\"><\/td>\n        <td id=\"file-markdown-js-LC283\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L284\" class=\"blob-num js-line-number\" data-line-number=\"284\"><\/td>\n        <td id=\"file-markdown-js-LC284\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-c1\">prototype<\/span>.<span class=\"pl-en\">loop_re_over_block<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>( <span class=\"pl-smi\">re<\/span>, <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">cb<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L285\" class=\"blob-num js-line-number\" data-line-number=\"285\"><\/td>\n        <td id=\"file-markdown-js-LC285\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Dont use /g regexps with this<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L286\" class=\"blob-num js-line-number\" data-line-number=\"286\"><\/td>\n        <td id=\"file-markdown-js-LC286\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> m,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L287\" class=\"blob-num js-line-number\" data-line-number=\"287\"><\/td>\n        <td id=\"file-markdown-js-LC287\" class=\"blob-code blob-code-inner js-file-line\">      b <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">valueOf<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L288\" class=\"blob-num js-line-number\" data-line-number=\"288\"><\/td>\n        <td id=\"file-markdown-js-LC288\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L289\" class=\"blob-num js-line-number\" data-line-number=\"289\"><\/td>\n        <td id=\"file-markdown-js-LC289\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">while<\/span> ( <span class=\"pl-smi\">b<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> (m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">re<\/span>.<span class=\"pl-c1\">exec<\/span>(b) ) <span class=\"pl-k\">!=<\/span> <span class=\"pl-c1\">null<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L290\" class=\"blob-num js-line-number\" data-line-number=\"290\"><\/td>\n        <td id=\"file-markdown-js-LC290\" class=\"blob-code blob-code-inner js-file-line\">    b <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">b<\/span>.<span class=\"pl-c1\">substr<\/span>( m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L291\" class=\"blob-num js-line-number\" data-line-number=\"291\"><\/td>\n        <td id=\"file-markdown-js-LC291\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">cb<\/span>.<span class=\"pl-c1\">call<\/span>(<span class=\"pl-c1\">this<\/span>, m);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L292\" class=\"blob-num js-line-number\" data-line-number=\"292\"><\/td>\n        <td id=\"file-markdown-js-LC292\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L293\" class=\"blob-num js-line-number\" data-line-number=\"293\"><\/td>\n        <td id=\"file-markdown-js-LC293\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> b;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L294\" class=\"blob-num js-line-number\" data-line-number=\"294\"><\/td>\n        <td id=\"file-markdown-js-LC294\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L295\" class=\"blob-num js-line-number\" data-line-number=\"295\"><\/td>\n        <td id=\"file-markdown-js-LC295\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L296\" class=\"blob-num js-line-number\" data-line-number=\"296\"><\/td>\n        <td id=\"file-markdown-js-LC296\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">/**<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L297\" class=\"blob-num js-line-number\" data-line-number=\"297\"><\/td>\n        <td id=\"file-markdown-js-LC297\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * Markdown.dialects<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L298\" class=\"blob-num js-line-number\" data-line-number=\"298\"><\/td>\n        <td id=\"file-markdown-js-LC298\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L299\" class=\"blob-num js-line-number\" data-line-number=\"299\"><\/td>\n        <td id=\"file-markdown-js-LC299\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * Namespace of built-in dialects.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L300\" class=\"blob-num js-line-number\" data-line-number=\"300\"><\/td>\n        <td id=\"file-markdown-js-LC300\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<span class=\"pl-c\">*/<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L301\" class=\"blob-num js-line-number\" data-line-number=\"301\"><\/td>\n        <td id=\"file-markdown-js-LC301\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span> <span class=\"pl-k\">=<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L302\" class=\"blob-num js-line-number\" data-line-number=\"302\"><\/td>\n        <td id=\"file-markdown-js-LC302\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L303\" class=\"blob-num js-line-number\" data-line-number=\"303\"><\/td>\n        <td id=\"file-markdown-js-LC303\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">/**<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L304\" class=\"blob-num js-line-number\" data-line-number=\"304\"><\/td>\n        <td id=\"file-markdown-js-LC304\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * Markdown.dialects.Gruber<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L305\" class=\"blob-num js-line-number\" data-line-number=\"305\"><\/td>\n        <td id=\"file-markdown-js-LC305\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L306\" class=\"blob-num js-line-number\" data-line-number=\"306\"><\/td>\n        <td id=\"file-markdown-js-LC306\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * The default dialect that follows the rules set out by John Gruber&#39;s<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L307\" class=\"blob-num js-line-number\" data-line-number=\"307\"><\/td>\n        <td id=\"file-markdown-js-LC307\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * markdown.pl as closely as possible. Well actually we follow the behaviour of<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L308\" class=\"blob-num js-line-number\" data-line-number=\"308\"><\/td>\n        <td id=\"file-markdown-js-LC308\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * that script which in some places is not exactly what the syntax web page<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L309\" class=\"blob-num js-line-number\" data-line-number=\"309\"><\/td>\n        <td id=\"file-markdown-js-LC309\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> * says.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L310\" class=\"blob-num js-line-number\" data-line-number=\"310\"><\/td>\n        <td id=\"file-markdown-js-LC310\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<span class=\"pl-c\">*/<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L311\" class=\"blob-num js-line-number\" data-line-number=\"311\"><\/td>\n        <td id=\"file-markdown-js-LC311\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Gruber<\/span> <span class=\"pl-k\">=<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L312\" class=\"blob-num js-line-number\" data-line-number=\"312\"><\/td>\n        <td id=\"file-markdown-js-LC312\" class=\"blob-code blob-code-inner js-file-line\">  block<span class=\"pl-k\">:<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L313\" class=\"blob-num js-line-number\" data-line-number=\"313\"><\/td>\n        <td id=\"file-markdown-js-LC313\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">atxHeader<\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">atxHeader<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L314\" class=\"blob-num js-line-number\" data-line-number=\"314\"><\/td>\n        <td id=\"file-markdown-js-LC314\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>(#<span class=\"pl-k\">{1,6}<\/span>)<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span>(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span>#<span class=\"pl-k\">*<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span>(?:<span class=\"pl-c1\">\\n<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-k\">$<\/span>)<span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L315\" class=\"blob-num js-line-number\" data-line-number=\"315\"><\/td>\n        <td id=\"file-markdown-js-LC315\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L316\" class=\"blob-num js-line-number\" data-line-number=\"316\"><\/td>\n        <td id=\"file-markdown-js-LC316\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>m ) <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L317\" class=\"blob-num js-line-number\" data-line-number=\"317\"><\/td>\n        <td id=\"file-markdown-js-LC317\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L318\" class=\"blob-num js-line-number\" data-line-number=\"318\"><\/td>\n        <td id=\"file-markdown-js-LC318\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> header <span class=\"pl-k\">=<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>header<span class=\"pl-pds\">&quot;<\/span><\/span>, { level<span class=\"pl-k\">:<\/span> m[ <span class=\"pl-c1\">1<\/span> ].<span class=\"pl-c1\">length<\/span> } ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L319\" class=\"blob-num js-line-number\" data-line-number=\"319\"><\/td>\n        <td id=\"file-markdown-js-LC319\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c1\">Array<\/span>.<span class=\"pl-c1\">prototype<\/span>.<span class=\"pl-smi\">push<\/span>.<span class=\"pl-c1\">apply<\/span>(header, <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processInline<\/span>(m[ <span class=\"pl-c1\">2<\/span> ]));<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L320\" class=\"blob-num js-line-number\" data-line-number=\"320\"><\/td>\n        <td id=\"file-markdown-js-LC320\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L321\" class=\"blob-num js-line-number\" data-line-number=\"321\"><\/td>\n        <td id=\"file-markdown-js-LC321\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">length<\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L322\" class=\"blob-num js-line-number\" data-line-number=\"322\"><\/td>\n        <td id=\"file-markdown-js-LC322\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">unshift<\/span>( <span class=\"pl-en\">mk_block<\/span>( <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">substr<\/span>( m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span> ), <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">trailing<\/span>, <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">lineNumber<\/span> <span class=\"pl-k\">+<\/span> <span class=\"pl-c1\">2<\/span> ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L323\" class=\"blob-num js-line-number\" data-line-number=\"323\"><\/td>\n        <td id=\"file-markdown-js-LC323\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L324\" class=\"blob-num js-line-number\" data-line-number=\"324\"><\/td>\n        <td id=\"file-markdown-js-LC324\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> [ header ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L325\" class=\"blob-num js-line-number\" data-line-number=\"325\"><\/td>\n        <td id=\"file-markdown-js-LC325\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L326\" class=\"blob-num js-line-number\" data-line-number=\"326\"><\/td>\n        <td id=\"file-markdown-js-LC326\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L327\" class=\"blob-num js-line-number\" data-line-number=\"327\"><\/td>\n        <td id=\"file-markdown-js-LC327\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">setextHeader<\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">setextHeader<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L328\" class=\"blob-num js-line-number\" data-line-number=\"328\"><\/td>\n        <td id=\"file-markdown-js-LC328\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*<\/span>)<span class=\"pl-c1\">\\n<\/span>(<span class=\"pl-c1\">[-=]<\/span>)<span class=\"pl-k\">\\2\\2<\/span><span class=\"pl-k\">+<\/span>(?:<span class=\"pl-c1\">\\n<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-k\">$<\/span>)<span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L329\" class=\"blob-num js-line-number\" data-line-number=\"329\"><\/td>\n        <td id=\"file-markdown-js-LC329\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L330\" class=\"blob-num js-line-number\" data-line-number=\"330\"><\/td>\n        <td id=\"file-markdown-js-LC330\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>m ) <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L331\" class=\"blob-num js-line-number\" data-line-number=\"331\"><\/td>\n        <td id=\"file-markdown-js-LC331\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L332\" class=\"blob-num js-line-number\" data-line-number=\"332\"><\/td>\n        <td id=\"file-markdown-js-LC332\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> level <span class=\"pl-k\">=<\/span> ( m[ <span class=\"pl-c1\">2<\/span> ] <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>=<span class=\"pl-pds\">&quot;<\/span><\/span> ) <span class=\"pl-k\">?<\/span> <span class=\"pl-c1\">1<\/span> <span class=\"pl-k\">:<\/span> <span class=\"pl-c1\">2<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L333\" class=\"blob-num js-line-number\" data-line-number=\"333\"><\/td>\n        <td id=\"file-markdown-js-LC333\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> header <span class=\"pl-k\">=<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>header<span class=\"pl-pds\">&quot;<\/span><\/span>, { level <span class=\"pl-k\">:<\/span> level }, m[ <span class=\"pl-c1\">1<\/span> ] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L334\" class=\"blob-num js-line-number\" data-line-number=\"334\"><\/td>\n        <td id=\"file-markdown-js-LC334\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L335\" class=\"blob-num js-line-number\" data-line-number=\"335\"><\/td>\n        <td id=\"file-markdown-js-LC335\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">length<\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L336\" class=\"blob-num js-line-number\" data-line-number=\"336\"><\/td>\n        <td id=\"file-markdown-js-LC336\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">unshift<\/span>( <span class=\"pl-en\">mk_block<\/span>( <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">substr<\/span>( m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span> ), <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">trailing<\/span>, <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">lineNumber<\/span> <span class=\"pl-k\">+<\/span> <span class=\"pl-c1\">2<\/span> ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L337\" class=\"blob-num js-line-number\" data-line-number=\"337\"><\/td>\n        <td id=\"file-markdown-js-LC337\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L338\" class=\"blob-num js-line-number\" data-line-number=\"338\"><\/td>\n        <td id=\"file-markdown-js-LC338\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> [ header ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L339\" class=\"blob-num js-line-number\" data-line-number=\"339\"><\/td>\n        <td id=\"file-markdown-js-LC339\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L340\" class=\"blob-num js-line-number\" data-line-number=\"340\"><\/td>\n        <td id=\"file-markdown-js-LC340\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L341\" class=\"blob-num js-line-number\" data-line-number=\"341\"><\/td>\n        <td id=\"file-markdown-js-LC341\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">code<\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">code<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L342\" class=\"blob-num js-line-number\" data-line-number=\"342\"><\/td>\n        <td id=\"file-markdown-js-LC342\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> |    Foo<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L343\" class=\"blob-num js-line-number\" data-line-number=\"343\"><\/td>\n        <td id=\"file-markdown-js-LC343\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> |bar<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L344\" class=\"blob-num js-line-number\" data-line-number=\"344\"><\/td>\n        <td id=\"file-markdown-js-LC344\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> should be a code block followed by a paragraph. Fun<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L345\" class=\"blob-num js-line-number\" data-line-number=\"345\"><\/td>\n        <td id=\"file-markdown-js-LC345\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L346\" class=\"blob-num js-line-number\" data-line-number=\"346\"><\/td>\n        <td id=\"file-markdown-js-LC346\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> There might also be adjacent code block to merge.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L347\" class=\"blob-num js-line-number\" data-line-number=\"347\"><\/td>\n        <td id=\"file-markdown-js-LC347\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L348\" class=\"blob-num js-line-number\" data-line-number=\"348\"><\/td>\n        <td id=\"file-markdown-js-LC348\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> ret <span class=\"pl-k\">=<\/span> [],<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L349\" class=\"blob-num js-line-number\" data-line-number=\"349\"><\/td>\n        <td id=\"file-markdown-js-LC349\" class=\"blob-code blob-code-inner js-file-line\">          re <span class=\"pl-k\">=<\/span><span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>(?: <span class=\"pl-k\">{0,3}<\/span><span class=\"pl-c1\">\\t<\/span><span class=\"pl-k\">|<\/span> <span class=\"pl-k\">{4}<\/span>)(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*<\/span>)<span class=\"pl-c1\">\\n<\/span><span class=\"pl-k\">?<\/span><span class=\"pl-pds\">/<\/span><\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L350\" class=\"blob-num js-line-number\" data-line-number=\"350\"><\/td>\n        <td id=\"file-markdown-js-LC350\" class=\"blob-code blob-code-inner js-file-line\">          lines;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L351\" class=\"blob-num js-line-number\" data-line-number=\"351\"><\/td>\n        <td id=\"file-markdown-js-LC351\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L352\" class=\"blob-num js-line-number\" data-line-number=\"352\"><\/td>\n        <td id=\"file-markdown-js-LC352\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> 4 spaces + content<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L353\" class=\"blob-num js-line-number\" data-line-number=\"353\"><\/td>\n        <td id=\"file-markdown-js-LC353\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span><span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>( re ) ) <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L354\" class=\"blob-num js-line-number\" data-line-number=\"354\"><\/td>\n        <td id=\"file-markdown-js-LC354\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L355\" class=\"blob-num js-line-number\" data-line-number=\"355\"><\/td>\n        <td id=\"file-markdown-js-LC355\" class=\"blob-code blob-code-inner js-file-line\">      block_search<span class=\"pl-k\">:<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L356\" class=\"blob-num js-line-number\" data-line-number=\"356\"><\/td>\n        <td id=\"file-markdown-js-LC356\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">do<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L357\" class=\"blob-num js-line-number\" data-line-number=\"357\"><\/td>\n        <td id=\"file-markdown-js-LC357\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Now pull out the rest of the lines<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L358\" class=\"blob-num js-line-number\" data-line-number=\"358\"><\/td>\n        <td id=\"file-markdown-js-LC358\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> b <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">loop_re_over_block<\/span>(<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L359\" class=\"blob-num js-line-number\" data-line-number=\"359\"><\/td>\n        <td id=\"file-markdown-js-LC359\" class=\"blob-code blob-code-inner js-file-line\">                  re, <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">valueOf<\/span>(), <span class=\"pl-k\">function<\/span>( <span class=\"pl-smi\">m<\/span> ) { <span class=\"pl-smi\">ret<\/span>.<span class=\"pl-c1\">push<\/span>( m[<span class=\"pl-c1\">1<\/span>] ); } );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L360\" class=\"blob-num js-line-number\" data-line-number=\"360\"><\/td>\n        <td id=\"file-markdown-js-LC360\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L361\" class=\"blob-num js-line-number\" data-line-number=\"361\"><\/td>\n        <td id=\"file-markdown-js-LC361\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">b<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L362\" class=\"blob-num js-line-number\" data-line-number=\"362\"><\/td>\n        <td id=\"file-markdown-js-LC362\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Case alluded to in first comment. push it back on as a new block<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L363\" class=\"blob-num js-line-number\" data-line-number=\"363\"><\/td>\n        <td id=\"file-markdown-js-LC363\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">unshift<\/span>( <span class=\"pl-en\">mk_block<\/span>(b, <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">trailing<\/span>) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L364\" class=\"blob-num js-line-number\" data-line-number=\"364\"><\/td>\n        <td id=\"file-markdown-js-LC364\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">break<\/span> block_search;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L365\" class=\"blob-num js-line-number\" data-line-number=\"365\"><\/td>\n        <td id=\"file-markdown-js-LC365\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L366\" class=\"blob-num js-line-number\" data-line-number=\"366\"><\/td>\n        <td id=\"file-markdown-js-LC366\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else<\/span> <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L367\" class=\"blob-num js-line-number\" data-line-number=\"367\"><\/td>\n        <td id=\"file-markdown-js-LC367\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Check the next block - it might be code too<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L368\" class=\"blob-num js-line-number\" data-line-number=\"368\"><\/td>\n        <td id=\"file-markdown-js-LC368\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>next[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">match<\/span>( re ) ) <span class=\"pl-k\">break<\/span> block_search;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L369\" class=\"blob-num js-line-number\" data-line-number=\"369\"><\/td>\n        <td id=\"file-markdown-js-LC369\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L370\" class=\"blob-num js-line-number\" data-line-number=\"370\"><\/td>\n        <td id=\"file-markdown-js-LC370\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Pull how how many blanks lines follow - minus two to account for .join<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L371\" class=\"blob-num js-line-number\" data-line-number=\"371\"><\/td>\n        <td id=\"file-markdown-js-LC371\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">ret<\/span>.<span class=\"pl-c1\">push<\/span> ( <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">trailing<\/span>.<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"><span class=\"pl-pds\">/<\/span><span class=\"pl-c1\">[<span class=\"pl-k\">^<\/span><span class=\"pl-c1\">\\n<\/span>]<\/span><span class=\"pl-pds\">/<\/span>g<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>).<span class=\"pl-c1\">substring<\/span>(<span class=\"pl-c1\">2<\/span>) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L372\" class=\"blob-num js-line-number\" data-line-number=\"372\"><\/td>\n        <td id=\"file-markdown-js-LC372\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L373\" class=\"blob-num js-line-number\" data-line-number=\"373\"><\/td>\n        <td id=\"file-markdown-js-LC373\" class=\"blob-code blob-code-inner js-file-line\">          block <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">shift<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L374\" class=\"blob-num js-line-number\" data-line-number=\"374\"><\/td>\n        <td id=\"file-markdown-js-LC374\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L375\" class=\"blob-num js-line-number\" data-line-number=\"375\"><\/td>\n        <td id=\"file-markdown-js-LC375\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L376\" class=\"blob-num js-line-number\" data-line-number=\"376\"><\/td>\n        <td id=\"file-markdown-js-LC376\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">break<\/span> block_search;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L377\" class=\"blob-num js-line-number\" data-line-number=\"377\"><\/td>\n        <td id=\"file-markdown-js-LC377\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L378\" class=\"blob-num js-line-number\" data-line-number=\"378\"><\/td>\n        <td id=\"file-markdown-js-LC378\" class=\"blob-code blob-code-inner js-file-line\">      } <span class=\"pl-k\">while<\/span> ( <span class=\"pl-c1\">true<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L379\" class=\"blob-num js-line-number\" data-line-number=\"379\"><\/td>\n        <td id=\"file-markdown-js-LC379\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L380\" class=\"blob-num js-line-number\" data-line-number=\"380\"><\/td>\n        <td id=\"file-markdown-js-LC380\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> [ [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>code_block<span class=\"pl-pds\">&quot;<\/span><\/span>, <span class=\"pl-smi\">ret<\/span>.<span class=\"pl-c1\">join<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\n<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>) ] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L381\" class=\"blob-num js-line-number\" data-line-number=\"381\"><\/td>\n        <td id=\"file-markdown-js-LC381\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L382\" class=\"blob-num js-line-number\" data-line-number=\"382\"><\/td>\n        <td id=\"file-markdown-js-LC382\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L383\" class=\"blob-num js-line-number\" data-line-number=\"383\"><\/td>\n        <td id=\"file-markdown-js-LC383\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">horizRule<\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">horizRule<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L384\" class=\"blob-num js-line-number\" data-line-number=\"384\"><\/td>\n        <td id=\"file-markdown-js-LC384\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> this needs to find any hr in the block to handle abutting blocks<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L385\" class=\"blob-num js-line-number\" data-line-number=\"385\"><\/td>\n        <td id=\"file-markdown-js-LC385\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>(?:(<span class=\"pl-c1\">[<span class=\"pl-c1\">\\s\\S<\/span>]<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-c1\">\\n<\/span>)<span class=\"pl-k\">?<\/span><span class=\"pl-c1\">[ <span class=\"pl-c1\">\\t<\/span>]<\/span><span class=\"pl-k\">*<\/span>(<span class=\"pl-c1\">[-_*]<\/span>)(?:<span class=\"pl-c1\">[ <span class=\"pl-c1\">\\t<\/span>]<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-k\">\\2<\/span>)<span class=\"pl-k\">{2,}<\/span><span class=\"pl-c1\">[ <span class=\"pl-c1\">\\t<\/span>]<\/span><span class=\"pl-k\">*<\/span>(?:<span class=\"pl-c1\">\\n<\/span>(<span class=\"pl-c1\">[<span class=\"pl-c1\">\\s\\S<\/span>]<\/span><span class=\"pl-k\">*<\/span>))<span class=\"pl-k\">?<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L386\" class=\"blob-num js-line-number\" data-line-number=\"386\"><\/td>\n        <td id=\"file-markdown-js-LC386\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L387\" class=\"blob-num js-line-number\" data-line-number=\"387\"><\/td>\n        <td id=\"file-markdown-js-LC387\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>m ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L388\" class=\"blob-num js-line-number\" data-line-number=\"388\"><\/td>\n        <td id=\"file-markdown-js-LC388\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L389\" class=\"blob-num js-line-number\" data-line-number=\"389\"><\/td>\n        <td id=\"file-markdown-js-LC389\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L390\" class=\"blob-num js-line-number\" data-line-number=\"390\"><\/td>\n        <td id=\"file-markdown-js-LC390\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L391\" class=\"blob-num js-line-number\" data-line-number=\"391\"><\/td>\n        <td id=\"file-markdown-js-LC391\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> jsonml <span class=\"pl-k\">=<\/span> [ [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>hr<span class=\"pl-pds\">&quot;<\/span><\/span> ] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L392\" class=\"blob-num js-line-number\" data-line-number=\"392\"><\/td>\n        <td id=\"file-markdown-js-LC392\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L393\" class=\"blob-num js-line-number\" data-line-number=\"393\"><\/td>\n        <td id=\"file-markdown-js-LC393\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if there&#39;s a leading abutting block, process it<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L394\" class=\"blob-num js-line-number\" data-line-number=\"394\"><\/td>\n        <td id=\"file-markdown-js-LC394\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( m[ <span class=\"pl-c1\">1<\/span> ] ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L395\" class=\"blob-num js-line-number\" data-line-number=\"395\"><\/td>\n        <td id=\"file-markdown-js-LC395\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-smi\">unshift<\/span>.<span class=\"pl-c1\">apply<\/span>( jsonml, <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processBlock<\/span>( m[ <span class=\"pl-c1\">1<\/span> ], [] ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L396\" class=\"blob-num js-line-number\" data-line-number=\"396\"><\/td>\n        <td id=\"file-markdown-js-LC396\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L397\" class=\"blob-num js-line-number\" data-line-number=\"397\"><\/td>\n        <td id=\"file-markdown-js-LC397\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L398\" class=\"blob-num js-line-number\" data-line-number=\"398\"><\/td>\n        <td id=\"file-markdown-js-LC398\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if there&#39;s a trailing abutting block, stick it into next<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L399\" class=\"blob-num js-line-number\" data-line-number=\"399\"><\/td>\n        <td id=\"file-markdown-js-LC399\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( m[ <span class=\"pl-c1\">3<\/span> ] ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L400\" class=\"blob-num js-line-number\" data-line-number=\"400\"><\/td>\n        <td id=\"file-markdown-js-LC400\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">unshift<\/span>( <span class=\"pl-en\">mk_block<\/span>( m[ <span class=\"pl-c1\">3<\/span> ] ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L401\" class=\"blob-num js-line-number\" data-line-number=\"401\"><\/td>\n        <td id=\"file-markdown-js-LC401\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L402\" class=\"blob-num js-line-number\" data-line-number=\"402\"><\/td>\n        <td id=\"file-markdown-js-LC402\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L403\" class=\"blob-num js-line-number\" data-line-number=\"403\"><\/td>\n        <td id=\"file-markdown-js-LC403\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> jsonml;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L404\" class=\"blob-num js-line-number\" data-line-number=\"404\"><\/td>\n        <td id=\"file-markdown-js-LC404\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L405\" class=\"blob-num js-line-number\" data-line-number=\"405\"><\/td>\n        <td id=\"file-markdown-js-LC405\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L406\" class=\"blob-num js-line-number\" data-line-number=\"406\"><\/td>\n        <td id=\"file-markdown-js-LC406\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> There are two types of lists. Tight and loose. Tight lists have no whitespace<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L407\" class=\"blob-num js-line-number\" data-line-number=\"407\"><\/td>\n        <td id=\"file-markdown-js-LC407\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> between the items (and result in text just in the &lt;li&gt;) and loose lists,<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L408\" class=\"blob-num js-line-number\" data-line-number=\"408\"><\/td>\n        <td id=\"file-markdown-js-LC408\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> which have an empty line between list items, resulting in (one or more)<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L409\" class=\"blob-num js-line-number\" data-line-number=\"409\"><\/td>\n        <td id=\"file-markdown-js-LC409\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> paragraphs inside the &lt;li&gt;.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L410\" class=\"blob-num js-line-number\" data-line-number=\"410\"><\/td>\n        <td id=\"file-markdown-js-LC410\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L411\" class=\"blob-num js-line-number\" data-line-number=\"411\"><\/td>\n        <td id=\"file-markdown-js-LC411\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> There are all sorts weird edge cases about the original markdown.pl&#39;s<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L412\" class=\"blob-num js-line-number\" data-line-number=\"412\"><\/td>\n        <td id=\"file-markdown-js-LC412\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> handling of lists:<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L413\" class=\"blob-num js-line-number\" data-line-number=\"413\"><\/td>\n        <td id=\"file-markdown-js-LC413\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L414\" class=\"blob-num js-line-number\" data-line-number=\"414\"><\/td>\n        <td id=\"file-markdown-js-LC414\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> * Nested lists are supposed to be indented by four chars per level. But<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L415\" class=\"blob-num js-line-number\" data-line-number=\"415\"><\/td>\n        <td id=\"file-markdown-js-LC415\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>   if they aren&#39;t, you can get a nested list by indenting by less than<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L416\" class=\"blob-num js-line-number\" data-line-number=\"416\"><\/td>\n        <td id=\"file-markdown-js-LC416\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>   four so long as the indent doesn&#39;t match an indent of an existing list<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L417\" class=\"blob-num js-line-number\" data-line-number=\"417\"><\/td>\n        <td id=\"file-markdown-js-LC417\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>   item in the &#39;nest stack&#39;.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L418\" class=\"blob-num js-line-number\" data-line-number=\"418\"><\/td>\n        <td id=\"file-markdown-js-LC418\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L419\" class=\"blob-num js-line-number\" data-line-number=\"419\"><\/td>\n        <td id=\"file-markdown-js-LC419\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> * The type of the list (bullet or number) is controlled just by the<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L420\" class=\"blob-num js-line-number\" data-line-number=\"420\"><\/td>\n        <td id=\"file-markdown-js-LC420\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>    first item at the indent. Subsequent changes are ignored unless they<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L421\" class=\"blob-num js-line-number\" data-line-number=\"421\"><\/td>\n        <td id=\"file-markdown-js-LC421\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>    are for nested lists<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L422\" class=\"blob-num js-line-number\" data-line-number=\"422\"><\/td>\n        <td id=\"file-markdown-js-LC422\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L423\" class=\"blob-num js-line-number\" data-line-number=\"423\"><\/td>\n        <td id=\"file-markdown-js-LC423\" class=\"blob-code blob-code-inner js-file-line\">    lists<span class=\"pl-k\">:<\/span> (<span class=\"pl-k\">function<\/span>( ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L424\" class=\"blob-num js-line-number\" data-line-number=\"424\"><\/td>\n        <td id=\"file-markdown-js-LC424\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Use a closure to hide a few variables.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L425\" class=\"blob-num js-line-number\" data-line-number=\"425\"><\/td>\n        <td id=\"file-markdown-js-LC425\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> any_list <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>[*+-]|<span class=\"pl-cce\">\\\\<\/span>d+<span class=\"pl-cce\">\\\\<\/span>.<span class=\"pl-pds\">&quot;<\/span><\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L426\" class=\"blob-num js-line-number\" data-line-number=\"426\"><\/td>\n        <td id=\"file-markdown-js-LC426\" class=\"blob-code blob-code-inner js-file-line\">          bullet_list <span class=\"pl-k\">=<\/span><span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-c1\">[*+-]<\/span><span class=\"pl-pds\">/<\/span><\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L427\" class=\"blob-num js-line-number\" data-line-number=\"427\"><\/td>\n        <td id=\"file-markdown-js-LC427\" class=\"blob-code blob-code-inner js-file-line\">          number_list <span class=\"pl-k\">=<\/span><span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-c1\">\\d<\/span><span class=\"pl-k\">+<\/span><span class=\"pl-cce\">\\.<\/span><span class=\"pl-pds\">/<\/span><\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L428\" class=\"blob-num js-line-number\" data-line-number=\"428\"><\/td>\n        <td id=\"file-markdown-js-LC428\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Capture leading indent as it matters for determining nested lists.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L429\" class=\"blob-num js-line-number\" data-line-number=\"429\"><\/td>\n        <td id=\"file-markdown-js-LC429\" class=\"blob-code blob-code-inner js-file-line\">          is_list_re <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">RegExp<\/span>( <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>^( {0,3})(<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> any_list <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>)[ <span class=\"pl-cce\">\\t<\/span>]+<span class=\"pl-pds\">&quot;<\/span><\/span> ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L430\" class=\"blob-num js-line-number\" data-line-number=\"430\"><\/td>\n        <td id=\"file-markdown-js-LC430\" class=\"blob-code blob-code-inner js-file-line\">          indent_re <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>(?: {0,3}<span class=\"pl-cce\">\\\\<\/span>t| {4})<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L431\" class=\"blob-num js-line-number\" data-line-number=\"431\"><\/td>\n        <td id=\"file-markdown-js-LC431\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L432\" class=\"blob-num js-line-number\" data-line-number=\"432\"><\/td>\n        <td id=\"file-markdown-js-LC432\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> TODO: Cache this regexp for certain depths.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L433\" class=\"blob-num js-line-number\" data-line-number=\"433\"><\/td>\n        <td id=\"file-markdown-js-LC433\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Create a regexp suitable for matching an li for a given stack depth<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L434\" class=\"blob-num js-line-number\" data-line-number=\"434\"><\/td>\n        <td id=\"file-markdown-js-LC434\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">regex_for_depth<\/span>( <span class=\"pl-smi\">depth<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L435\" class=\"blob-num js-line-number\" data-line-number=\"435\"><\/td>\n        <td id=\"file-markdown-js-LC435\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L436\" class=\"blob-num js-line-number\" data-line-number=\"436\"><\/td>\n        <td id=\"file-markdown-js-LC436\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">RegExp<\/span>(<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L437\" class=\"blob-num js-line-number\" data-line-number=\"437\"><\/td>\n        <td id=\"file-markdown-js-LC437\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> m[1] = indent, m[2] = list_type<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L438\" class=\"blob-num js-line-number\" data-line-number=\"438\"><\/td>\n        <td id=\"file-markdown-js-LC438\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>(?:^(<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> indent_re <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>{0,<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> depth <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>} {0,3})(<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> any_list <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>)<span class=\"pl-cce\">\\\\<\/span>s+)|<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L439\" class=\"blob-num js-line-number\" data-line-number=\"439\"><\/td>\n        <td id=\"file-markdown-js-LC439\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> m[3] = cont<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L440\" class=\"blob-num js-line-number\" data-line-number=\"440\"><\/td>\n        <td id=\"file-markdown-js-LC440\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>(^<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> indent_re <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>{0,<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> (depth<span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span>) <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>}[ ]{0,4})<span class=\"pl-pds\">&quot;<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L441\" class=\"blob-num js-line-number\" data-line-number=\"441\"><\/td>\n        <td id=\"file-markdown-js-LC441\" class=\"blob-code blob-code-inner js-file-line\">        );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L442\" class=\"blob-num js-line-number\" data-line-number=\"442\"><\/td>\n        <td id=\"file-markdown-js-LC442\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L443\" class=\"blob-num js-line-number\" data-line-number=\"443\"><\/td>\n        <td id=\"file-markdown-js-LC443\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">expand_tab<\/span>( <span class=\"pl-smi\">input<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L444\" class=\"blob-num js-line-number\" data-line-number=\"444\"><\/td>\n        <td id=\"file-markdown-js-LC444\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> <span class=\"pl-smi\">input<\/span>.<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span> <span class=\"pl-k\">{0,3}<\/span><span class=\"pl-c1\">\\t<\/span><span class=\"pl-pds\">/<\/span>g<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>    <span class=\"pl-pds\">&quot;<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L445\" class=\"blob-num js-line-number\" data-line-number=\"445\"><\/td>\n        <td id=\"file-markdown-js-LC445\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L446\" class=\"blob-num js-line-number\" data-line-number=\"446\"><\/td>\n        <td id=\"file-markdown-js-LC446\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L447\" class=\"blob-num js-line-number\" data-line-number=\"447\"><\/td>\n        <td id=\"file-markdown-js-LC447\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Add inline content `inline` to `li`. inline comes from processInline<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L448\" class=\"blob-num js-line-number\" data-line-number=\"448\"><\/td>\n        <td id=\"file-markdown-js-LC448\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> so is an array of content<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L449\" class=\"blob-num js-line-number\" data-line-number=\"449\"><\/td>\n        <td id=\"file-markdown-js-LC449\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">add<\/span>(<span class=\"pl-smi\">li<\/span>, <span class=\"pl-smi\">loose<\/span>, <span class=\"pl-smi\">inline<\/span>, <span class=\"pl-smi\">nl<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L450\" class=\"blob-num js-line-number\" data-line-number=\"450\"><\/td>\n        <td id=\"file-markdown-js-LC450\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( loose ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L451\" class=\"blob-num js-line-number\" data-line-number=\"451\"><\/td>\n        <td id=\"file-markdown-js-LC451\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">li<\/span>.<span class=\"pl-c1\">push<\/span>( [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>para<span class=\"pl-pds\">&quot;<\/span><\/span> ].<span class=\"pl-c1\">concat<\/span>(inline) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L452\" class=\"blob-num js-line-number\" data-line-number=\"452\"><\/td>\n        <td id=\"file-markdown-js-LC452\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">return<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L453\" class=\"blob-num js-line-number\" data-line-number=\"453\"><\/td>\n        <td id=\"file-markdown-js-LC453\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L454\" class=\"blob-num js-line-number\" data-line-number=\"454\"><\/td>\n        <td id=\"file-markdown-js-LC454\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Hmmm, should this be any block level element or just paras?<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L455\" class=\"blob-num js-line-number\" data-line-number=\"455\"><\/td>\n        <td id=\"file-markdown-js-LC455\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> add_to <span class=\"pl-k\">=<\/span> li[<span class=\"pl-smi\">li<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span>] <span class=\"pl-k\">instanceof<\/span> <span class=\"pl-c1\">Array<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> li[<span class=\"pl-smi\">li<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-c1\">1<\/span>][<span class=\"pl-c1\">0<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>para<span class=\"pl-pds\">&quot;<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L456\" class=\"blob-num js-line-number\" data-line-number=\"456\"><\/td>\n        <td id=\"file-markdown-js-LC456\" class=\"blob-code blob-code-inner js-file-line\">                   <span class=\"pl-k\">?<\/span> li[<span class=\"pl-smi\">li<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span>]<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L457\" class=\"blob-num js-line-number\" data-line-number=\"457\"><\/td>\n        <td id=\"file-markdown-js-LC457\" class=\"blob-code blob-code-inner js-file-line\">                   <span class=\"pl-k\">:<\/span> li;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L458\" class=\"blob-num js-line-number\" data-line-number=\"458\"><\/td>\n        <td id=\"file-markdown-js-LC458\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L459\" class=\"blob-num js-line-number\" data-line-number=\"459\"><\/td>\n        <td id=\"file-markdown-js-LC459\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> If there is already some content in this list, add the new line in<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L460\" class=\"blob-num js-line-number\" data-line-number=\"460\"><\/td>\n        <td id=\"file-markdown-js-LC460\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( nl <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-smi\">li<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&gt;<\/span> <span class=\"pl-c1\">1<\/span> ) <span class=\"pl-smi\">inline<\/span>.<span class=\"pl-c1\">unshift<\/span>(nl);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L461\" class=\"blob-num js-line-number\" data-line-number=\"461\"><\/td>\n        <td id=\"file-markdown-js-LC461\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L462\" class=\"blob-num js-line-number\" data-line-number=\"462\"><\/td>\n        <td id=\"file-markdown-js-LC462\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> i <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; i <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">inline<\/span>.<span class=\"pl-c1\">length<\/span>; i<span class=\"pl-k\">++<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L463\" class=\"blob-num js-line-number\" data-line-number=\"463\"><\/td>\n        <td id=\"file-markdown-js-LC463\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">var<\/span> what <span class=\"pl-k\">=<\/span> inline[i],<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L464\" class=\"blob-num js-line-number\" data-line-number=\"464\"><\/td>\n        <td id=\"file-markdown-js-LC464\" class=\"blob-code blob-code-inner js-file-line\">              is_str <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">typeof<\/span> what <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L465\" class=\"blob-num js-line-number\" data-line-number=\"465\"><\/td>\n        <td id=\"file-markdown-js-LC465\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">if<\/span> ( is_str <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-smi\">add_to<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&gt;<\/span> <span class=\"pl-c1\">1<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">typeof<\/span> add_to[<span class=\"pl-smi\">add_to<\/span>.<span class=\"pl-c1\">length<\/span><span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L466\" class=\"blob-num js-line-number\" data-line-number=\"466\"><\/td>\n        <td id=\"file-markdown-js-LC466\" class=\"blob-code blob-code-inner js-file-line\">            add_to[ <span class=\"pl-smi\">add_to<\/span>.<span class=\"pl-c1\">length<\/span><span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span> ] <span class=\"pl-k\">+=<\/span> what;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L467\" class=\"blob-num js-line-number\" data-line-number=\"467\"><\/td>\n        <td id=\"file-markdown-js-LC467\" class=\"blob-code blob-code-inner js-file-line\">          }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L468\" class=\"blob-num js-line-number\" data-line-number=\"468\"><\/td>\n        <td id=\"file-markdown-js-LC468\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L469\" class=\"blob-num js-line-number\" data-line-number=\"469\"><\/td>\n        <td id=\"file-markdown-js-LC469\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">add_to<\/span>.<span class=\"pl-c1\">push<\/span>( what );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L470\" class=\"blob-num js-line-number\" data-line-number=\"470\"><\/td>\n        <td id=\"file-markdown-js-LC470\" class=\"blob-code blob-code-inner js-file-line\">          }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L471\" class=\"blob-num js-line-number\" data-line-number=\"471\"><\/td>\n        <td id=\"file-markdown-js-LC471\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L472\" class=\"blob-num js-line-number\" data-line-number=\"472\"><\/td>\n        <td id=\"file-markdown-js-LC472\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L473\" class=\"blob-num js-line-number\" data-line-number=\"473\"><\/td>\n        <td id=\"file-markdown-js-LC473\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L474\" class=\"blob-num js-line-number\" data-line-number=\"474\"><\/td>\n        <td id=\"file-markdown-js-LC474\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> contained means have an indent greater than the current one. On<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L475\" class=\"blob-num js-line-number\" data-line-number=\"475\"><\/td>\n        <td id=\"file-markdown-js-LC475\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> *every* line in the block<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L476\" class=\"blob-num js-line-number\" data-line-number=\"476\"><\/td>\n        <td id=\"file-markdown-js-LC476\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">get_contained_blocks<\/span>( <span class=\"pl-smi\">depth<\/span>, <span class=\"pl-smi\">blocks<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L477\" class=\"blob-num js-line-number\" data-line-number=\"477\"><\/td>\n        <td id=\"file-markdown-js-LC477\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L478\" class=\"blob-num js-line-number\" data-line-number=\"478\"><\/td>\n        <td id=\"file-markdown-js-LC478\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> re <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">RegExp<\/span>( <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>^(<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> indent_re <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>{<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> depth <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>}.*?<span class=\"pl-cce\">\\\\<\/span>n?)*$<span class=\"pl-pds\">&quot;<\/span><\/span> ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L479\" class=\"blob-num js-line-number\" data-line-number=\"479\"><\/td>\n        <td id=\"file-markdown-js-LC479\" class=\"blob-code blob-code-inner js-file-line\">            replace <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">RegExp<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>^<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> indent_re <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>{<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> depth <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>}<span class=\"pl-pds\">&quot;<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>gm<span class=\"pl-pds\">&quot;<\/span><\/span>),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L480\" class=\"blob-num js-line-number\" data-line-number=\"480\"><\/td>\n        <td id=\"file-markdown-js-LC480\" class=\"blob-code blob-code-inner js-file-line\">            ret <span class=\"pl-k\">=<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L481\" class=\"blob-num js-line-number\" data-line-number=\"481\"><\/td>\n        <td id=\"file-markdown-js-LC481\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L482\" class=\"blob-num js-line-number\" data-line-number=\"482\"><\/td>\n        <td id=\"file-markdown-js-LC482\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">while<\/span> ( <span class=\"pl-smi\">blocks<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&gt;<\/span> <span class=\"pl-c1\">0<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L483\" class=\"blob-num js-line-number\" data-line-number=\"483\"><\/td>\n        <td id=\"file-markdown-js-LC483\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">re<\/span>.<span class=\"pl-c1\">exec<\/span>( blocks[<span class=\"pl-c1\">0<\/span>] ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L484\" class=\"blob-num js-line-number\" data-line-number=\"484\"><\/td>\n        <td id=\"file-markdown-js-LC484\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var<\/span> b <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">blocks<\/span>.<span class=\"pl-c1\">shift<\/span>(),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L485\" class=\"blob-num js-line-number\" data-line-number=\"485\"><\/td>\n        <td id=\"file-markdown-js-LC485\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Now remove that indent<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L486\" class=\"blob-num js-line-number\" data-line-number=\"486\"><\/td>\n        <td id=\"file-markdown-js-LC486\" class=\"blob-code blob-code-inner js-file-line\">                x <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">b<\/span>.<span class=\"pl-c1\">replace<\/span>( replace, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L487\" class=\"blob-num js-line-number\" data-line-number=\"487\"><\/td>\n        <td id=\"file-markdown-js-LC487\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L488\" class=\"blob-num js-line-number\" data-line-number=\"488\"><\/td>\n        <td id=\"file-markdown-js-LC488\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">ret<\/span>.<span class=\"pl-c1\">push<\/span>( <span class=\"pl-en\">mk_block<\/span>( x, <span class=\"pl-smi\">b<\/span>.<span class=\"pl-smi\">trailing<\/span>, <span class=\"pl-smi\">b<\/span>.<span class=\"pl-smi\">lineNumber<\/span> ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L489\" class=\"blob-num js-line-number\" data-line-number=\"489\"><\/td>\n        <td id=\"file-markdown-js-LC489\" class=\"blob-code blob-code-inner js-file-line\">          }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L490\" class=\"blob-num js-line-number\" data-line-number=\"490\"><\/td>\n        <td id=\"file-markdown-js-LC490\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L491\" class=\"blob-num js-line-number\" data-line-number=\"491\"><\/td>\n        <td id=\"file-markdown-js-LC491\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L492\" class=\"blob-num js-line-number\" data-line-number=\"492\"><\/td>\n        <td id=\"file-markdown-js-LC492\" class=\"blob-code blob-code-inner js-file-line\">          }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L493\" class=\"blob-num js-line-number\" data-line-number=\"493\"><\/td>\n        <td id=\"file-markdown-js-LC493\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L494\" class=\"blob-num js-line-number\" data-line-number=\"494\"><\/td>\n        <td id=\"file-markdown-js-LC494\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> ret;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L495\" class=\"blob-num js-line-number\" data-line-number=\"495\"><\/td>\n        <td id=\"file-markdown-js-LC495\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L496\" class=\"blob-num js-line-number\" data-line-number=\"496\"><\/td>\n        <td id=\"file-markdown-js-LC496\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L497\" class=\"blob-num js-line-number\" data-line-number=\"497\"><\/td>\n        <td id=\"file-markdown-js-LC497\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> passed to stack.forEach to turn list items up the stack into paras<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L498\" class=\"blob-num js-line-number\" data-line-number=\"498\"><\/td>\n        <td id=\"file-markdown-js-LC498\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">paragraphify<\/span>(<span class=\"pl-smi\">s<\/span>, <span class=\"pl-smi\">i<\/span>, <span class=\"pl-smi\">stack<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L499\" class=\"blob-num js-line-number\" data-line-number=\"499\"><\/td>\n        <td id=\"file-markdown-js-LC499\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> list <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">s<\/span>.<span class=\"pl-smi\">list<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L500\" class=\"blob-num js-line-number\" data-line-number=\"500\"><\/td>\n        <td id=\"file-markdown-js-LC500\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> last_li <span class=\"pl-k\">=<\/span> list[<span class=\"pl-smi\">list<\/span>.<span class=\"pl-c1\">length<\/span><span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L501\" class=\"blob-num js-line-number\" data-line-number=\"501\"><\/td>\n        <td id=\"file-markdown-js-LC501\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L502\" class=\"blob-num js-line-number\" data-line-number=\"502\"><\/td>\n        <td id=\"file-markdown-js-LC502\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( last_li[<span class=\"pl-c1\">1<\/span>] <span class=\"pl-k\">instanceof<\/span> <span class=\"pl-c1\">Array<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> last_li[<span class=\"pl-c1\">1<\/span>][<span class=\"pl-c1\">0<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>para<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L503\" class=\"blob-num js-line-number\" data-line-number=\"503\"><\/td>\n        <td id=\"file-markdown-js-LC503\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">return<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L504\" class=\"blob-num js-line-number\" data-line-number=\"504\"><\/td>\n        <td id=\"file-markdown-js-LC504\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L505\" class=\"blob-num js-line-number\" data-line-number=\"505\"><\/td>\n        <td id=\"file-markdown-js-LC505\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( i <span class=\"pl-k\">+<\/span> <span class=\"pl-c1\">1<\/span> <span class=\"pl-k\">==<\/span> <span class=\"pl-smi\">stack<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L506\" class=\"blob-num js-line-number\" data-line-number=\"506\"><\/td>\n        <td id=\"file-markdown-js-LC506\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Last stack frame<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L507\" class=\"blob-num js-line-number\" data-line-number=\"507\"><\/td>\n        <td id=\"file-markdown-js-LC507\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Keep the same array, but replace the contents<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L508\" class=\"blob-num js-line-number\" data-line-number=\"508\"><\/td>\n        <td id=\"file-markdown-js-LC508\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">last_li<\/span>.<span class=\"pl-c1\">push<\/span>( [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>para<span class=\"pl-pds\">&quot;<\/span><\/span>].<span class=\"pl-c1\">concat<\/span>( <span class=\"pl-smi\">last_li<\/span>.<span class=\"pl-c1\">splice<\/span>(<span class=\"pl-c1\">1<\/span>, <span class=\"pl-smi\">last_li<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-c1\">1<\/span>) ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L509\" class=\"blob-num js-line-number\" data-line-number=\"509\"><\/td>\n        <td id=\"file-markdown-js-LC509\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L510\" class=\"blob-num js-line-number\" data-line-number=\"510\"><\/td>\n        <td id=\"file-markdown-js-LC510\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L511\" class=\"blob-num js-line-number\" data-line-number=\"511\"><\/td>\n        <td id=\"file-markdown-js-LC511\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">var<\/span> sublist <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">last_li<\/span>.<span class=\"pl-c1\">pop<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L512\" class=\"blob-num js-line-number\" data-line-number=\"512\"><\/td>\n        <td id=\"file-markdown-js-LC512\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">last_li<\/span>.<span class=\"pl-c1\">push<\/span>( [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>para<span class=\"pl-pds\">&quot;<\/span><\/span>].<span class=\"pl-c1\">concat<\/span>( <span class=\"pl-smi\">last_li<\/span>.<span class=\"pl-c1\">splice<\/span>(<span class=\"pl-c1\">1<\/span>, <span class=\"pl-smi\">last_li<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-c1\">1<\/span>) ), sublist );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L513\" class=\"blob-num js-line-number\" data-line-number=\"513\"><\/td>\n        <td id=\"file-markdown-js-LC513\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L514\" class=\"blob-num js-line-number\" data-line-number=\"514\"><\/td>\n        <td id=\"file-markdown-js-LC514\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L515\" class=\"blob-num js-line-number\" data-line-number=\"515\"><\/td>\n        <td id=\"file-markdown-js-LC515\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L516\" class=\"blob-num js-line-number\" data-line-number=\"516\"><\/td>\n        <td id=\"file-markdown-js-LC516\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> The matcher function<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L517\" class=\"blob-num js-line-number\" data-line-number=\"517\"><\/td>\n        <td id=\"file-markdown-js-LC517\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> <span class=\"pl-k\">function<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L518\" class=\"blob-num js-line-number\" data-line-number=\"518\"><\/td>\n        <td id=\"file-markdown-js-LC518\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>( is_list_re );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L519\" class=\"blob-num js-line-number\" data-line-number=\"519\"><\/td>\n        <td id=\"file-markdown-js-LC519\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>m ) <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L520\" class=\"blob-num js-line-number\" data-line-number=\"520\"><\/td>\n        <td id=\"file-markdown-js-LC520\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L521\" class=\"blob-num js-line-number\" data-line-number=\"521\"><\/td>\n        <td id=\"file-markdown-js-LC521\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">make_list<\/span>( <span class=\"pl-smi\">m<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L522\" class=\"blob-num js-line-number\" data-line-number=\"522\"><\/td>\n        <td id=\"file-markdown-js-LC522\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">var<\/span> list <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">bullet_list<\/span>.<span class=\"pl-c1\">exec<\/span>( m[<span class=\"pl-c1\">2<\/span>] )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L523\" class=\"blob-num js-line-number\" data-line-number=\"523\"><\/td>\n        <td id=\"file-markdown-js-LC523\" class=\"blob-code blob-code-inner js-file-line\">                   <span class=\"pl-k\">?<\/span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>bulletlist<span class=\"pl-pds\">&quot;<\/span><\/span>]<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L524\" class=\"blob-num js-line-number\" data-line-number=\"524\"><\/td>\n        <td id=\"file-markdown-js-LC524\" class=\"blob-code blob-code-inner js-file-line\">                   <span class=\"pl-k\">:<\/span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>numberlist<span class=\"pl-pds\">&quot;<\/span><\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L525\" class=\"blob-num js-line-number\" data-line-number=\"525\"><\/td>\n        <td id=\"file-markdown-js-LC525\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L526\" class=\"blob-num js-line-number\" data-line-number=\"526\"><\/td>\n        <td id=\"file-markdown-js-LC526\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">stack<\/span>.<span class=\"pl-c1\">push<\/span>( { list<span class=\"pl-k\">:<\/span> list, indent<span class=\"pl-k\">:<\/span> m[<span class=\"pl-c1\">1<\/span>] } );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L527\" class=\"blob-num js-line-number\" data-line-number=\"527\"><\/td>\n        <td id=\"file-markdown-js-LC527\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">return<\/span> list;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L528\" class=\"blob-num js-line-number\" data-line-number=\"528\"><\/td>\n        <td id=\"file-markdown-js-LC528\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L529\" class=\"blob-num js-line-number\" data-line-number=\"529\"><\/td>\n        <td id=\"file-markdown-js-LC529\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L530\" class=\"blob-num js-line-number\" data-line-number=\"530\"><\/td>\n        <td id=\"file-markdown-js-LC530\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L531\" class=\"blob-num js-line-number\" data-line-number=\"531\"><\/td>\n        <td id=\"file-markdown-js-LC531\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> stack <span class=\"pl-k\">=<\/span> [], <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Stack of lists for nesting.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L532\" class=\"blob-num js-line-number\" data-line-number=\"532\"><\/td>\n        <td id=\"file-markdown-js-LC532\" class=\"blob-code blob-code-inner js-file-line\">            list <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">make_list<\/span>( m ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L533\" class=\"blob-num js-line-number\" data-line-number=\"533\"><\/td>\n        <td id=\"file-markdown-js-LC533\" class=\"blob-code blob-code-inner js-file-line\">            last_li,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L534\" class=\"blob-num js-line-number\" data-line-number=\"534\"><\/td>\n        <td id=\"file-markdown-js-LC534\" class=\"blob-code blob-code-inner js-file-line\">            loose <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">false<\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L535\" class=\"blob-num js-line-number\" data-line-number=\"535\"><\/td>\n        <td id=\"file-markdown-js-LC535\" class=\"blob-code blob-code-inner js-file-line\">            ret <span class=\"pl-k\">=<\/span> [ stack[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-smi\">list<\/span> ],<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L536\" class=\"blob-num js-line-number\" data-line-number=\"536\"><\/td>\n        <td id=\"file-markdown-js-LC536\" class=\"blob-code blob-code-inner js-file-line\">            i;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L537\" class=\"blob-num js-line-number\" data-line-number=\"537\"><\/td>\n        <td id=\"file-markdown-js-LC537\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L538\" class=\"blob-num js-line-number\" data-line-number=\"538\"><\/td>\n        <td id=\"file-markdown-js-LC538\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Loop to search over block looking for inner block elements and loose lists<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L539\" class=\"blob-num js-line-number\" data-line-number=\"539\"><\/td>\n        <td id=\"file-markdown-js-LC539\" class=\"blob-code blob-code-inner js-file-line\">        loose_search<span class=\"pl-k\">:<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L540\" class=\"blob-num js-line-number\" data-line-number=\"540\"><\/td>\n        <td id=\"file-markdown-js-LC540\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">while<\/span> ( <span class=\"pl-c1\">true<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L541\" class=\"blob-num js-line-number\" data-line-number=\"541\"><\/td>\n        <td id=\"file-markdown-js-LC541\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Split into lines preserving new lines at end of line<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L542\" class=\"blob-num js-line-number\" data-line-number=\"542\"><\/td>\n        <td id=\"file-markdown-js-LC542\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">var<\/span> lines <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">split<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>(?=<span class=\"pl-c1\">\\n<\/span>)<span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L543\" class=\"blob-num js-line-number\" data-line-number=\"543\"><\/td>\n        <td id=\"file-markdown-js-LC543\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L544\" class=\"blob-num js-line-number\" data-line-number=\"544\"><\/td>\n        <td id=\"file-markdown-js-LC544\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> We have to grab all lines for a li and call processInline on them<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L545\" class=\"blob-num js-line-number\" data-line-number=\"545\"><\/td>\n        <td id=\"file-markdown-js-LC545\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> once as there are some inline things that can span lines.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L546\" class=\"blob-num js-line-number\" data-line-number=\"546\"><\/td>\n        <td id=\"file-markdown-js-LC546\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">var<\/span> li_accumulate <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L547\" class=\"blob-num js-line-number\" data-line-number=\"547\"><\/td>\n        <td id=\"file-markdown-js-LC547\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L548\" class=\"blob-num js-line-number\" data-line-number=\"548\"><\/td>\n        <td id=\"file-markdown-js-LC548\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Loop over the lines in this block looking for tight lists.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L549\" class=\"blob-num js-line-number\" data-line-number=\"549\"><\/td>\n        <td id=\"file-markdown-js-LC549\" class=\"blob-code blob-code-inner js-file-line\">          tight_search<span class=\"pl-k\">:<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L550\" class=\"blob-num js-line-number\" data-line-number=\"550\"><\/td>\n        <td id=\"file-markdown-js-LC550\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> line_no <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; line_no <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">lines<\/span>.<span class=\"pl-c1\">length<\/span>; line_no<span class=\"pl-k\">++<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L551\" class=\"blob-num js-line-number\" data-line-number=\"551\"><\/td>\n        <td id=\"file-markdown-js-LC551\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var<\/span> nl <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L552\" class=\"blob-num js-line-number\" data-line-number=\"552\"><\/td>\n        <td id=\"file-markdown-js-LC552\" class=\"blob-code blob-code-inner js-file-line\">                l <span class=\"pl-k\">=<\/span> lines[line_no].<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"><span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-c1\">\\n<\/span><span class=\"pl-pds\">/<\/span><\/span>, <span class=\"pl-k\">function<\/span>(<span class=\"pl-smi\">n<\/span>) { nl <span class=\"pl-k\">=<\/span> n; <span class=\"pl-k\">return<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>; });<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L553\" class=\"blob-num js-line-number\" data-line-number=\"553\"><\/td>\n        <td id=\"file-markdown-js-LC553\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L554\" class=\"blob-num js-line-number\" data-line-number=\"554\"><\/td>\n        <td id=\"file-markdown-js-LC554\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> TODO: really should cache this<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L555\" class=\"blob-num js-line-number\" data-line-number=\"555\"><\/td>\n        <td id=\"file-markdown-js-LC555\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var<\/span> line_re <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">regex_for_depth<\/span>( <span class=\"pl-smi\">stack<\/span>.<span class=\"pl-c1\">length<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L556\" class=\"blob-num js-line-number\" data-line-number=\"556\"><\/td>\n        <td id=\"file-markdown-js-LC556\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L557\" class=\"blob-num js-line-number\" data-line-number=\"557\"><\/td>\n        <td id=\"file-markdown-js-LC557\" class=\"blob-code blob-code-inner js-file-line\">            m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">l<\/span>.<span class=\"pl-c1\">match<\/span>( line_re );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L558\" class=\"blob-num js-line-number\" data-line-number=\"558\"><\/td>\n        <td id=\"file-markdown-js-LC558\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>print( &quot;line:&quot;, uneval(l), &quot;\\nline match:&quot;, uneval(m) );<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L559\" class=\"blob-num js-line-number\" data-line-number=\"559\"><\/td>\n        <td id=\"file-markdown-js-LC559\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L560\" class=\"blob-num js-line-number\" data-line-number=\"560\"><\/td>\n        <td id=\"file-markdown-js-LC560\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> We have a list item<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L561\" class=\"blob-num js-line-number\" data-line-number=\"561\"><\/td>\n        <td id=\"file-markdown-js-LC561\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">1<\/span>] <span class=\"pl-k\">!==<\/span> <span class=\"pl-c1\">undefined<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L562\" class=\"blob-num js-line-number\" data-line-number=\"562\"><\/td>\n        <td id=\"file-markdown-js-LC562\" class=\"blob-code blob-code-inner js-file-line\">              <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Process the previous list item, if any<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L563\" class=\"blob-num js-line-number\" data-line-number=\"563\"><\/td>\n        <td id=\"file-markdown-js-LC563\" class=\"blob-code blob-code-inner js-file-line\">              <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">li_accumulate<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L564\" class=\"blob-num js-line-number\" data-line-number=\"564\"><\/td>\n        <td id=\"file-markdown-js-LC564\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-en\">add<\/span>( last_li, loose, <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processInline<\/span>( li_accumulate ), nl );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L565\" class=\"blob-num js-line-number\" data-line-number=\"565\"><\/td>\n        <td id=\"file-markdown-js-LC565\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Loose mode will have been dealt with. Reset it<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L566\" class=\"blob-num js-line-number\" data-line-number=\"566\"><\/td>\n        <td id=\"file-markdown-js-LC566\" class=\"blob-code blob-code-inner js-file-line\">                loose <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">false<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L567\" class=\"blob-num js-line-number\" data-line-number=\"567\"><\/td>\n        <td id=\"file-markdown-js-LC567\" class=\"blob-code blob-code-inner js-file-line\">                li_accumulate <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L568\" class=\"blob-num js-line-number\" data-line-number=\"568\"><\/td>\n        <td id=\"file-markdown-js-LC568\" class=\"blob-code blob-code-inner js-file-line\">              }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L569\" class=\"blob-num js-line-number\" data-line-number=\"569\"><\/td>\n        <td id=\"file-markdown-js-LC569\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L570\" class=\"blob-num js-line-number\" data-line-number=\"570\"><\/td>\n        <td id=\"file-markdown-js-LC570\" class=\"blob-code blob-code-inner js-file-line\">              m[<span class=\"pl-c1\">1<\/span>] <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">expand_tab<\/span>( m[<span class=\"pl-c1\">1<\/span>] );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L571\" class=\"blob-num js-line-number\" data-line-number=\"571\"><\/td>\n        <td id=\"file-markdown-js-LC571\" class=\"blob-code blob-code-inner js-file-line\">              <span class=\"pl-k\">var<\/span> wanted_depth <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">Math<\/span>.<span class=\"pl-c1\">floor<\/span>(m[<span class=\"pl-c1\">1<\/span>].<span class=\"pl-c1\">length<\/span><span class=\"pl-k\">/<\/span><span class=\"pl-c1\">4<\/span>)<span class=\"pl-k\">+<\/span><span class=\"pl-c1\">1<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L572\" class=\"blob-num js-line-number\" data-line-number=\"572\"><\/td>\n        <td id=\"file-markdown-js-LC572\" class=\"blob-code blob-code-inner js-file-line\">              <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>print( &quot;want:&quot;, wanted_depth, &quot;stack:&quot;, stack.length);<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L573\" class=\"blob-num js-line-number\" data-line-number=\"573\"><\/td>\n        <td id=\"file-markdown-js-LC573\" class=\"blob-code blob-code-inner js-file-line\">              <span class=\"pl-k\">if<\/span> ( wanted_depth <span class=\"pl-k\">&gt;<\/span> <span class=\"pl-smi\">stack<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L574\" class=\"blob-num js-line-number\" data-line-number=\"574\"><\/td>\n        <td id=\"file-markdown-js-LC574\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Deep enough for a nested list outright<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L575\" class=\"blob-num js-line-number\" data-line-number=\"575\"><\/td>\n        <td id=\"file-markdown-js-LC575\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>print ( &quot;new nested list&quot; );<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L576\" class=\"blob-num js-line-number\" data-line-number=\"576\"><\/td>\n        <td id=\"file-markdown-js-LC576\" class=\"blob-code blob-code-inner js-file-line\">                list <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">make_list<\/span>( m );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L577\" class=\"blob-num js-line-number\" data-line-number=\"577\"><\/td>\n        <td id=\"file-markdown-js-LC577\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-smi\">last_li<\/span>.<span class=\"pl-c1\">push<\/span>( list );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L578\" class=\"blob-num js-line-number\" data-line-number=\"578\"><\/td>\n        <td id=\"file-markdown-js-LC578\" class=\"blob-code blob-code-inner js-file-line\">                last_li <span class=\"pl-k\">=<\/span> list[<span class=\"pl-c1\">1<\/span>] <span class=\"pl-k\">=<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>listitem<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L579\" class=\"blob-num js-line-number\" data-line-number=\"579\"><\/td>\n        <td id=\"file-markdown-js-LC579\" class=\"blob-code blob-code-inner js-file-line\">              }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L580\" class=\"blob-num js-line-number\" data-line-number=\"580\"><\/td>\n        <td id=\"file-markdown-js-LC580\" class=\"blob-code blob-code-inner js-file-line\">              <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L581\" class=\"blob-num js-line-number\" data-line-number=\"581\"><\/td>\n        <td id=\"file-markdown-js-LC581\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> We aren&#39;t deep enough to be strictly a new level. This is<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L582\" class=\"blob-num js-line-number\" data-line-number=\"582\"><\/td>\n        <td id=\"file-markdown-js-LC582\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> where Md.pl goes nuts. If the indent matches a level in the<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L583\" class=\"blob-num js-line-number\" data-line-number=\"583\"><\/td>\n        <td id=\"file-markdown-js-LC583\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> stack, put it there, else put it one deeper then the<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L584\" class=\"blob-num js-line-number\" data-line-number=\"584\"><\/td>\n        <td id=\"file-markdown-js-LC584\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> wanted_depth deserves.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L585\" class=\"blob-num js-line-number\" data-line-number=\"585\"><\/td>\n        <td id=\"file-markdown-js-LC585\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-k\">var<\/span> found <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">false<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L586\" class=\"blob-num js-line-number\" data-line-number=\"586\"><\/td>\n        <td id=\"file-markdown-js-LC586\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-k\">for<\/span> ( i <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; i <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">stack<\/span>.<span class=\"pl-c1\">length<\/span>; i<span class=\"pl-k\">++<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L587\" class=\"blob-num js-line-number\" data-line-number=\"587\"><\/td>\n        <td id=\"file-markdown-js-LC587\" class=\"blob-code blob-code-inner js-file-line\">                  <span class=\"pl-k\">if<\/span> ( stack[ i ].<span class=\"pl-smi\">indent<\/span> <span class=\"pl-k\">!=<\/span> m[<span class=\"pl-c1\">1<\/span>] ) <span class=\"pl-k\">continue<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L588\" class=\"blob-num js-line-number\" data-line-number=\"588\"><\/td>\n        <td id=\"file-markdown-js-LC588\" class=\"blob-code blob-code-inner js-file-line\">                  list <span class=\"pl-k\">=<\/span> stack[ i ].<span class=\"pl-smi\">list<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L589\" class=\"blob-num js-line-number\" data-line-number=\"589\"><\/td>\n        <td id=\"file-markdown-js-LC589\" class=\"blob-code blob-code-inner js-file-line\">                  <span class=\"pl-smi\">stack<\/span>.<span class=\"pl-c1\">splice<\/span>( i<span class=\"pl-k\">+<\/span><span class=\"pl-c1\">1<\/span>, <span class=\"pl-smi\">stack<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> (i<span class=\"pl-k\">+<\/span><span class=\"pl-c1\">1<\/span>) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L590\" class=\"blob-num js-line-number\" data-line-number=\"590\"><\/td>\n        <td id=\"file-markdown-js-LC590\" class=\"blob-code blob-code-inner js-file-line\">                  found <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">true<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L591\" class=\"blob-num js-line-number\" data-line-number=\"591\"><\/td>\n        <td id=\"file-markdown-js-LC591\" class=\"blob-code blob-code-inner js-file-line\">                  <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L592\" class=\"blob-num js-line-number\" data-line-number=\"592\"><\/td>\n        <td id=\"file-markdown-js-LC592\" class=\"blob-code blob-code-inner js-file-line\">                }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L593\" class=\"blob-num js-line-number\" data-line-number=\"593\"><\/td>\n        <td id=\"file-markdown-js-LC593\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L594\" class=\"blob-num js-line-number\" data-line-number=\"594\"><\/td>\n        <td id=\"file-markdown-js-LC594\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-k\">if<\/span> (<span class=\"pl-k\">!<\/span>found) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L595\" class=\"blob-num js-line-number\" data-line-number=\"595\"><\/td>\n        <td id=\"file-markdown-js-LC595\" class=\"blob-code blob-code-inner js-file-line\">                  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>print(&quot;not found. l:&quot;, uneval(l));<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L596\" class=\"blob-num js-line-number\" data-line-number=\"596\"><\/td>\n        <td id=\"file-markdown-js-LC596\" class=\"blob-code blob-code-inner js-file-line\">                  wanted_depth<span class=\"pl-k\">++<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L597\" class=\"blob-num js-line-number\" data-line-number=\"597\"><\/td>\n        <td id=\"file-markdown-js-LC597\" class=\"blob-code blob-code-inner js-file-line\">                  <span class=\"pl-k\">if<\/span> ( wanted_depth <span class=\"pl-k\">&lt;=<\/span> <span class=\"pl-smi\">stack<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L598\" class=\"blob-num js-line-number\" data-line-number=\"598\"><\/td>\n        <td id=\"file-markdown-js-LC598\" class=\"blob-code blob-code-inner js-file-line\">                    <span class=\"pl-smi\">stack<\/span>.<span class=\"pl-c1\">splice<\/span>(wanted_depth, <span class=\"pl-smi\">stack<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> wanted_depth);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L599\" class=\"blob-num js-line-number\" data-line-number=\"599\"><\/td>\n        <td id=\"file-markdown-js-LC599\" class=\"blob-code blob-code-inner js-file-line\">                    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>print(&quot;Desired depth now&quot;, wanted_depth, &quot;stack:&quot;, stack.length);<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L600\" class=\"blob-num js-line-number\" data-line-number=\"600\"><\/td>\n        <td id=\"file-markdown-js-LC600\" class=\"blob-code blob-code-inner js-file-line\">                    list <span class=\"pl-k\">=<\/span> stack[wanted_depth<span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span>].<span class=\"pl-smi\">list<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L601\" class=\"blob-num js-line-number\" data-line-number=\"601\"><\/td>\n        <td id=\"file-markdown-js-LC601\" class=\"blob-code blob-code-inner js-file-line\">                    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>print(&quot;list:&quot;, uneval(list) );<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L602\" class=\"blob-num js-line-number\" data-line-number=\"602\"><\/td>\n        <td id=\"file-markdown-js-LC602\" class=\"blob-code blob-code-inner js-file-line\">                  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L603\" class=\"blob-num js-line-number\" data-line-number=\"603\"><\/td>\n        <td id=\"file-markdown-js-LC603\" class=\"blob-code blob-code-inner js-file-line\">                  <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L604\" class=\"blob-num js-line-number\" data-line-number=\"604\"><\/td>\n        <td id=\"file-markdown-js-LC604\" class=\"blob-code blob-code-inner js-file-line\">                    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>print (&quot;made new stack for messy indent&quot;);<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L605\" class=\"blob-num js-line-number\" data-line-number=\"605\"><\/td>\n        <td id=\"file-markdown-js-LC605\" class=\"blob-code blob-code-inner js-file-line\">                    list <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">make_list<\/span>(m);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L606\" class=\"blob-num js-line-number\" data-line-number=\"606\"><\/td>\n        <td id=\"file-markdown-js-LC606\" class=\"blob-code blob-code-inner js-file-line\">                    <span class=\"pl-smi\">last_li<\/span>.<span class=\"pl-c1\">push<\/span>(list);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L607\" class=\"blob-num js-line-number\" data-line-number=\"607\"><\/td>\n        <td id=\"file-markdown-js-LC607\" class=\"blob-code blob-code-inner js-file-line\">                  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L608\" class=\"blob-num js-line-number\" data-line-number=\"608\"><\/td>\n        <td id=\"file-markdown-js-LC608\" class=\"blob-code blob-code-inner js-file-line\">                }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L609\" class=\"blob-num js-line-number\" data-line-number=\"609\"><\/td>\n        <td id=\"file-markdown-js-LC609\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L610\" class=\"blob-num js-line-number\" data-line-number=\"610\"><\/td>\n        <td id=\"file-markdown-js-LC610\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>print( uneval(list), &quot;last&quot;, list === stack[stack.length-1].list );<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L611\" class=\"blob-num js-line-number\" data-line-number=\"611\"><\/td>\n        <td id=\"file-markdown-js-LC611\" class=\"blob-code blob-code-inner js-file-line\">                last_li <span class=\"pl-k\">=<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>listitem<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L612\" class=\"blob-num js-line-number\" data-line-number=\"612\"><\/td>\n        <td id=\"file-markdown-js-LC612\" class=\"blob-code blob-code-inner js-file-line\">                <span class=\"pl-smi\">list<\/span>.<span class=\"pl-c1\">push<\/span>(last_li);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L613\" class=\"blob-num js-line-number\" data-line-number=\"613\"><\/td>\n        <td id=\"file-markdown-js-LC613\" class=\"blob-code blob-code-inner js-file-line\">              } <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> end depth of shenegains<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L614\" class=\"blob-num js-line-number\" data-line-number=\"614\"><\/td>\n        <td id=\"file-markdown-js-LC614\" class=\"blob-code blob-code-inner js-file-line\">              nl <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L615\" class=\"blob-num js-line-number\" data-line-number=\"615\"><\/td>\n        <td id=\"file-markdown-js-LC615\" class=\"blob-code blob-code-inner js-file-line\">            }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L616\" class=\"blob-num js-line-number\" data-line-number=\"616\"><\/td>\n        <td id=\"file-markdown-js-LC616\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L617\" class=\"blob-num js-line-number\" data-line-number=\"617\"><\/td>\n        <td id=\"file-markdown-js-LC617\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Add content<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L618\" class=\"blob-num js-line-number\" data-line-number=\"618\"><\/td>\n        <td id=\"file-markdown-js-LC618\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">l<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&gt;<\/span> m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L619\" class=\"blob-num js-line-number\" data-line-number=\"619\"><\/td>\n        <td id=\"file-markdown-js-LC619\" class=\"blob-code blob-code-inner js-file-line\">              li_accumulate <span class=\"pl-k\">+=<\/span> nl <span class=\"pl-k\">+<\/span> <span class=\"pl-smi\">l<\/span>.<span class=\"pl-c1\">substr<\/span>( m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L620\" class=\"blob-num js-line-number\" data-line-number=\"620\"><\/td>\n        <td id=\"file-markdown-js-LC620\" class=\"blob-code blob-code-inner js-file-line\">            }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L621\" class=\"blob-num js-line-number\" data-line-number=\"621\"><\/td>\n        <td id=\"file-markdown-js-LC621\" class=\"blob-code blob-code-inner js-file-line\">          } <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> tight_search<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L622\" class=\"blob-num js-line-number\" data-line-number=\"622\"><\/td>\n        <td id=\"file-markdown-js-LC622\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L623\" class=\"blob-num js-line-number\" data-line-number=\"623\"><\/td>\n        <td id=\"file-markdown-js-LC623\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">li_accumulate<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L624\" class=\"blob-num js-line-number\" data-line-number=\"624\"><\/td>\n        <td id=\"file-markdown-js-LC624\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-en\">add<\/span>( last_li, loose, <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processInline<\/span>( li_accumulate ), nl );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L625\" class=\"blob-num js-line-number\" data-line-number=\"625\"><\/td>\n        <td id=\"file-markdown-js-LC625\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Loose mode will have been dealt with. Reset it<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L626\" class=\"blob-num js-line-number\" data-line-number=\"626\"><\/td>\n        <td id=\"file-markdown-js-LC626\" class=\"blob-code blob-code-inner js-file-line\">            loose <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">false<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L627\" class=\"blob-num js-line-number\" data-line-number=\"627\"><\/td>\n        <td id=\"file-markdown-js-LC627\" class=\"blob-code blob-code-inner js-file-line\">            li_accumulate <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L628\" class=\"blob-num js-line-number\" data-line-number=\"628\"><\/td>\n        <td id=\"file-markdown-js-LC628\" class=\"blob-code blob-code-inner js-file-line\">          }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L629\" class=\"blob-num js-line-number\" data-line-number=\"629\"><\/td>\n        <td id=\"file-markdown-js-LC629\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L630\" class=\"blob-num js-line-number\" data-line-number=\"630\"><\/td>\n        <td id=\"file-markdown-js-LC630\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Look at the next block - we might have a loose list. Or an extra<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L631\" class=\"blob-num js-line-number\" data-line-number=\"631\"><\/td>\n        <td id=\"file-markdown-js-LC631\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> paragraph for the current li<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L632\" class=\"blob-num js-line-number\" data-line-number=\"632\"><\/td>\n        <td id=\"file-markdown-js-LC632\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">var<\/span> contained <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">get_contained_blocks<\/span>( <span class=\"pl-smi\">stack<\/span>.<span class=\"pl-c1\">length<\/span>, next );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L633\" class=\"blob-num js-line-number\" data-line-number=\"633\"><\/td>\n        <td id=\"file-markdown-js-LC633\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L634\" class=\"blob-num js-line-number\" data-line-number=\"634\"><\/td>\n        <td id=\"file-markdown-js-LC634\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Deal with code blocks or properly nested lists<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L635\" class=\"blob-num js-line-number\" data-line-number=\"635\"><\/td>\n        <td id=\"file-markdown-js-LC635\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">contained<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&gt;<\/span> <span class=\"pl-c1\">0<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L636\" class=\"blob-num js-line-number\" data-line-number=\"636\"><\/td>\n        <td id=\"file-markdown-js-LC636\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Make sure all listitems up the stack are paragraphs<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L637\" class=\"blob-num js-line-number\" data-line-number=\"637\"><\/td>\n        <td id=\"file-markdown-js-LC637\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-en\">forEach<\/span>( stack, paragraphify, <span class=\"pl-c1\">this<\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L638\" class=\"blob-num js-line-number\" data-line-number=\"638\"><\/td>\n        <td id=\"file-markdown-js-LC638\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L639\" class=\"blob-num js-line-number\" data-line-number=\"639\"><\/td>\n        <td id=\"file-markdown-js-LC639\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">last_li<\/span>.<span class=\"pl-smi\">push<\/span>.<span class=\"pl-c1\">apply<\/span>( last_li, <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">toTree<\/span>( contained, [] ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L640\" class=\"blob-num js-line-number\" data-line-number=\"640\"><\/td>\n        <td id=\"file-markdown-js-LC640\" class=\"blob-code blob-code-inner js-file-line\">          }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L641\" class=\"blob-num js-line-number\" data-line-number=\"641\"><\/td>\n        <td id=\"file-markdown-js-LC641\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L642\" class=\"blob-num js-line-number\" data-line-number=\"642\"><\/td>\n        <td id=\"file-markdown-js-LC642\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">var<\/span> next_block <span class=\"pl-k\">=<\/span> next[<span class=\"pl-c1\">0<\/span>] <span class=\"pl-k\">&amp;&amp;<\/span> next[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">valueOf<\/span>() <span class=\"pl-k\">||<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L643\" class=\"blob-num js-line-number\" data-line-number=\"643\"><\/td>\n        <td id=\"file-markdown-js-LC643\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L644\" class=\"blob-num js-line-number\" data-line-number=\"644\"><\/td>\n        <td id=\"file-markdown-js-LC644\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">next_block<\/span>.<span class=\"pl-c1\">match<\/span>(is_list_re) <span class=\"pl-k\">||<\/span> <span class=\"pl-smi\">next_block<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span> <span class=\"pl-pds\">/<\/span><\/span> ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L645\" class=\"blob-num js-line-number\" data-line-number=\"645\"><\/td>\n        <td id=\"file-markdown-js-LC645\" class=\"blob-code blob-code-inner js-file-line\">            block <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">shift<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L646\" class=\"blob-num js-line-number\" data-line-number=\"646\"><\/td>\n        <td id=\"file-markdown-js-LC646\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L647\" class=\"blob-num js-line-number\" data-line-number=\"647\"><\/td>\n        <td id=\"file-markdown-js-LC647\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Check for an HR following a list: features/lists/hr_abutting<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L648\" class=\"blob-num js-line-number\" data-line-number=\"648\"><\/td>\n        <td id=\"file-markdown-js-LC648\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var<\/span> hr <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-smi\">block<\/span>.<span class=\"pl-en\">horizRule<\/span>( block, next );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L649\" class=\"blob-num js-line-number\" data-line-number=\"649\"><\/td>\n        <td id=\"file-markdown-js-LC649\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L650\" class=\"blob-num js-line-number\" data-line-number=\"650\"><\/td>\n        <td id=\"file-markdown-js-LC650\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">if<\/span> ( hr ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L651\" class=\"blob-num js-line-number\" data-line-number=\"651\"><\/td>\n        <td id=\"file-markdown-js-LC651\" class=\"blob-code blob-code-inner js-file-line\">              <span class=\"pl-smi\">ret<\/span>.<span class=\"pl-smi\">push<\/span>.<span class=\"pl-c1\">apply<\/span>(ret, hr);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L652\" class=\"blob-num js-line-number\" data-line-number=\"652\"><\/td>\n        <td id=\"file-markdown-js-LC652\" class=\"blob-code blob-code-inner js-file-line\">              <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L653\" class=\"blob-num js-line-number\" data-line-number=\"653\"><\/td>\n        <td id=\"file-markdown-js-LC653\" class=\"blob-code blob-code-inner js-file-line\">            }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L654\" class=\"blob-num js-line-number\" data-line-number=\"654\"><\/td>\n        <td id=\"file-markdown-js-LC654\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L655\" class=\"blob-num js-line-number\" data-line-number=\"655\"><\/td>\n        <td id=\"file-markdown-js-LC655\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Make sure all listitems up the stack are paragraphs<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L656\" class=\"blob-num js-line-number\" data-line-number=\"656\"><\/td>\n        <td id=\"file-markdown-js-LC656\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-en\">forEach<\/span>( stack, paragraphify, <span class=\"pl-c1\">this<\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L657\" class=\"blob-num js-line-number\" data-line-number=\"657\"><\/td>\n        <td id=\"file-markdown-js-LC657\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L658\" class=\"blob-num js-line-number\" data-line-number=\"658\"><\/td>\n        <td id=\"file-markdown-js-LC658\" class=\"blob-code blob-code-inner js-file-line\">            loose <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">true<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L659\" class=\"blob-num js-line-number\" data-line-number=\"659\"><\/td>\n        <td id=\"file-markdown-js-LC659\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">continue<\/span> loose_search;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L660\" class=\"blob-num js-line-number\" data-line-number=\"660\"><\/td>\n        <td id=\"file-markdown-js-LC660\" class=\"blob-code blob-code-inner js-file-line\">          }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L661\" class=\"blob-num js-line-number\" data-line-number=\"661\"><\/td>\n        <td id=\"file-markdown-js-LC661\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L662\" class=\"blob-num js-line-number\" data-line-number=\"662\"><\/td>\n        <td id=\"file-markdown-js-LC662\" class=\"blob-code blob-code-inner js-file-line\">        } <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> loose_search<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L663\" class=\"blob-num js-line-number\" data-line-number=\"663\"><\/td>\n        <td id=\"file-markdown-js-LC663\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L664\" class=\"blob-num js-line-number\" data-line-number=\"664\"><\/td>\n        <td id=\"file-markdown-js-LC664\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> ret;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L665\" class=\"blob-num js-line-number\" data-line-number=\"665\"><\/td>\n        <td id=\"file-markdown-js-LC665\" class=\"blob-code blob-code-inner js-file-line\">      };<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L666\" class=\"blob-num js-line-number\" data-line-number=\"666\"><\/td>\n        <td id=\"file-markdown-js-LC666\" class=\"blob-code blob-code-inner js-file-line\">    })(),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L667\" class=\"blob-num js-line-number\" data-line-number=\"667\"><\/td>\n        <td id=\"file-markdown-js-LC667\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L668\" class=\"blob-num js-line-number\" data-line-number=\"668\"><\/td>\n        <td id=\"file-markdown-js-LC668\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">blockquote<\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">blockquote<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L669\" class=\"blob-num js-line-number\" data-line-number=\"669\"><\/td>\n        <td id=\"file-markdown-js-LC669\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span><span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>&gt;<span class=\"pl-pds\">/<\/span>m<\/span> ) )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L670\" class=\"blob-num js-line-number\" data-line-number=\"670\"><\/td>\n        <td id=\"file-markdown-js-LC670\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L671\" class=\"blob-num js-line-number\" data-line-number=\"671\"><\/td>\n        <td id=\"file-markdown-js-LC671\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L672\" class=\"blob-num js-line-number\" data-line-number=\"672\"><\/td>\n        <td id=\"file-markdown-js-LC672\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> jsonml <span class=\"pl-k\">=<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L673\" class=\"blob-num js-line-number\" data-line-number=\"673\"><\/td>\n        <td id=\"file-markdown-js-LC673\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L674\" class=\"blob-num js-line-number\" data-line-number=\"674\"><\/td>\n        <td id=\"file-markdown-js-LC674\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> separate out the leading abutting block, if any. I.e. in this case:<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L675\" class=\"blob-num js-line-number\" data-line-number=\"675\"><\/td>\n        <td id=\"file-markdown-js-LC675\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L676\" class=\"blob-num js-line-number\" data-line-number=\"676\"><\/td>\n        <td id=\"file-markdown-js-LC676\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>  a<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L677\" class=\"blob-num js-line-number\" data-line-number=\"677\"><\/td>\n        <td id=\"file-markdown-js-LC677\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>  &gt; b<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L678\" class=\"blob-num js-line-number\" data-line-number=\"678\"><\/td>\n        <td id=\"file-markdown-js-LC678\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L679\" class=\"blob-num js-line-number\" data-line-number=\"679\"><\/td>\n        <td id=\"file-markdown-js-LC679\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( block[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">!=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&gt;<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L680\" class=\"blob-num js-line-number\" data-line-number=\"680\"><\/td>\n        <td id=\"file-markdown-js-LC680\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> lines <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">split<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-c1\">\\n<\/span><span class=\"pl-pds\">/<\/span><\/span> ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L681\" class=\"blob-num js-line-number\" data-line-number=\"681\"><\/td>\n        <td id=\"file-markdown-js-LC681\" class=\"blob-code blob-code-inner js-file-line\">            prev <span class=\"pl-k\">=<\/span> [],<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L682\" class=\"blob-num js-line-number\" data-line-number=\"682\"><\/td>\n        <td id=\"file-markdown-js-LC682\" class=\"blob-code blob-code-inner js-file-line\">            line_no <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">lineNumber<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L683\" class=\"blob-num js-line-number\" data-line-number=\"683\"><\/td>\n        <td id=\"file-markdown-js-LC683\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L684\" class=\"blob-num js-line-number\" data-line-number=\"684\"><\/td>\n        <td id=\"file-markdown-js-LC684\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> keep shifting lines until you find a crotchet<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L685\" class=\"blob-num js-line-number\" data-line-number=\"685\"><\/td>\n        <td id=\"file-markdown-js-LC685\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">while<\/span> ( <span class=\"pl-smi\">lines<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> lines[ <span class=\"pl-c1\">0<\/span> ][ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">!=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&gt;<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L686\" class=\"blob-num js-line-number\" data-line-number=\"686\"><\/td>\n        <td id=\"file-markdown-js-LC686\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">prev<\/span>.<span class=\"pl-c1\">push<\/span>( <span class=\"pl-smi\">lines<\/span>.<span class=\"pl-c1\">shift<\/span>() );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L687\" class=\"blob-num js-line-number\" data-line-number=\"687\"><\/td>\n        <td id=\"file-markdown-js-LC687\" class=\"blob-code blob-code-inner js-file-line\">            line_no<span class=\"pl-k\">++<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L688\" class=\"blob-num js-line-number\" data-line-number=\"688\"><\/td>\n        <td id=\"file-markdown-js-LC688\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L689\" class=\"blob-num js-line-number\" data-line-number=\"689\"><\/td>\n        <td id=\"file-markdown-js-LC689\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L690\" class=\"blob-num js-line-number\" data-line-number=\"690\"><\/td>\n        <td id=\"file-markdown-js-LC690\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> abutting <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">mk_block<\/span>( <span class=\"pl-smi\">prev<\/span>.<span class=\"pl-c1\">join<\/span>( <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\n<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ), <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\n<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>, <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">lineNumber<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L691\" class=\"blob-num js-line-number\" data-line-number=\"691\"><\/td>\n        <td id=\"file-markdown-js-LC691\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-smi\">push<\/span>.<span class=\"pl-c1\">apply<\/span>( jsonml, <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processBlock<\/span>( abutting, [] ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L692\" class=\"blob-num js-line-number\" data-line-number=\"692\"><\/td>\n        <td id=\"file-markdown-js-LC692\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> reassemble new block of just block quotes!<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L693\" class=\"blob-num js-line-number\" data-line-number=\"693\"><\/td>\n        <td id=\"file-markdown-js-LC693\" class=\"blob-code blob-code-inner js-file-line\">        block <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">mk_block<\/span>( <span class=\"pl-smi\">lines<\/span>.<span class=\"pl-c1\">join<\/span>( <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\n<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ), <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">trailing<\/span>, line_no );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L694\" class=\"blob-num js-line-number\" data-line-number=\"694\"><\/td>\n        <td id=\"file-markdown-js-LC694\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L695\" class=\"blob-num js-line-number\" data-line-number=\"695\"><\/td>\n        <td id=\"file-markdown-js-LC695\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L696\" class=\"blob-num js-line-number\" data-line-number=\"696\"><\/td>\n        <td id=\"file-markdown-js-LC696\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L697\" class=\"blob-num js-line-number\" data-line-number=\"697\"><\/td>\n        <td id=\"file-markdown-js-LC697\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if the next block is also a blockquote merge it in<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L698\" class=\"blob-num js-line-number\" data-line-number=\"698\"><\/td>\n        <td id=\"file-markdown-js-LC698\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">while<\/span> ( <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> next[ <span class=\"pl-c1\">0<\/span> ][ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&gt;<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L699\" class=\"blob-num js-line-number\" data-line-number=\"699\"><\/td>\n        <td id=\"file-markdown-js-LC699\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> b <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">shift<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L700\" class=\"blob-num js-line-number\" data-line-number=\"700\"><\/td>\n        <td id=\"file-markdown-js-LC700\" class=\"blob-code blob-code-inner js-file-line\">        block <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">mk_block<\/span>( block <span class=\"pl-k\">+<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">trailing<\/span> <span class=\"pl-k\">+<\/span> b, <span class=\"pl-smi\">b<\/span>.<span class=\"pl-smi\">trailing<\/span>, <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">lineNumber<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L701\" class=\"blob-num js-line-number\" data-line-number=\"701\"><\/td>\n        <td id=\"file-markdown-js-LC701\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L702\" class=\"blob-num js-line-number\" data-line-number=\"702\"><\/td>\n        <td id=\"file-markdown-js-LC702\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L703\" class=\"blob-num js-line-number\" data-line-number=\"703\"><\/td>\n        <td id=\"file-markdown-js-LC703\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Strip off the leading &quot;&gt; &quot; and re-process as a block.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L704\" class=\"blob-num js-line-number\" data-line-number=\"704\"><\/td>\n        <td id=\"file-markdown-js-LC704\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> input <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>&gt; <span class=\"pl-k\">?<\/span><span class=\"pl-pds\">/<\/span>gm<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L705\" class=\"blob-num js-line-number\" data-line-number=\"705\"><\/td>\n        <td id=\"file-markdown-js-LC705\" class=\"blob-code blob-code-inner js-file-line\">          old_tree <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L706\" class=\"blob-num js-line-number\" data-line-number=\"706\"><\/td>\n        <td id=\"file-markdown-js-LC706\" class=\"blob-code blob-code-inner js-file-line\">          processedBlock <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">toTree<\/span>( input, [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>blockquote<span class=\"pl-pds\">&quot;<\/span><\/span> ] ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L707\" class=\"blob-num js-line-number\" data-line-number=\"707\"><\/td>\n        <td id=\"file-markdown-js-LC707\" class=\"blob-code blob-code-inner js-file-line\">          attr <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">extract_attr<\/span>( processedBlock );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L708\" class=\"blob-num js-line-number\" data-line-number=\"708\"><\/td>\n        <td id=\"file-markdown-js-LC708\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L709\" class=\"blob-num js-line-number\" data-line-number=\"709\"><\/td>\n        <td id=\"file-markdown-js-LC709\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> If any link references were found get rid of them<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L710\" class=\"blob-num js-line-number\" data-line-number=\"710\"><\/td>\n        <td id=\"file-markdown-js-LC710\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( attr <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-smi\">attr<\/span>.<span class=\"pl-smi\">references<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L711\" class=\"blob-num js-line-number\" data-line-number=\"711\"><\/td>\n        <td id=\"file-markdown-js-LC711\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">delete<\/span> <span class=\"pl-smi\">attr<\/span>.<span class=\"pl-smi\">references<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L712\" class=\"blob-num js-line-number\" data-line-number=\"712\"><\/td>\n        <td id=\"file-markdown-js-LC712\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> And then remove the attribute object if it&#39;s empty<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L713\" class=\"blob-num js-line-number\" data-line-number=\"713\"><\/td>\n        <td id=\"file-markdown-js-LC713\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( <span class=\"pl-en\">isEmpty<\/span>( attr ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L714\" class=\"blob-num js-line-number\" data-line-number=\"714\"><\/td>\n        <td id=\"file-markdown-js-LC714\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">processedBlock<\/span>.<span class=\"pl-c1\">splice<\/span>( <span class=\"pl-c1\">1<\/span>, <span class=\"pl-c1\">1<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L715\" class=\"blob-num js-line-number\" data-line-number=\"715\"><\/td>\n        <td id=\"file-markdown-js-LC715\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L716\" class=\"blob-num js-line-number\" data-line-number=\"716\"><\/td>\n        <td id=\"file-markdown-js-LC716\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L717\" class=\"blob-num js-line-number\" data-line-number=\"717\"><\/td>\n        <td id=\"file-markdown-js-LC717\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L718\" class=\"blob-num js-line-number\" data-line-number=\"718\"><\/td>\n        <td id=\"file-markdown-js-LC718\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">push<\/span>( processedBlock );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L719\" class=\"blob-num js-line-number\" data-line-number=\"719\"><\/td>\n        <td id=\"file-markdown-js-LC719\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> jsonml;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L720\" class=\"blob-num js-line-number\" data-line-number=\"720\"><\/td>\n        <td id=\"file-markdown-js-LC720\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L721\" class=\"blob-num js-line-number\" data-line-number=\"721\"><\/td>\n        <td id=\"file-markdown-js-LC721\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L722\" class=\"blob-num js-line-number\" data-line-number=\"722\"><\/td>\n        <td id=\"file-markdown-js-LC722\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">referenceDefn<\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">referenceDefn<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L723\" class=\"blob-num js-line-number\" data-line-number=\"723\"><\/td>\n        <td id=\"file-markdown-js-LC723\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> re <span class=\"pl-k\">=<\/span><span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\[<\/span>(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-cce\">\\]<\/span>:<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span>(<span class=\"pl-c1\">\\S<\/span><span class=\"pl-k\">+<\/span>)(?:<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">+<\/span>(?:(<span class=\"pl-c1\">[&#39;&quot;]<\/span>)(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-k\">\\3<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-cce\">\\(<\/span>(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-cce\">\\)<\/span>))<span class=\"pl-k\">?<\/span><span class=\"pl-c1\">\\n<\/span><span class=\"pl-k\">?<\/span><span class=\"pl-pds\">/<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L724\" class=\"blob-num js-line-number\" data-line-number=\"724\"><\/td>\n        <td id=\"file-markdown-js-LC724\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> interesting matches are [ , ref_id, url, , title, title ]<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L725\" class=\"blob-num js-line-number\" data-line-number=\"725\"><\/td>\n        <td id=\"file-markdown-js-LC725\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L726\" class=\"blob-num js-line-number\" data-line-number=\"726\"><\/td>\n        <td id=\"file-markdown-js-LC726\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span><span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>(re) )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L727\" class=\"blob-num js-line-number\" data-line-number=\"727\"><\/td>\n        <td id=\"file-markdown-js-LC727\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L728\" class=\"blob-num js-line-number\" data-line-number=\"728\"><\/td>\n        <td id=\"file-markdown-js-LC728\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L729\" class=\"blob-num js-line-number\" data-line-number=\"729\"><\/td>\n        <td id=\"file-markdown-js-LC729\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> make an attribute node if it doesn&#39;t exist<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L730\" class=\"blob-num js-line-number\" data-line-number=\"730\"><\/td>\n        <td id=\"file-markdown-js-LC730\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span><span class=\"pl-en\">extract_attr<\/span>( <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span> ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L731\" class=\"blob-num js-line-number\" data-line-number=\"731\"><\/td>\n        <td id=\"file-markdown-js-LC731\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span>.<span class=\"pl-c1\">splice<\/span>( <span class=\"pl-c1\">1<\/span>, <span class=\"pl-c1\">0<\/span>, {} );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L732\" class=\"blob-num js-line-number\" data-line-number=\"732\"><\/td>\n        <td id=\"file-markdown-js-LC732\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L733\" class=\"blob-num js-line-number\" data-line-number=\"733\"><\/td>\n        <td id=\"file-markdown-js-LC733\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L734\" class=\"blob-num js-line-number\" data-line-number=\"734\"><\/td>\n        <td id=\"file-markdown-js-LC734\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> attrs <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">extract_attr<\/span>( <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L735\" class=\"blob-num js-line-number\" data-line-number=\"735\"><\/td>\n        <td id=\"file-markdown-js-LC735\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L736\" class=\"blob-num js-line-number\" data-line-number=\"736\"><\/td>\n        <td id=\"file-markdown-js-LC736\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> make a references hash if it doesn&#39;t exist<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L737\" class=\"blob-num js-line-number\" data-line-number=\"737\"><\/td>\n        <td id=\"file-markdown-js-LC737\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">references<\/span> <span class=\"pl-k\">===<\/span> <span class=\"pl-c1\">undefined<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L738\" class=\"blob-num js-line-number\" data-line-number=\"738\"><\/td>\n        <td id=\"file-markdown-js-LC738\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">references<\/span> <span class=\"pl-k\">=<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L739\" class=\"blob-num js-line-number\" data-line-number=\"739\"><\/td>\n        <td id=\"file-markdown-js-LC739\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L740\" class=\"blob-num js-line-number\" data-line-number=\"740\"><\/td>\n        <td id=\"file-markdown-js-LC740\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L741\" class=\"blob-num js-line-number\" data-line-number=\"741\"><\/td>\n        <td id=\"file-markdown-js-LC741\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> b <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">loop_re_over_block<\/span>(re, block, <span class=\"pl-k\">function<\/span>( <span class=\"pl-smi\">m<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L742\" class=\"blob-num js-line-number\" data-line-number=\"742\"><\/td>\n        <td id=\"file-markdown-js-LC742\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L743\" class=\"blob-num js-line-number\" data-line-number=\"743\"><\/td>\n        <td id=\"file-markdown-js-LC743\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">2<\/span>] <span class=\"pl-k\">&amp;&amp;<\/span> m[<span class=\"pl-c1\">2<\/span>][<span class=\"pl-c1\">0<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&lt;<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">&amp;&amp;<\/span> m[<span class=\"pl-c1\">2<\/span>][m[<span class=\"pl-c1\">2<\/span>].<span class=\"pl-c1\">length<\/span><span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&gt;<span class=\"pl-pds\">&quot;<\/span><\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L744\" class=\"blob-num js-line-number\" data-line-number=\"744\"><\/td>\n        <td id=\"file-markdown-js-LC744\" class=\"blob-code blob-code-inner js-file-line\">          m[<span class=\"pl-c1\">2<\/span>] <span class=\"pl-k\">=<\/span> m[<span class=\"pl-c1\">2<\/span>].<span class=\"pl-c1\">substring<\/span>( <span class=\"pl-c1\">1<\/span>, m[<span class=\"pl-c1\">2<\/span>].<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-c1\">1<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L745\" class=\"blob-num js-line-number\" data-line-number=\"745\"><\/td>\n        <td id=\"file-markdown-js-LC745\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L746\" class=\"blob-num js-line-number\" data-line-number=\"746\"><\/td>\n        <td id=\"file-markdown-js-LC746\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> ref <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">references<\/span>[ m[<span class=\"pl-c1\">1<\/span>].<span class=\"pl-c1\">toLowerCase<\/span>() ] <span class=\"pl-k\">=<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L747\" class=\"blob-num js-line-number\" data-line-number=\"747\"><\/td>\n        <td id=\"file-markdown-js-LC747\" class=\"blob-code blob-code-inner js-file-line\">          href<span class=\"pl-k\">:<\/span> m[<span class=\"pl-c1\">2<\/span>]<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L748\" class=\"blob-num js-line-number\" data-line-number=\"748\"><\/td>\n        <td id=\"file-markdown-js-LC748\" class=\"blob-code blob-code-inner js-file-line\">        };<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L749\" class=\"blob-num js-line-number\" data-line-number=\"749\"><\/td>\n        <td id=\"file-markdown-js-LC749\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L750\" class=\"blob-num js-line-number\" data-line-number=\"750\"><\/td>\n        <td id=\"file-markdown-js-LC750\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">4<\/span>] <span class=\"pl-k\">!==<\/span> <span class=\"pl-c1\">undefined<\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L751\" class=\"blob-num js-line-number\" data-line-number=\"751\"><\/td>\n        <td id=\"file-markdown-js-LC751\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">ref<\/span>.<span class=\"pl-c1\">title<\/span> <span class=\"pl-k\">=<\/span> m[<span class=\"pl-c1\">4<\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L752\" class=\"blob-num js-line-number\" data-line-number=\"752\"><\/td>\n        <td id=\"file-markdown-js-LC752\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else<\/span> <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">5<\/span>] <span class=\"pl-k\">!==<\/span> <span class=\"pl-c1\">undefined<\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L753\" class=\"blob-num js-line-number\" data-line-number=\"753\"><\/td>\n        <td id=\"file-markdown-js-LC753\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">ref<\/span>.<span class=\"pl-c1\">title<\/span> <span class=\"pl-k\">=<\/span> m[<span class=\"pl-c1\">5<\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L754\" class=\"blob-num js-line-number\" data-line-number=\"754\"><\/td>\n        <td id=\"file-markdown-js-LC754\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L755\" class=\"blob-num js-line-number\" data-line-number=\"755\"><\/td>\n        <td id=\"file-markdown-js-LC755\" class=\"blob-code blob-code-inner js-file-line\">      } );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L756\" class=\"blob-num js-line-number\" data-line-number=\"756\"><\/td>\n        <td id=\"file-markdown-js-LC756\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L757\" class=\"blob-num js-line-number\" data-line-number=\"757\"><\/td>\n        <td id=\"file-markdown-js-LC757\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">b<\/span>.<span class=\"pl-c1\">length<\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L758\" class=\"blob-num js-line-number\" data-line-number=\"758\"><\/td>\n        <td id=\"file-markdown-js-LC758\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">unshift<\/span>( <span class=\"pl-en\">mk_block<\/span>( b, <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">trailing<\/span> ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L759\" class=\"blob-num js-line-number\" data-line-number=\"759\"><\/td>\n        <td id=\"file-markdown-js-LC759\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L760\" class=\"blob-num js-line-number\" data-line-number=\"760\"><\/td>\n        <td id=\"file-markdown-js-LC760\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L761\" class=\"blob-num js-line-number\" data-line-number=\"761\"><\/td>\n        <td id=\"file-markdown-js-LC761\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L762\" class=\"blob-num js-line-number\" data-line-number=\"762\"><\/td>\n        <td id=\"file-markdown-js-LC762\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L763\" class=\"blob-num js-line-number\" data-line-number=\"763\"><\/td>\n        <td id=\"file-markdown-js-LC763\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">para<\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">para<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L764\" class=\"blob-num js-line-number\" data-line-number=\"764\"><\/td>\n        <td id=\"file-markdown-js-LC764\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> everything&#39;s a para!<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L765\" class=\"blob-num js-line-number\" data-line-number=\"765\"><\/td>\n        <td id=\"file-markdown-js-LC765\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> [ [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>para<span class=\"pl-pds\">&quot;<\/span><\/span>].<span class=\"pl-c1\">concat<\/span>( <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processInline<\/span>( block ) ) ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L766\" class=\"blob-num js-line-number\" data-line-number=\"766\"><\/td>\n        <td id=\"file-markdown-js-LC766\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L767\" class=\"blob-num js-line-number\" data-line-number=\"767\"><\/td>\n        <td id=\"file-markdown-js-LC767\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L768\" class=\"blob-num js-line-number\" data-line-number=\"768\"><\/td>\n        <td id=\"file-markdown-js-LC768\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L769\" class=\"blob-num js-line-number\" data-line-number=\"769\"><\/td>\n        <td id=\"file-markdown-js-LC769\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L770\" class=\"blob-num js-line-number\" data-line-number=\"770\"><\/td>\n        <td id=\"file-markdown-js-LC770\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Gruber<\/span>.<span class=\"pl-smi\">inline<\/span> <span class=\"pl-k\">=<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L771\" class=\"blob-num js-line-number\" data-line-number=\"771\"><\/td>\n        <td id=\"file-markdown-js-LC771\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L772\" class=\"blob-num js-line-number\" data-line-number=\"772\"><\/td>\n        <td id=\"file-markdown-js-LC772\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">__oneElement__<\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">oneElement<\/span>( <span class=\"pl-smi\">text<\/span>, <span class=\"pl-smi\">patterns_or_re<\/span>, <span class=\"pl-smi\">previous_nodes<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L773\" class=\"blob-num js-line-number\" data-line-number=\"773\"><\/td>\n        <td id=\"file-markdown-js-LC773\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> m,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L774\" class=\"blob-num js-line-number\" data-line-number=\"774\"><\/td>\n        <td id=\"file-markdown-js-LC774\" class=\"blob-code blob-code-inner js-file-line\">          res,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L775\" class=\"blob-num js-line-number\" data-line-number=\"775\"><\/td>\n        <td id=\"file-markdown-js-LC775\" class=\"blob-code blob-code-inner js-file-line\">          lastIndex <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L776\" class=\"blob-num js-line-number\" data-line-number=\"776\"><\/td>\n        <td id=\"file-markdown-js-LC776\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L777\" class=\"blob-num js-line-number\" data-line-number=\"777\"><\/td>\n        <td id=\"file-markdown-js-LC777\" class=\"blob-code blob-code-inner js-file-line\">      patterns_or_re <span class=\"pl-k\">=<\/span> patterns_or_re <span class=\"pl-k\">||<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-smi\">inline<\/span>.<span class=\"pl-smi\">__patterns__<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L778\" class=\"blob-num js-line-number\" data-line-number=\"778\"><\/td>\n        <td id=\"file-markdown-js-LC778\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> re <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">RegExp<\/span>( <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>([<span class=\"pl-cce\">\\\\<\/span>s<span class=\"pl-cce\">\\\\<\/span>S]*?)(<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> (<span class=\"pl-smi\">patterns_or_re<\/span>.<span class=\"pl-c1\">source<\/span> <span class=\"pl-k\">||<\/span> patterns_or_re) <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>)<span class=\"pl-pds\">&quot;<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L779\" class=\"blob-num js-line-number\" data-line-number=\"779\"><\/td>\n        <td id=\"file-markdown-js-LC779\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L780\" class=\"blob-num js-line-number\" data-line-number=\"780\"><\/td>\n        <td id=\"file-markdown-js-LC780\" class=\"blob-code blob-code-inner js-file-line\">      m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">re<\/span>.<span class=\"pl-c1\">exec<\/span>( text );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L781\" class=\"blob-num js-line-number\" data-line-number=\"781\"><\/td>\n        <td id=\"file-markdown-js-LC781\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> (<span class=\"pl-k\">!<\/span>m) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L782\" class=\"blob-num js-line-number\" data-line-number=\"782\"><\/td>\n        <td id=\"file-markdown-js-LC782\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Just boring text<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L783\" class=\"blob-num js-line-number\" data-line-number=\"783\"><\/td>\n        <td id=\"file-markdown-js-LC783\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">length<\/span>, text ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L784\" class=\"blob-num js-line-number\" data-line-number=\"784\"><\/td>\n        <td id=\"file-markdown-js-LC784\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L785\" class=\"blob-num js-line-number\" data-line-number=\"785\"><\/td>\n        <td id=\"file-markdown-js-LC785\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">else<\/span> <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">1<\/span>] ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L786\" class=\"blob-num js-line-number\" data-line-number=\"786\"><\/td>\n        <td id=\"file-markdown-js-LC786\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Some un-interesting text matched. Return that first<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L787\" class=\"blob-num js-line-number\" data-line-number=\"787\"><\/td>\n        <td id=\"file-markdown-js-LC787\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ m[<span class=\"pl-c1\">1<\/span>].<span class=\"pl-c1\">length<\/span>, m[<span class=\"pl-c1\">1<\/span>] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L788\" class=\"blob-num js-line-number\" data-line-number=\"788\"><\/td>\n        <td id=\"file-markdown-js-LC788\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L789\" class=\"blob-num js-line-number\" data-line-number=\"789\"><\/td>\n        <td id=\"file-markdown-js-LC789\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L790\" class=\"blob-num js-line-number\" data-line-number=\"790\"><\/td>\n        <td id=\"file-markdown-js-LC790\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> res;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L791\" class=\"blob-num js-line-number\" data-line-number=\"791\"><\/td>\n        <td id=\"file-markdown-js-LC791\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">2<\/span>] <span class=\"pl-k\">in<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-smi\">inline<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L792\" class=\"blob-num js-line-number\" data-line-number=\"792\"><\/td>\n        <td id=\"file-markdown-js-LC792\" class=\"blob-code blob-code-inner js-file-line\">        res <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-smi\">inline<\/span>[ m[<span class=\"pl-c1\">2<\/span>] ].<span class=\"pl-c1\">call<\/span>(<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L793\" class=\"blob-num js-line-number\" data-line-number=\"793\"><\/td>\n        <td id=\"file-markdown-js-LC793\" class=\"blob-code blob-code-inner js-file-line\">                  <span class=\"pl-c1\">this<\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L794\" class=\"blob-num js-line-number\" data-line-number=\"794\"><\/td>\n        <td id=\"file-markdown-js-LC794\" class=\"blob-code blob-code-inner js-file-line\">                  <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">substr<\/span>( <span class=\"pl-smi\">m<\/span>.<span class=\"pl-c1\">index<\/span> ), m, previous_nodes <span class=\"pl-k\">||<\/span> [] );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L795\" class=\"blob-num js-line-number\" data-line-number=\"795\"><\/td>\n        <td id=\"file-markdown-js-LC795\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L796\" class=\"blob-num js-line-number\" data-line-number=\"796\"><\/td>\n        <td id=\"file-markdown-js-LC796\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Default for now to make dev easier. just slurp special and output it.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L797\" class=\"blob-num js-line-number\" data-line-number=\"797\"><\/td>\n        <td id=\"file-markdown-js-LC797\" class=\"blob-code blob-code-inner js-file-line\">      res <span class=\"pl-k\">=<\/span> res <span class=\"pl-k\">||<\/span> [ m[<span class=\"pl-c1\">2<\/span>].<span class=\"pl-c1\">length<\/span>, m[<span class=\"pl-c1\">2<\/span>] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L798\" class=\"blob-num js-line-number\" data-line-number=\"798\"><\/td>\n        <td id=\"file-markdown-js-LC798\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> res;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L799\" class=\"blob-num js-line-number\" data-line-number=\"799\"><\/td>\n        <td id=\"file-markdown-js-LC799\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L800\" class=\"blob-num js-line-number\" data-line-number=\"800\"><\/td>\n        <td id=\"file-markdown-js-LC800\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L801\" class=\"blob-num js-line-number\" data-line-number=\"801\"><\/td>\n        <td id=\"file-markdown-js-LC801\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">__call__<\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">inline<\/span>( <span class=\"pl-smi\">text<\/span>, <span class=\"pl-smi\">patterns<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L802\" class=\"blob-num js-line-number\" data-line-number=\"802\"><\/td>\n        <td id=\"file-markdown-js-LC802\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L803\" class=\"blob-num js-line-number\" data-line-number=\"803\"><\/td>\n        <td id=\"file-markdown-js-LC803\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> out <span class=\"pl-k\">=<\/span> [],<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L804\" class=\"blob-num js-line-number\" data-line-number=\"804\"><\/td>\n        <td id=\"file-markdown-js-LC804\" class=\"blob-code blob-code-inner js-file-line\">          res;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L805\" class=\"blob-num js-line-number\" data-line-number=\"805\"><\/td>\n        <td id=\"file-markdown-js-LC805\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L806\" class=\"blob-num js-line-number\" data-line-number=\"806\"><\/td>\n        <td id=\"file-markdown-js-LC806\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">add<\/span>(<span class=\"pl-smi\">x<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L807\" class=\"blob-num js-line-number\" data-line-number=\"807\"><\/td>\n        <td id=\"file-markdown-js-LC807\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>D:self.debug(&quot;  adding output&quot;, uneval(x));<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L808\" class=\"blob-num js-line-number\" data-line-number=\"808\"><\/td>\n        <td id=\"file-markdown-js-LC808\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">typeof<\/span> x <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">typeof<\/span> out[<span class=\"pl-smi\">out<\/span>.<span class=\"pl-c1\">length<\/span><span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L809\" class=\"blob-num js-line-number\" data-line-number=\"809\"><\/td>\n        <td id=\"file-markdown-js-LC809\" class=\"blob-code blob-code-inner js-file-line\">          out[ <span class=\"pl-smi\">out<\/span>.<span class=\"pl-c1\">length<\/span><span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span> ] <span class=\"pl-k\">+=<\/span> x;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L810\" class=\"blob-num js-line-number\" data-line-number=\"810\"><\/td>\n        <td id=\"file-markdown-js-LC810\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L811\" class=\"blob-num js-line-number\" data-line-number=\"811\"><\/td>\n        <td id=\"file-markdown-js-LC811\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">out<\/span>.<span class=\"pl-c1\">push<\/span>(x);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L812\" class=\"blob-num js-line-number\" data-line-number=\"812\"><\/td>\n        <td id=\"file-markdown-js-LC812\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L813\" class=\"blob-num js-line-number\" data-line-number=\"813\"><\/td>\n        <td id=\"file-markdown-js-LC813\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L814\" class=\"blob-num js-line-number\" data-line-number=\"814\"><\/td>\n        <td id=\"file-markdown-js-LC814\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">while<\/span> ( <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&gt;<\/span> <span class=\"pl-c1\">0<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L815\" class=\"blob-num js-line-number\" data-line-number=\"815\"><\/td>\n        <td id=\"file-markdown-js-LC815\" class=\"blob-code blob-code-inner js-file-line\">        res <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-smi\">inline<\/span>.<span class=\"pl-smi\">__oneElement__<\/span>.<span class=\"pl-c1\">call<\/span>(<span class=\"pl-c1\">this<\/span>, text, patterns, out );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L816\" class=\"blob-num js-line-number\" data-line-number=\"816\"><\/td>\n        <td id=\"file-markdown-js-LC816\" class=\"blob-code blob-code-inner js-file-line\">        text <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">substr<\/span>( <span class=\"pl-smi\">res<\/span>.<span class=\"pl-c1\">shift<\/span>() );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L817\" class=\"blob-num js-line-number\" data-line-number=\"817\"><\/td>\n        <td id=\"file-markdown-js-LC817\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-en\">forEach<\/span>(res, add )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L818\" class=\"blob-num js-line-number\" data-line-number=\"818\"><\/td>\n        <td id=\"file-markdown-js-LC818\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L819\" class=\"blob-num js-line-number\" data-line-number=\"819\"><\/td>\n        <td id=\"file-markdown-js-LC819\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L820\" class=\"blob-num js-line-number\" data-line-number=\"820\"><\/td>\n        <td id=\"file-markdown-js-LC820\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> out;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L821\" class=\"blob-num js-line-number\" data-line-number=\"821\"><\/td>\n        <td id=\"file-markdown-js-LC821\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L822\" class=\"blob-num js-line-number\" data-line-number=\"822\"><\/td>\n        <td id=\"file-markdown-js-LC822\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L823\" class=\"blob-num js-line-number\" data-line-number=\"823\"><\/td>\n        <td id=\"file-markdown-js-LC823\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> These characters are intersting elsewhere, so have rules for them so that<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L824\" class=\"blob-num js-line-number\" data-line-number=\"824\"><\/td>\n        <td id=\"file-markdown-js-LC824\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> chunks of plain text blocks don&#39;t include them<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L825\" class=\"blob-num js-line-number\" data-line-number=\"825\"><\/td>\n        <td id=\"file-markdown-js-LC825\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-en\">]<\/span><span class=\"pl-pds\">&quot;<\/span><\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> () {},<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L826\" class=\"blob-num js-line-number\" data-line-number=\"826\"><\/td>\n        <td id=\"file-markdown-js-LC826\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-en\">}<\/span><span class=\"pl-pds\">&quot;<\/span><\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> () {},<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L827\" class=\"blob-num js-line-number\" data-line-number=\"827\"><\/td>\n        <td id=\"file-markdown-js-LC827\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L828\" class=\"blob-num js-line-number\" data-line-number=\"828\"><\/td>\n        <td id=\"file-markdown-js-LC828\" class=\"blob-code blob-code-inner js-file-line\">    __escape__ <span class=\"pl-k\">:<\/span><span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-cce\">\\\\<\/span><span class=\"pl-c1\">[<span class=\"pl-cce\">\\\\<\/span>`<span class=\"pl-cce\">\\*<\/span>_{}<span class=\"pl-cce\">\\[\\]<\/span>()#<span class=\"pl-cce\">\\+<\/span><span class=\"pl-c1\">.<\/span>!<span class=\"pl-cce\">\\-<\/span>]<\/span><span class=\"pl-pds\">/<\/span><\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L829\" class=\"blob-num js-line-number\" data-line-number=\"829\"><\/td>\n        <td id=\"file-markdown-js-LC829\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L830\" class=\"blob-num js-line-number\" data-line-number=\"830\"><\/td>\n        <td id=\"file-markdown-js-LC830\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-en\">\\\\<\/span><span class=\"pl-pds\">&quot;<\/span><\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">escaped<\/span>( <span class=\"pl-smi\">text<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L831\" class=\"blob-num js-line-number\" data-line-number=\"831\"><\/td>\n        <td id=\"file-markdown-js-LC831\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> [ length of input processed, node/children to add... ]<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L832\" class=\"blob-num js-line-number\" data-line-number=\"832\"><\/td>\n        <td id=\"file-markdown-js-LC832\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Only esacape: \\ ` * _ { } [ ] ( ) # * + - . !<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L833\" class=\"blob-num js-line-number\" data-line-number=\"833\"><\/td>\n        <td id=\"file-markdown-js-LC833\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-smi\">inline<\/span>.<span class=\"pl-smi\">__escape__<\/span>.<span class=\"pl-c1\">exec<\/span>( text ) )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L834\" class=\"blob-num js-line-number\" data-line-number=\"834\"><\/td>\n        <td id=\"file-markdown-js-LC834\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ <span class=\"pl-c1\">2<\/span>, <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">charAt<\/span>( <span class=\"pl-c1\">1<\/span> ) ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L835\" class=\"blob-num js-line-number\" data-line-number=\"835\"><\/td>\n        <td id=\"file-markdown-js-LC835\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">else<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L836\" class=\"blob-num js-line-number\" data-line-number=\"836\"><\/td>\n        <td id=\"file-markdown-js-LC836\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Not an esacpe<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L837\" class=\"blob-num js-line-number\" data-line-number=\"837\"><\/td>\n        <td id=\"file-markdown-js-LC837\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ <span class=\"pl-c1\">1<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\\\<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L838\" class=\"blob-num js-line-number\" data-line-number=\"838\"><\/td>\n        <td id=\"file-markdown-js-LC838\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L839\" class=\"blob-num js-line-number\" data-line-number=\"839\"><\/td>\n        <td id=\"file-markdown-js-LC839\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L840\" class=\"blob-num js-line-number\" data-line-number=\"840\"><\/td>\n        <td id=\"file-markdown-js-LC840\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-en\">![<\/span><span class=\"pl-pds\">&quot;<\/span><\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">image<\/span>( <span class=\"pl-smi\">text<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L841\" class=\"blob-num js-line-number\" data-line-number=\"841\"><\/td>\n        <td id=\"file-markdown-js-LC841\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L842\" class=\"blob-num js-line-number\" data-line-number=\"842\"><\/td>\n        <td id=\"file-markdown-js-LC842\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Unlike images, alt text is plain text only. no other elements are<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L843\" class=\"blob-num js-line-number\" data-line-number=\"843\"><\/td>\n        <td id=\"file-markdown-js-LC843\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> allowed in there<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L844\" class=\"blob-num js-line-number\" data-line-number=\"844\"><\/td>\n        <td id=\"file-markdown-js-LC844\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L845\" class=\"blob-num js-line-number\" data-line-number=\"845\"><\/td>\n        <td id=\"file-markdown-js-LC845\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> ![Alt text](/path/to/img.jpg &quot;Optional title&quot;)<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L846\" class=\"blob-num js-line-number\" data-line-number=\"846\"><\/td>\n        <td id=\"file-markdown-js-LC846\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>      1          2            3       4         &lt;--- captures<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L847\" class=\"blob-num js-line-number\" data-line-number=\"847\"><\/td>\n        <td id=\"file-markdown-js-LC847\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>!<span class=\"pl-cce\">\\[<\/span>(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-cce\">\\]<\/span><span class=\"pl-c1\">[ <span class=\"pl-c1\">\\t<\/span>]<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\(<\/span><span class=\"pl-c1\">[ <span class=\"pl-c1\">\\t<\/span>]<\/span><span class=\"pl-k\">*<\/span>(<span class=\"pl-c1\">[<span class=\"pl-k\">^<\/span>&quot;)]<\/span><span class=\"pl-k\">*?<\/span>)(?:<span class=\"pl-c1\">[ <span class=\"pl-c1\">\\t<\/span>]<\/span><span class=\"pl-k\">+<\/span>(<span class=\"pl-c1\">[&quot;&#39;]<\/span>)(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-k\">\\3<\/span>)<span class=\"pl-k\">?<\/span><span class=\"pl-c1\">[ <span class=\"pl-c1\">\\t<\/span>]<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\)<\/span><span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L848\" class=\"blob-num js-line-number\" data-line-number=\"848\"><\/td>\n        <td id=\"file-markdown-js-LC848\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L849\" class=\"blob-num js-line-number\" data-line-number=\"849\"><\/td>\n        <td id=\"file-markdown-js-LC849\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( m ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L850\" class=\"blob-num js-line-number\" data-line-number=\"850\"><\/td>\n        <td id=\"file-markdown-js-LC850\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">2<\/span>] <span class=\"pl-k\">&amp;&amp;<\/span> m[<span class=\"pl-c1\">2<\/span>][<span class=\"pl-c1\">0<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&lt;<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">&amp;&amp;<\/span> m[<span class=\"pl-c1\">2<\/span>][m[<span class=\"pl-c1\">2<\/span>].<span class=\"pl-c1\">length<\/span><span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&gt;<span class=\"pl-pds\">&quot;<\/span><\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L851\" class=\"blob-num js-line-number\" data-line-number=\"851\"><\/td>\n        <td id=\"file-markdown-js-LC851\" class=\"blob-code blob-code-inner js-file-line\">          m[<span class=\"pl-c1\">2<\/span>] <span class=\"pl-k\">=<\/span> m[<span class=\"pl-c1\">2<\/span>].<span class=\"pl-c1\">substring<\/span>( <span class=\"pl-c1\">1<\/span>, m[<span class=\"pl-c1\">2<\/span>].<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-c1\">1<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L852\" class=\"blob-num js-line-number\" data-line-number=\"852\"><\/td>\n        <td id=\"file-markdown-js-LC852\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L853\" class=\"blob-num js-line-number\" data-line-number=\"853\"><\/td>\n        <td id=\"file-markdown-js-LC853\" class=\"blob-code blob-code-inner js-file-line\">        m[<span class=\"pl-c1\">2<\/span>] <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-smi\">inline<\/span>.<span class=\"pl-smi\">__call__<\/span>.<span class=\"pl-c1\">call<\/span>( <span class=\"pl-c1\">this<\/span>, m[<span class=\"pl-c1\">2<\/span>],<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-cce\">\\\\<\/span><span class=\"pl-pds\">/<\/span><\/span> )[<span class=\"pl-c1\">0<\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L854\" class=\"blob-num js-line-number\" data-line-number=\"854\"><\/td>\n        <td id=\"file-markdown-js-LC854\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L855\" class=\"blob-num js-line-number\" data-line-number=\"855\"><\/td>\n        <td id=\"file-markdown-js-LC855\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> attrs <span class=\"pl-k\">=<\/span> { alt<span class=\"pl-k\">:<\/span> m[<span class=\"pl-c1\">1<\/span>], href<span class=\"pl-k\">:<\/span> m[<span class=\"pl-c1\">2<\/span>] <span class=\"pl-k\">||<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> };<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L856\" class=\"blob-num js-line-number\" data-line-number=\"856\"><\/td>\n        <td id=\"file-markdown-js-LC856\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">4<\/span>] <span class=\"pl-k\">!==<\/span> <span class=\"pl-c1\">undefined<\/span>)<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L857\" class=\"blob-num js-line-number\" data-line-number=\"857\"><\/td>\n        <td id=\"file-markdown-js-LC857\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-c1\">title<\/span> <span class=\"pl-k\">=<\/span> m[<span class=\"pl-c1\">4<\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L858\" class=\"blob-num js-line-number\" data-line-number=\"858\"><\/td>\n        <td id=\"file-markdown-js-LC858\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L859\" class=\"blob-num js-line-number\" data-line-number=\"859\"><\/td>\n        <td id=\"file-markdown-js-LC859\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span>, [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>img<span class=\"pl-pds\">&quot;<\/span><\/span>, attrs ] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L860\" class=\"blob-num js-line-number\" data-line-number=\"860\"><\/td>\n        <td id=\"file-markdown-js-LC860\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L861\" class=\"blob-num js-line-number\" data-line-number=\"861\"><\/td>\n        <td id=\"file-markdown-js-LC861\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L862\" class=\"blob-num js-line-number\" data-line-number=\"862\"><\/td>\n        <td id=\"file-markdown-js-LC862\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> ![Alt text][id]<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L863\" class=\"blob-num js-line-number\" data-line-number=\"863\"><\/td>\n        <td id=\"file-markdown-js-LC863\" class=\"blob-code blob-code-inner js-file-line\">      m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>!<span class=\"pl-cce\">\\[<\/span>(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-cce\">\\]<\/span><span class=\"pl-c1\">[ <span class=\"pl-c1\">\\t<\/span>]<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\[<\/span>(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-cce\">\\]<\/span><span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L864\" class=\"blob-num js-line-number\" data-line-number=\"864\"><\/td>\n        <td id=\"file-markdown-js-LC864\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L865\" class=\"blob-num js-line-number\" data-line-number=\"865\"><\/td>\n        <td id=\"file-markdown-js-LC865\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( m ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L866\" class=\"blob-num js-line-number\" data-line-number=\"866\"><\/td>\n        <td id=\"file-markdown-js-LC866\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> We can&#39;t check if the reference is known here as it likely wont be<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L867\" class=\"blob-num js-line-number\" data-line-number=\"867\"><\/td>\n        <td id=\"file-markdown-js-LC867\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> found till after. Check it in md tree-&gt;hmtl tree conversion<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L868\" class=\"blob-num js-line-number\" data-line-number=\"868\"><\/td>\n        <td id=\"file-markdown-js-LC868\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span>, [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>img_ref<span class=\"pl-pds\">&quot;<\/span><\/span>, { alt<span class=\"pl-k\">:<\/span> m[<span class=\"pl-c1\">1<\/span>], ref<span class=\"pl-k\">:<\/span> m[<span class=\"pl-c1\">2<\/span>].<span class=\"pl-c1\">toLowerCase<\/span>(), original<span class=\"pl-k\">:<\/span> m[<span class=\"pl-c1\">0<\/span>] } ] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L869\" class=\"blob-num js-line-number\" data-line-number=\"869\"><\/td>\n        <td id=\"file-markdown-js-LC869\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L870\" class=\"blob-num js-line-number\" data-line-number=\"870\"><\/td>\n        <td id=\"file-markdown-js-LC870\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L871\" class=\"blob-num js-line-number\" data-line-number=\"871\"><\/td>\n        <td id=\"file-markdown-js-LC871\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Just consume the &#39;![&#39;<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L872\" class=\"blob-num js-line-number\" data-line-number=\"872\"><\/td>\n        <td id=\"file-markdown-js-LC872\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> [ <span class=\"pl-c1\">2<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>![<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L873\" class=\"blob-num js-line-number\" data-line-number=\"873\"><\/td>\n        <td id=\"file-markdown-js-LC873\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L874\" class=\"blob-num js-line-number\" data-line-number=\"874\"><\/td>\n        <td id=\"file-markdown-js-LC874\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L875\" class=\"blob-num js-line-number\" data-line-number=\"875\"><\/td>\n        <td id=\"file-markdown-js-LC875\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-en\">[<\/span><span class=\"pl-pds\">&quot;<\/span><\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">link<\/span>( <span class=\"pl-smi\">text<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L876\" class=\"blob-num js-line-number\" data-line-number=\"876\"><\/td>\n        <td id=\"file-markdown-js-LC876\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L877\" class=\"blob-num js-line-number\" data-line-number=\"877\"><\/td>\n        <td id=\"file-markdown-js-LC877\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> orig <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">String<\/span>(text);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L878\" class=\"blob-num js-line-number\" data-line-number=\"878\"><\/td>\n        <td id=\"file-markdown-js-LC878\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Inline content is possible inside `link text`<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L879\" class=\"blob-num js-line-number\" data-line-number=\"879\"><\/td>\n        <td id=\"file-markdown-js-LC879\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> res <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">DialectHelpers<\/span>.<span class=\"pl-smi\">inline_until_char<\/span>.<span class=\"pl-c1\">call<\/span>( <span class=\"pl-c1\">this<\/span>, <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">substr<\/span>(<span class=\"pl-c1\">1<\/span>), <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>]<span class=\"pl-pds\">&quot;<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L880\" class=\"blob-num js-line-number\" data-line-number=\"880\"><\/td>\n        <td id=\"file-markdown-js-LC880\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L881\" class=\"blob-num js-line-number\" data-line-number=\"881\"><\/td>\n        <td id=\"file-markdown-js-LC881\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> No closing &#39;]&#39; found. Just consume the [<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L882\" class=\"blob-num js-line-number\" data-line-number=\"882\"><\/td>\n        <td id=\"file-markdown-js-LC882\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>res ) <span class=\"pl-k\">return<\/span> [ <span class=\"pl-c1\">1<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>[<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L883\" class=\"blob-num js-line-number\" data-line-number=\"883\"><\/td>\n        <td id=\"file-markdown-js-LC883\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L884\" class=\"blob-num js-line-number\" data-line-number=\"884\"><\/td>\n        <td id=\"file-markdown-js-LC884\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> consumed <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">1<\/span> <span class=\"pl-k\">+<\/span> res[ <span class=\"pl-c1\">0<\/span> ],<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L885\" class=\"blob-num js-line-number\" data-line-number=\"885\"><\/td>\n        <td id=\"file-markdown-js-LC885\" class=\"blob-code blob-code-inner js-file-line\">          children <span class=\"pl-k\">=<\/span> res[ <span class=\"pl-c1\">1<\/span> ],<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L886\" class=\"blob-num js-line-number\" data-line-number=\"886\"><\/td>\n        <td id=\"file-markdown-js-LC886\" class=\"blob-code blob-code-inner js-file-line\">          link,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L887\" class=\"blob-num js-line-number\" data-line-number=\"887\"><\/td>\n        <td id=\"file-markdown-js-LC887\" class=\"blob-code blob-code-inner js-file-line\">          attrs;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L888\" class=\"blob-num js-line-number\" data-line-number=\"888\"><\/td>\n        <td id=\"file-markdown-js-LC888\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L889\" class=\"blob-num js-line-number\" data-line-number=\"889\"><\/td>\n        <td id=\"file-markdown-js-LC889\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> At this point the first [...] has been parsed. See what follows to find<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L890\" class=\"blob-num js-line-number\" data-line-number=\"890\"><\/td>\n        <td id=\"file-markdown-js-LC890\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> out which kind of link we are (reference or direct url)<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L891\" class=\"blob-num js-line-number\" data-line-number=\"891\"><\/td>\n        <td id=\"file-markdown-js-LC891\" class=\"blob-code blob-code-inner js-file-line\">      text <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">substr<\/span>( consumed );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L892\" class=\"blob-num js-line-number\" data-line-number=\"892\"><\/td>\n        <td id=\"file-markdown-js-LC892\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L893\" class=\"blob-num js-line-number\" data-line-number=\"893\"><\/td>\n        <td id=\"file-markdown-js-LC893\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> [link text](/path/to/img.jpg &quot;Optional title&quot;)<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L894\" class=\"blob-num js-line-number\" data-line-number=\"894\"><\/td>\n        <td id=\"file-markdown-js-LC894\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>                 1            2       3         &lt;--- captures<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L895\" class=\"blob-num js-line-number\" data-line-number=\"895\"><\/td>\n        <td id=\"file-markdown-js-LC895\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> This will capture up to the last paren in the block. We then pull<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L896\" class=\"blob-num js-line-number\" data-line-number=\"896\"><\/td>\n        <td id=\"file-markdown-js-LC896\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> back based on if there a matching ones in the url<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L897\" class=\"blob-num js-line-number\" data-line-number=\"897\"><\/td>\n        <td id=\"file-markdown-js-LC897\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>    ([here](/url/(test))<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L898\" class=\"blob-num js-line-number\" data-line-number=\"898\"><\/td>\n        <td id=\"file-markdown-js-LC898\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> The parens have to be balanced<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L899\" class=\"blob-num js-line-number\" data-line-number=\"899\"><\/td>\n        <td id=\"file-markdown-js-LC899\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\(<\/span><span class=\"pl-c1\">[ <span class=\"pl-c1\">\\t<\/span>]<\/span><span class=\"pl-k\">*<\/span>(<span class=\"pl-c1\">[<span class=\"pl-k\">^<\/span>&quot;&#39;]<\/span><span class=\"pl-k\">*<\/span>)(?:<span class=\"pl-c1\">[ <span class=\"pl-c1\">\\t<\/span>]<\/span><span class=\"pl-k\">+<\/span>(<span class=\"pl-c1\">[&quot;&#39;]<\/span>)(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-k\">\\2<\/span>)<span class=\"pl-k\">?<\/span><span class=\"pl-c1\">[ <span class=\"pl-c1\">\\t<\/span>]<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\)<\/span><span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L900\" class=\"blob-num js-line-number\" data-line-number=\"900\"><\/td>\n        <td id=\"file-markdown-js-LC900\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( m ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L901\" class=\"blob-num js-line-number\" data-line-number=\"901\"><\/td>\n        <td id=\"file-markdown-js-LC901\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> url <span class=\"pl-k\">=<\/span> m[<span class=\"pl-c1\">1<\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L902\" class=\"blob-num js-line-number\" data-line-number=\"902\"><\/td>\n        <td id=\"file-markdown-js-LC902\" class=\"blob-code blob-code-inner js-file-line\">        consumed <span class=\"pl-k\">+=<\/span> m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L903\" class=\"blob-num js-line-number\" data-line-number=\"903\"><\/td>\n        <td id=\"file-markdown-js-LC903\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L904\" class=\"blob-num js-line-number\" data-line-number=\"904\"><\/td>\n        <td id=\"file-markdown-js-LC904\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( url <span class=\"pl-k\">&amp;&amp;<\/span> url[<span class=\"pl-c1\">0<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&lt;<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">&amp;&amp;<\/span> url[<span class=\"pl-smi\">url<\/span>.<span class=\"pl-c1\">length<\/span><span class=\"pl-k\">-<\/span><span class=\"pl-c1\">1<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&gt;<span class=\"pl-pds\">&quot;<\/span><\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L905\" class=\"blob-num js-line-number\" data-line-number=\"905\"><\/td>\n        <td id=\"file-markdown-js-LC905\" class=\"blob-code blob-code-inner js-file-line\">          url <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">url<\/span>.<span class=\"pl-c1\">substring<\/span>( <span class=\"pl-c1\">1<\/span>, <span class=\"pl-smi\">url<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-c1\">1<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L906\" class=\"blob-num js-line-number\" data-line-number=\"906\"><\/td>\n        <td id=\"file-markdown-js-LC906\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L907\" class=\"blob-num js-line-number\" data-line-number=\"907\"><\/td>\n        <td id=\"file-markdown-js-LC907\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> If there is a title we don&#39;t have to worry about parens in the url<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L908\" class=\"blob-num js-line-number\" data-line-number=\"908\"><\/td>\n        <td id=\"file-markdown-js-LC908\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>m[<span class=\"pl-c1\">3<\/span>] ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L909\" class=\"blob-num js-line-number\" data-line-number=\"909\"><\/td>\n        <td id=\"file-markdown-js-LC909\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">var<\/span> open_parens <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">1<\/span>; <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> One open that isn&#39;t in the capture<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L910\" class=\"blob-num js-line-number\" data-line-number=\"910\"><\/td>\n        <td id=\"file-markdown-js-LC910\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> len <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; len <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">url<\/span>.<span class=\"pl-c1\">length<\/span>; len<span class=\"pl-k\">++<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L911\" class=\"blob-num js-line-number\" data-line-number=\"911\"><\/td>\n        <td id=\"file-markdown-js-LC911\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">switch<\/span> ( url[len] ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L912\" class=\"blob-num js-line-number\" data-line-number=\"912\"><\/td>\n        <td id=\"file-markdown-js-LC912\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>(<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L913\" class=\"blob-num js-line-number\" data-line-number=\"913\"><\/td>\n        <td id=\"file-markdown-js-LC913\" class=\"blob-code blob-code-inner js-file-line\">              open_parens<span class=\"pl-k\">++<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L914\" class=\"blob-num js-line-number\" data-line-number=\"914\"><\/td>\n        <td id=\"file-markdown-js-LC914\" class=\"blob-code blob-code-inner js-file-line\">              <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L915\" class=\"blob-num js-line-number\" data-line-number=\"915\"><\/td>\n        <td id=\"file-markdown-js-LC915\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>)<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L916\" class=\"blob-num js-line-number\" data-line-number=\"916\"><\/td>\n        <td id=\"file-markdown-js-LC916\" class=\"blob-code blob-code-inner js-file-line\">              <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">--<\/span>open_parens <span class=\"pl-k\">==<\/span> <span class=\"pl-c1\">0<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L917\" class=\"blob-num js-line-number\" data-line-number=\"917\"><\/td>\n        <td id=\"file-markdown-js-LC917\" class=\"blob-code blob-code-inner js-file-line\">                consumed <span class=\"pl-k\">-=<\/span> <span class=\"pl-smi\">url<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> len;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L918\" class=\"blob-num js-line-number\" data-line-number=\"918\"><\/td>\n        <td id=\"file-markdown-js-LC918\" class=\"blob-code blob-code-inner js-file-line\">                url <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">url<\/span>.<span class=\"pl-c1\">substring<\/span>(<span class=\"pl-c1\">0<\/span>, len);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L919\" class=\"blob-num js-line-number\" data-line-number=\"919\"><\/td>\n        <td id=\"file-markdown-js-LC919\" class=\"blob-code blob-code-inner js-file-line\">              }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L920\" class=\"blob-num js-line-number\" data-line-number=\"920\"><\/td>\n        <td id=\"file-markdown-js-LC920\" class=\"blob-code blob-code-inner js-file-line\">              <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L921\" class=\"blob-num js-line-number\" data-line-number=\"921\"><\/td>\n        <td id=\"file-markdown-js-LC921\" class=\"blob-code blob-code-inner js-file-line\">            }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L922\" class=\"blob-num js-line-number\" data-line-number=\"922\"><\/td>\n        <td id=\"file-markdown-js-LC922\" class=\"blob-code blob-code-inner js-file-line\">          }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L923\" class=\"blob-num js-line-number\" data-line-number=\"923\"><\/td>\n        <td id=\"file-markdown-js-LC923\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L924\" class=\"blob-num js-line-number\" data-line-number=\"924\"><\/td>\n        <td id=\"file-markdown-js-LC924\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L925\" class=\"blob-num js-line-number\" data-line-number=\"925\"><\/td>\n        <td id=\"file-markdown-js-LC925\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Process escapes only<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L926\" class=\"blob-num js-line-number\" data-line-number=\"926\"><\/td>\n        <td id=\"file-markdown-js-LC926\" class=\"blob-code blob-code-inner js-file-line\">        url <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-smi\">inline<\/span>.<span class=\"pl-smi\">__call__<\/span>.<span class=\"pl-c1\">call<\/span>( <span class=\"pl-c1\">this<\/span>, url,<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-cce\">\\\\<\/span><span class=\"pl-pds\">/<\/span><\/span> )[<span class=\"pl-c1\">0<\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L927\" class=\"blob-num js-line-number\" data-line-number=\"927\"><\/td>\n        <td id=\"file-markdown-js-LC927\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L928\" class=\"blob-num js-line-number\" data-line-number=\"928\"><\/td>\n        <td id=\"file-markdown-js-LC928\" class=\"blob-code blob-code-inner js-file-line\">        attrs <span class=\"pl-k\">=<\/span> { href<span class=\"pl-k\">:<\/span> url <span class=\"pl-k\">||<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> };<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L929\" class=\"blob-num js-line-number\" data-line-number=\"929\"><\/td>\n        <td id=\"file-markdown-js-LC929\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">3<\/span>] <span class=\"pl-k\">!==<\/span> <span class=\"pl-c1\">undefined<\/span>)<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L930\" class=\"blob-num js-line-number\" data-line-number=\"930\"><\/td>\n        <td id=\"file-markdown-js-LC930\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-c1\">title<\/span> <span class=\"pl-k\">=<\/span> m[<span class=\"pl-c1\">3<\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L931\" class=\"blob-num js-line-number\" data-line-number=\"931\"><\/td>\n        <td id=\"file-markdown-js-LC931\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L932\" class=\"blob-num js-line-number\" data-line-number=\"932\"><\/td>\n        <td id=\"file-markdown-js-LC932\" class=\"blob-code blob-code-inner js-file-line\">        link <span class=\"pl-k\">=<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>link<span class=\"pl-pds\">&quot;<\/span><\/span>, attrs ].<span class=\"pl-c1\">concat<\/span>( children );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L933\" class=\"blob-num js-line-number\" data-line-number=\"933\"><\/td>\n        <td id=\"file-markdown-js-LC933\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ consumed, link ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L934\" class=\"blob-num js-line-number\" data-line-number=\"934\"><\/td>\n        <td id=\"file-markdown-js-LC934\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L935\" class=\"blob-num js-line-number\" data-line-number=\"935\"><\/td>\n        <td id=\"file-markdown-js-LC935\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L936\" class=\"blob-num js-line-number\" data-line-number=\"936\"><\/td>\n        <td id=\"file-markdown-js-LC936\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> [Alt text][id]<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L937\" class=\"blob-num js-line-number\" data-line-number=\"937\"><\/td>\n        <td id=\"file-markdown-js-LC937\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> [Alt text] [id]<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L938\" class=\"blob-num js-line-number\" data-line-number=\"938\"><\/td>\n        <td id=\"file-markdown-js-LC938\" class=\"blob-code blob-code-inner js-file-line\">      m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\[<\/span>(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-cce\">\\]<\/span><span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L939\" class=\"blob-num js-line-number\" data-line-number=\"939\"><\/td>\n        <td id=\"file-markdown-js-LC939\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L940\" class=\"blob-num js-line-number\" data-line-number=\"940\"><\/td>\n        <td id=\"file-markdown-js-LC940\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( m ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L941\" class=\"blob-num js-line-number\" data-line-number=\"941\"><\/td>\n        <td id=\"file-markdown-js-LC941\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L942\" class=\"blob-num js-line-number\" data-line-number=\"942\"><\/td>\n        <td id=\"file-markdown-js-LC942\" class=\"blob-code blob-code-inner js-file-line\">        consumed <span class=\"pl-k\">+=<\/span> m[ <span class=\"pl-c1\">0<\/span> ].<span class=\"pl-c1\">length<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L943\" class=\"blob-num js-line-number\" data-line-number=\"943\"><\/td>\n        <td id=\"file-markdown-js-LC943\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L944\" class=\"blob-num js-line-number\" data-line-number=\"944\"><\/td>\n        <td id=\"file-markdown-js-LC944\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> [links][] uses links as its reference<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L945\" class=\"blob-num js-line-number\" data-line-number=\"945\"><\/td>\n        <td id=\"file-markdown-js-LC945\" class=\"blob-code blob-code-inner js-file-line\">        attrs <span class=\"pl-k\">=<\/span> { ref<span class=\"pl-k\">:<\/span> ( m[ <span class=\"pl-c1\">1<\/span> ] <span class=\"pl-k\">||<\/span> <span class=\"pl-c1\">String<\/span>(children) ).<span class=\"pl-c1\">toLowerCase<\/span>(),  original<span class=\"pl-k\">:<\/span> <span class=\"pl-smi\">orig<\/span>.<span class=\"pl-c1\">substr<\/span>( <span class=\"pl-c1\">0<\/span>, consumed ) };<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L946\" class=\"blob-num js-line-number\" data-line-number=\"946\"><\/td>\n        <td id=\"file-markdown-js-LC946\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L947\" class=\"blob-num js-line-number\" data-line-number=\"947\"><\/td>\n        <td id=\"file-markdown-js-LC947\" class=\"blob-code blob-code-inner js-file-line\">        link <span class=\"pl-k\">=<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>link_ref<span class=\"pl-pds\">&quot;<\/span><\/span>, attrs ].<span class=\"pl-c1\">concat<\/span>( children );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L948\" class=\"blob-num js-line-number\" data-line-number=\"948\"><\/td>\n        <td id=\"file-markdown-js-LC948\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L949\" class=\"blob-num js-line-number\" data-line-number=\"949\"><\/td>\n        <td id=\"file-markdown-js-LC949\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> We can&#39;t check if the reference is known here as it likely wont be<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L950\" class=\"blob-num js-line-number\" data-line-number=\"950\"><\/td>\n        <td id=\"file-markdown-js-LC950\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> found till after. Check it in md tree-&gt;hmtl tree conversion.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L951\" class=\"blob-num js-line-number\" data-line-number=\"951\"><\/td>\n        <td id=\"file-markdown-js-LC951\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Store the original so that conversion can revert if the ref isn&#39;t found.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L952\" class=\"blob-num js-line-number\" data-line-number=\"952\"><\/td>\n        <td id=\"file-markdown-js-LC952\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ consumed, link ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L953\" class=\"blob-num js-line-number\" data-line-number=\"953\"><\/td>\n        <td id=\"file-markdown-js-LC953\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L954\" class=\"blob-num js-line-number\" data-line-number=\"954\"><\/td>\n        <td id=\"file-markdown-js-LC954\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L955\" class=\"blob-num js-line-number\" data-line-number=\"955\"><\/td>\n        <td id=\"file-markdown-js-LC955\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> [id]<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L956\" class=\"blob-num js-line-number\" data-line-number=\"956\"><\/td>\n        <td id=\"file-markdown-js-LC956\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Only if id is plain (no formatting.)<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L957\" class=\"blob-num js-line-number\" data-line-number=\"957\"><\/td>\n        <td id=\"file-markdown-js-LC957\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">children<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">==<\/span> <span class=\"pl-c1\">1<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">typeof<\/span> children[<span class=\"pl-c1\">0<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L958\" class=\"blob-num js-line-number\" data-line-number=\"958\"><\/td>\n        <td id=\"file-markdown-js-LC958\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L959\" class=\"blob-num js-line-number\" data-line-number=\"959\"><\/td>\n        <td id=\"file-markdown-js-LC959\" class=\"blob-code blob-code-inner js-file-line\">        attrs <span class=\"pl-k\">=<\/span> { ref<span class=\"pl-k\">:<\/span> children[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">toLowerCase<\/span>(),  original<span class=\"pl-k\">:<\/span> <span class=\"pl-smi\">orig<\/span>.<span class=\"pl-c1\">substr<\/span>( <span class=\"pl-c1\">0<\/span>, consumed ) };<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L960\" class=\"blob-num js-line-number\" data-line-number=\"960\"><\/td>\n        <td id=\"file-markdown-js-LC960\" class=\"blob-code blob-code-inner js-file-line\">        link <span class=\"pl-k\">=<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>link_ref<span class=\"pl-pds\">&quot;<\/span><\/span>, attrs, children[<span class=\"pl-c1\">0<\/span>] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L961\" class=\"blob-num js-line-number\" data-line-number=\"961\"><\/td>\n        <td id=\"file-markdown-js-LC961\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ consumed, link ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L962\" class=\"blob-num js-line-number\" data-line-number=\"962\"><\/td>\n        <td id=\"file-markdown-js-LC962\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L963\" class=\"blob-num js-line-number\" data-line-number=\"963\"><\/td>\n        <td id=\"file-markdown-js-LC963\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L964\" class=\"blob-num js-line-number\" data-line-number=\"964\"><\/td>\n        <td id=\"file-markdown-js-LC964\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Just consume the &quot;[&quot;<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L965\" class=\"blob-num js-line-number\" data-line-number=\"965\"><\/td>\n        <td id=\"file-markdown-js-LC965\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> [ <span class=\"pl-c1\">1<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>[<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L966\" class=\"blob-num js-line-number\" data-line-number=\"966\"><\/td>\n        <td id=\"file-markdown-js-LC966\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L967\" class=\"blob-num js-line-number\" data-line-number=\"967\"><\/td>\n        <td id=\"file-markdown-js-LC967\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L968\" class=\"blob-num js-line-number\" data-line-number=\"968\"><\/td>\n        <td id=\"file-markdown-js-LC968\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L969\" class=\"blob-num js-line-number\" data-line-number=\"969\"><\/td>\n        <td id=\"file-markdown-js-LC969\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-en\">&lt;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">autoLink<\/span>( <span class=\"pl-smi\">text<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L970\" class=\"blob-num js-line-number\" data-line-number=\"970\"><\/td>\n        <td id=\"file-markdown-js-LC970\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> m;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L971\" class=\"blob-num js-line-number\" data-line-number=\"971\"><\/td>\n        <td id=\"file-markdown-js-LC971\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L972\" class=\"blob-num js-line-number\" data-line-number=\"972\"><\/td>\n        <td id=\"file-markdown-js-LC972\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( ( m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>&lt;(?:((https<span class=\"pl-k\">?<\/span><span class=\"pl-k\">|<\/span>ftp<span class=\"pl-k\">|<\/span>mailto):<span class=\"pl-c1\">[<span class=\"pl-k\">^<\/span>&gt;]<\/span><span class=\"pl-k\">+<\/span>)<span class=\"pl-k\">|<\/span>(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span>@<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*?<\/span><span class=\"pl-cce\">\\.<\/span><span class=\"pl-c1\">[<span class=\"pl-c1\">a-zA-Z<\/span>]<\/span><span class=\"pl-k\">+<\/span>))&gt;<span class=\"pl-pds\">/<\/span><\/span> ) ) <span class=\"pl-k\">!=<\/span> <span class=\"pl-c1\">null<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L973\" class=\"blob-num js-line-number\" data-line-number=\"973\"><\/td>\n        <td id=\"file-markdown-js-LC973\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">3<\/span>] ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L974\" class=\"blob-num js-line-number\" data-line-number=\"974\"><\/td>\n        <td id=\"file-markdown-js-LC974\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">return<\/span> [ m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span>, [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>link<span class=\"pl-pds\">&quot;<\/span><\/span>, { href<span class=\"pl-k\">:<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>mailto:<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> m[<span class=\"pl-c1\">3<\/span>] }, m[<span class=\"pl-c1\">3<\/span>] ] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L975\" class=\"blob-num js-line-number\" data-line-number=\"975\"><\/td>\n        <td id=\"file-markdown-js-LC975\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L976\" class=\"blob-num js-line-number\" data-line-number=\"976\"><\/td>\n        <td id=\"file-markdown-js-LC976\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L977\" class=\"blob-num js-line-number\" data-line-number=\"977\"><\/td>\n        <td id=\"file-markdown-js-LC977\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else<\/span> <span class=\"pl-k\">if<\/span> ( m[<span class=\"pl-c1\">2<\/span>] <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>mailto<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L978\" class=\"blob-num js-line-number\" data-line-number=\"978\"><\/td>\n        <td id=\"file-markdown-js-LC978\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">return<\/span> [ m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span>, [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>link<span class=\"pl-pds\">&quot;<\/span><\/span>, { href<span class=\"pl-k\">:<\/span> m[<span class=\"pl-c1\">1<\/span>] }, m[<span class=\"pl-c1\">1<\/span>].<span class=\"pl-c1\">substr<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>mailto:<span class=\"pl-pds\">&quot;<\/span><\/span>.<span class=\"pl-c1\">length<\/span> ) ] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L979\" class=\"blob-num js-line-number\" data-line-number=\"979\"><\/td>\n        <td id=\"file-markdown-js-LC979\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L980\" class=\"blob-num js-line-number\" data-line-number=\"980\"><\/td>\n        <td id=\"file-markdown-js-LC980\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L981\" class=\"blob-num js-line-number\" data-line-number=\"981\"><\/td>\n        <td id=\"file-markdown-js-LC981\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-k\">return<\/span> [ m[<span class=\"pl-c1\">0<\/span>].<span class=\"pl-c1\">length<\/span>, [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>link<span class=\"pl-pds\">&quot;<\/span><\/span>, { href<span class=\"pl-k\">:<\/span> m[<span class=\"pl-c1\">1<\/span>] }, m[<span class=\"pl-c1\">1<\/span>] ] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L982\" class=\"blob-num js-line-number\" data-line-number=\"982\"><\/td>\n        <td id=\"file-markdown-js-LC982\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L983\" class=\"blob-num js-line-number\" data-line-number=\"983\"><\/td>\n        <td id=\"file-markdown-js-LC983\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L984\" class=\"blob-num js-line-number\" data-line-number=\"984\"><\/td>\n        <td id=\"file-markdown-js-LC984\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> [ <span class=\"pl-c1\">1<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&lt;<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L985\" class=\"blob-num js-line-number\" data-line-number=\"985\"><\/td>\n        <td id=\"file-markdown-js-LC985\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L986\" class=\"blob-num js-line-number\" data-line-number=\"986\"><\/td>\n        <td id=\"file-markdown-js-LC986\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L987\" class=\"blob-num js-line-number\" data-line-number=\"987\"><\/td>\n        <td id=\"file-markdown-js-LC987\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-en\">`<\/span><span class=\"pl-pds\">&quot;<\/span><\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">inlineCode<\/span>( <span class=\"pl-smi\">text<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L988\" class=\"blob-num js-line-number\" data-line-number=\"988\"><\/td>\n        <td id=\"file-markdown-js-LC988\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Inline code block. as many backticks as you like to start it<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L989\" class=\"blob-num js-line-number\" data-line-number=\"989\"><\/td>\n        <td id=\"file-markdown-js-LC989\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Always skip over the opening ticks.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L990\" class=\"blob-num js-line-number\" data-line-number=\"990\"><\/td>\n        <td id=\"file-markdown-js-LC990\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>(`<span class=\"pl-k\">+<\/span>)((<span class=\"pl-c1\">[<span class=\"pl-c1\">\\s\\S<\/span>]<\/span><span class=\"pl-k\">*?<\/span>)<span class=\"pl-k\">\\1<\/span>)<span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L991\" class=\"blob-num js-line-number\" data-line-number=\"991\"><\/td>\n        <td id=\"file-markdown-js-LC991\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L992\" class=\"blob-num js-line-number\" data-line-number=\"992\"><\/td>\n        <td id=\"file-markdown-js-LC992\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( m <span class=\"pl-k\">&amp;&amp;<\/span> m[<span class=\"pl-c1\">2<\/span>] )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L993\" class=\"blob-num js-line-number\" data-line-number=\"993\"><\/td>\n        <td id=\"file-markdown-js-LC993\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ m[<span class=\"pl-c1\">1<\/span>].<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">+<\/span> m[<span class=\"pl-c1\">2<\/span>].<span class=\"pl-c1\">length<\/span>, [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>inlinecode<span class=\"pl-pds\">&quot;<\/span><\/span>, m[<span class=\"pl-c1\">3<\/span>] ] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L994\" class=\"blob-num js-line-number\" data-line-number=\"994\"><\/td>\n        <td id=\"file-markdown-js-LC994\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L995\" class=\"blob-num js-line-number\" data-line-number=\"995\"><\/td>\n        <td id=\"file-markdown-js-LC995\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> TODO: No matching end code found - warn!<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L996\" class=\"blob-num js-line-number\" data-line-number=\"996\"><\/td>\n        <td id=\"file-markdown-js-LC996\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ <span class=\"pl-c1\">1<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>`<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L997\" class=\"blob-num js-line-number\" data-line-number=\"997\"><\/td>\n        <td id=\"file-markdown-js-LC997\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L998\" class=\"blob-num js-line-number\" data-line-number=\"998\"><\/td>\n        <td id=\"file-markdown-js-LC998\" class=\"blob-code blob-code-inner js-file-line\">    },<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L999\" class=\"blob-num js-line-number\" data-line-number=\"999\"><\/td>\n        <td id=\"file-markdown-js-LC999\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1000\" class=\"blob-num js-line-number\" data-line-number=\"1000\"><\/td>\n        <td id=\"file-markdown-js-LC1000\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-en\">  \\n<\/span><span class=\"pl-pds\">&quot;<\/span><\/span><span class=\"pl-k\">:<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">lineBreak<\/span>( <span class=\"pl-smi\">text<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1001\" class=\"blob-num js-line-number\" data-line-number=\"1001\"><\/td>\n        <td id=\"file-markdown-js-LC1001\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> [ <span class=\"pl-c1\">3<\/span>, [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>linebreak<span class=\"pl-pds\">&quot;<\/span><\/span> ] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1002\" class=\"blob-num js-line-number\" data-line-number=\"1002\"><\/td>\n        <td id=\"file-markdown-js-LC1002\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1003\" class=\"blob-num js-line-number\" data-line-number=\"1003\"><\/td>\n        <td id=\"file-markdown-js-LC1003\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1004\" class=\"blob-num js-line-number\" data-line-number=\"1004\"><\/td>\n        <td id=\"file-markdown-js-LC1004\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1005\" class=\"blob-num js-line-number\" data-line-number=\"1005\"><\/td>\n        <td id=\"file-markdown-js-LC1005\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1006\" class=\"blob-num js-line-number\" data-line-number=\"1006\"><\/td>\n        <td id=\"file-markdown-js-LC1006\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Meta Helper/generator method for em and strong handling<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1007\" class=\"blob-num js-line-number\" data-line-number=\"1007\"><\/td>\n        <td id=\"file-markdown-js-LC1007\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">function<\/span> <span class=\"pl-en\">strong_em<\/span>( <span class=\"pl-smi\">tag<\/span>, <span class=\"pl-smi\">md<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1008\" class=\"blob-num js-line-number\" data-line-number=\"1008\"><\/td>\n        <td id=\"file-markdown-js-LC1008\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1009\" class=\"blob-num js-line-number\" data-line-number=\"1009\"><\/td>\n        <td id=\"file-markdown-js-LC1009\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> state_slot <span class=\"pl-k\">=<\/span> tag <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>_state<span class=\"pl-pds\">&quot;<\/span><\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1010\" class=\"blob-num js-line-number\" data-line-number=\"1010\"><\/td>\n        <td id=\"file-markdown-js-LC1010\" class=\"blob-code blob-code-inner js-file-line\">      other_slot <span class=\"pl-k\">=<\/span> tag <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>strong<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">?<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>em_state<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">:<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>strong_state<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1011\" class=\"blob-num js-line-number\" data-line-number=\"1011\"><\/td>\n        <td id=\"file-markdown-js-LC1011\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1012\" class=\"blob-num js-line-number\" data-line-number=\"1012\"><\/td>\n        <td id=\"file-markdown-js-LC1012\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">CloseTag<\/span>(<span class=\"pl-smi\">len<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1013\" class=\"blob-num js-line-number\" data-line-number=\"1013\"><\/td>\n        <td id=\"file-markdown-js-LC1013\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">len_after<\/span> <span class=\"pl-k\">=<\/span> len;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1014\" class=\"blob-num js-line-number\" data-line-number=\"1014\"><\/td>\n        <td id=\"file-markdown-js-LC1014\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c1\">this<\/span>.<span class=\"pl-c1\">name<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>close_<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> md;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1015\" class=\"blob-num js-line-number\" data-line-number=\"1015\"><\/td>\n        <td id=\"file-markdown-js-LC1015\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1016\" class=\"blob-num js-line-number\" data-line-number=\"1016\"><\/td>\n        <td id=\"file-markdown-js-LC1016\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1017\" class=\"blob-num js-line-number\" data-line-number=\"1017\"><\/td>\n        <td id=\"file-markdown-js-LC1017\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> <span class=\"pl-k\">function<\/span> ( <span class=\"pl-smi\">text<\/span>, <span class=\"pl-smi\">orig_match<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1018\" class=\"blob-num js-line-number\" data-line-number=\"1018\"><\/td>\n        <td id=\"file-markdown-js-LC1018\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1019\" class=\"blob-num js-line-number\" data-line-number=\"1019\"><\/td>\n        <td id=\"file-markdown-js-LC1019\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( <span class=\"pl-c1\">this<\/span>[state_slot][<span class=\"pl-c1\">0<\/span>] <span class=\"pl-k\">==<\/span> md ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1020\" class=\"blob-num js-line-number\" data-line-number=\"1020\"><\/td>\n        <td id=\"file-markdown-js-LC1020\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Most recent em is of this type<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1021\" class=\"blob-num js-line-number\" data-line-number=\"1021\"><\/td>\n        <td id=\"file-markdown-js-LC1021\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>D:this.debug(&quot;closing&quot;, md);<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1022\" class=\"blob-num js-line-number\" data-line-number=\"1022\"><\/td>\n        <td id=\"file-markdown-js-LC1022\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c1\">this<\/span>[state_slot].<span class=\"pl-c1\">shift<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1023\" class=\"blob-num js-line-number\" data-line-number=\"1023\"><\/td>\n        <td id=\"file-markdown-js-LC1023\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1024\" class=\"blob-num js-line-number\" data-line-number=\"1024\"><\/td>\n        <td id=\"file-markdown-js-LC1024\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> &quot;Consume&quot; everything to go back to the recrusion in the else-block below<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1025\" class=\"blob-num js-line-number\" data-line-number=\"1025\"><\/td>\n        <td id=\"file-markdown-js-LC1025\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span>[ <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">length<\/span>, <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">CloseTag<\/span>(<span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">length<\/span><span class=\"pl-k\">-<\/span><span class=\"pl-smi\">md<\/span>.<span class=\"pl-c1\">length<\/span>) ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1026\" class=\"blob-num js-line-number\" data-line-number=\"1026\"><\/td>\n        <td id=\"file-markdown-js-LC1026\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1027\" class=\"blob-num js-line-number\" data-line-number=\"1027\"><\/td>\n        <td id=\"file-markdown-js-LC1027\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1028\" class=\"blob-num js-line-number\" data-line-number=\"1028\"><\/td>\n        <td id=\"file-markdown-js-LC1028\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Store a clone of the em/strong states<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1029\" class=\"blob-num js-line-number\" data-line-number=\"1029\"><\/td>\n        <td id=\"file-markdown-js-LC1029\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> other <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>[other_slot].<span class=\"pl-c1\">slice<\/span>(),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1030\" class=\"blob-num js-line-number\" data-line-number=\"1030\"><\/td>\n        <td id=\"file-markdown-js-LC1030\" class=\"blob-code blob-code-inner js-file-line\">          state <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>[state_slot].<span class=\"pl-c1\">slice<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1031\" class=\"blob-num js-line-number\" data-line-number=\"1031\"><\/td>\n        <td id=\"file-markdown-js-LC1031\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1032\" class=\"blob-num js-line-number\" data-line-number=\"1032\"><\/td>\n        <td id=\"file-markdown-js-LC1032\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c1\">this<\/span>[state_slot].<span class=\"pl-c1\">unshift<\/span>(md);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1033\" class=\"blob-num js-line-number\" data-line-number=\"1033\"><\/td>\n        <td id=\"file-markdown-js-LC1033\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1034\" class=\"blob-num js-line-number\" data-line-number=\"1034\"><\/td>\n        <td id=\"file-markdown-js-LC1034\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>D:this.debug_indent += &quot;  &quot;;<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1035\" class=\"blob-num js-line-number\" data-line-number=\"1035\"><\/td>\n        <td id=\"file-markdown-js-LC1035\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1036\" class=\"blob-num js-line-number\" data-line-number=\"1036\"><\/td>\n        <td id=\"file-markdown-js-LC1036\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Recurse<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1037\" class=\"blob-num js-line-number\" data-line-number=\"1037\"><\/td>\n        <td id=\"file-markdown-js-LC1037\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> res <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processInline<\/span>( <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">substr<\/span>( <span class=\"pl-smi\">md<\/span>.<span class=\"pl-c1\">length<\/span> ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1038\" class=\"blob-num js-line-number\" data-line-number=\"1038\"><\/td>\n        <td id=\"file-markdown-js-LC1038\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>D:this.debug_indent = this.debug_indent.substr(2);<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1039\" class=\"blob-num js-line-number\" data-line-number=\"1039\"><\/td>\n        <td id=\"file-markdown-js-LC1039\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1040\" class=\"blob-num js-line-number\" data-line-number=\"1040\"><\/td>\n        <td id=\"file-markdown-js-LC1040\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> last <span class=\"pl-k\">=<\/span> res[<span class=\"pl-smi\">res<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-c1\">1<\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1041\" class=\"blob-num js-line-number\" data-line-number=\"1041\"><\/td>\n        <td id=\"file-markdown-js-LC1041\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1042\" class=\"blob-num js-line-number\" data-line-number=\"1042\"><\/td>\n        <td id=\"file-markdown-js-LC1042\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>D:this.debug(&quot;processInline from&quot;, tag + &quot;: &quot;, uneval( res ) );<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1043\" class=\"blob-num js-line-number\" data-line-number=\"1043\"><\/td>\n        <td id=\"file-markdown-js-LC1043\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1044\" class=\"blob-num js-line-number\" data-line-number=\"1044\"><\/td>\n        <td id=\"file-markdown-js-LC1044\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> check <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>[state_slot].<span class=\"pl-c1\">shift<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1045\" class=\"blob-num js-line-number\" data-line-number=\"1045\"><\/td>\n        <td id=\"file-markdown-js-LC1045\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( last <span class=\"pl-k\">instanceof<\/span> CloseTag ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1046\" class=\"blob-num js-line-number\" data-line-number=\"1046\"><\/td>\n        <td id=\"file-markdown-js-LC1046\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">res<\/span>.<span class=\"pl-c1\">pop<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1047\" class=\"blob-num js-line-number\" data-line-number=\"1047\"><\/td>\n        <td id=\"file-markdown-js-LC1047\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> We matched! Huzzah.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1048\" class=\"blob-num js-line-number\" data-line-number=\"1048\"><\/td>\n        <td id=\"file-markdown-js-LC1048\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> consumed <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-smi\">last<\/span>.<span class=\"pl-smi\">len_after<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1049\" class=\"blob-num js-line-number\" data-line-number=\"1049\"><\/td>\n        <td id=\"file-markdown-js-LC1049\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ consumed, [ tag ].<span class=\"pl-c1\">concat<\/span>(res) ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1050\" class=\"blob-num js-line-number\" data-line-number=\"1050\"><\/td>\n        <td id=\"file-markdown-js-LC1050\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1051\" class=\"blob-num js-line-number\" data-line-number=\"1051\"><\/td>\n        <td id=\"file-markdown-js-LC1051\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1052\" class=\"blob-num js-line-number\" data-line-number=\"1052\"><\/td>\n        <td id=\"file-markdown-js-LC1052\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Restore the state of the other kind. We might have mistakenly closed it.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1053\" class=\"blob-num js-line-number\" data-line-number=\"1053\"><\/td>\n        <td id=\"file-markdown-js-LC1053\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">this<\/span>[other_slot] <span class=\"pl-k\">=<\/span> other;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1054\" class=\"blob-num js-line-number\" data-line-number=\"1054\"><\/td>\n        <td id=\"file-markdown-js-LC1054\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">this<\/span>[state_slot] <span class=\"pl-k\">=<\/span> state;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1055\" class=\"blob-num js-line-number\" data-line-number=\"1055\"><\/td>\n        <td id=\"file-markdown-js-LC1055\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1056\" class=\"blob-num js-line-number\" data-line-number=\"1056\"><\/td>\n        <td id=\"file-markdown-js-LC1056\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> We can&#39;t reuse the processed result as it could have wrong parsing contexts in it.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1057\" class=\"blob-num js-line-number\" data-line-number=\"1057\"><\/td>\n        <td id=\"file-markdown-js-LC1057\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> [ <span class=\"pl-smi\">md<\/span>.<span class=\"pl-c1\">length<\/span>, md ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1058\" class=\"blob-num js-line-number\" data-line-number=\"1058\"><\/td>\n        <td id=\"file-markdown-js-LC1058\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1059\" class=\"blob-num js-line-number\" data-line-number=\"1059\"><\/td>\n        <td id=\"file-markdown-js-LC1059\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1060\" class=\"blob-num js-line-number\" data-line-number=\"1060\"><\/td>\n        <td id=\"file-markdown-js-LC1060\" class=\"blob-code blob-code-inner js-file-line\">  }; <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> End returned function<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1061\" class=\"blob-num js-line-number\" data-line-number=\"1061\"><\/td>\n        <td id=\"file-markdown-js-LC1061\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1062\" class=\"blob-num js-line-number\" data-line-number=\"1062\"><\/td>\n        <td id=\"file-markdown-js-LC1062\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1063\" class=\"blob-num js-line-number\" data-line-number=\"1063\"><\/td>\n        <td id=\"file-markdown-js-LC1063\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Gruber<\/span>.<span class=\"pl-smi\">inline<\/span>[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>**<span class=\"pl-pds\">&quot;<\/span><\/span>] <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">strong_em<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>strong<span class=\"pl-pds\">&quot;<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>**<span class=\"pl-pds\">&quot;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1064\" class=\"blob-num js-line-number\" data-line-number=\"1064\"><\/td>\n        <td id=\"file-markdown-js-LC1064\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Gruber<\/span>.<span class=\"pl-smi\">inline<\/span>[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>__<span class=\"pl-pds\">&quot;<\/span><\/span>] <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">strong_em<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>strong<span class=\"pl-pds\">&quot;<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>__<span class=\"pl-pds\">&quot;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1065\" class=\"blob-num js-line-number\" data-line-number=\"1065\"><\/td>\n        <td id=\"file-markdown-js-LC1065\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Gruber<\/span>.<span class=\"pl-smi\">inline<\/span>[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>*<span class=\"pl-pds\">&quot;<\/span><\/span>]  <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">strong_em<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>em<span class=\"pl-pds\">&quot;<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>*<span class=\"pl-pds\">&quot;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1066\" class=\"blob-num js-line-number\" data-line-number=\"1066\"><\/td>\n        <td id=\"file-markdown-js-LC1066\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Gruber<\/span>.<span class=\"pl-smi\">inline<\/span>[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>_<span class=\"pl-pds\">&quot;<\/span><\/span>]  <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">strong_em<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>em<span class=\"pl-pds\">&quot;<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>_<span class=\"pl-pds\">&quot;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1067\" class=\"blob-num js-line-number\" data-line-number=\"1067\"><\/td>\n        <td id=\"file-markdown-js-LC1067\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1068\" class=\"blob-num js-line-number\" data-line-number=\"1068\"><\/td>\n        <td id=\"file-markdown-js-LC1068\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1069\" class=\"blob-num js-line-number\" data-line-number=\"1069\"><\/td>\n        <td id=\"file-markdown-js-LC1069\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Build default order from insertion order.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1070\" class=\"blob-num js-line-number\" data-line-number=\"1070\"><\/td>\n        <td id=\"file-markdown-js-LC1070\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-en\">buildBlockOrder<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>(<span class=\"pl-smi\">d<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1071\" class=\"blob-num js-line-number\" data-line-number=\"1071\"><\/td>\n        <td id=\"file-markdown-js-LC1071\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> ord <span class=\"pl-k\">=<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1072\" class=\"blob-num js-line-number\" data-line-number=\"1072\"><\/td>\n        <td id=\"file-markdown-js-LC1072\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> i <span class=\"pl-k\">in<\/span> d ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1073\" class=\"blob-num js-line-number\" data-line-number=\"1073\"><\/td>\n        <td id=\"file-markdown-js-LC1073\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( i <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>__order__<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">||<\/span> i <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>__call__<span class=\"pl-pds\">&quot;<\/span><\/span> ) <span class=\"pl-k\">continue<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1074\" class=\"blob-num js-line-number\" data-line-number=\"1074\"><\/td>\n        <td id=\"file-markdown-js-LC1074\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">ord<\/span>.<span class=\"pl-c1\">push<\/span>( i );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1075\" class=\"blob-num js-line-number\" data-line-number=\"1075\"><\/td>\n        <td id=\"file-markdown-js-LC1075\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1076\" class=\"blob-num js-line-number\" data-line-number=\"1076\"><\/td>\n        <td id=\"file-markdown-js-LC1076\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">d<\/span>.<span class=\"pl-smi\">__order__<\/span> <span class=\"pl-k\">=<\/span> ord;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1077\" class=\"blob-num js-line-number\" data-line-number=\"1077\"><\/td>\n        <td id=\"file-markdown-js-LC1077\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1078\" class=\"blob-num js-line-number\" data-line-number=\"1078\"><\/td>\n        <td id=\"file-markdown-js-LC1078\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1079\" class=\"blob-num js-line-number\" data-line-number=\"1079\"><\/td>\n        <td id=\"file-markdown-js-LC1079\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Build patterns for inline matcher<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1080\" class=\"blob-num js-line-number\" data-line-number=\"1080\"><\/td>\n        <td id=\"file-markdown-js-LC1080\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-en\">buildInlinePatterns<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>(<span class=\"pl-smi\">d<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1081\" class=\"blob-num js-line-number\" data-line-number=\"1081\"><\/td>\n        <td id=\"file-markdown-js-LC1081\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> patterns <span class=\"pl-k\">=<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1082\" class=\"blob-num js-line-number\" data-line-number=\"1082\"><\/td>\n        <td id=\"file-markdown-js-LC1082\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1083\" class=\"blob-num js-line-number\" data-line-number=\"1083\"><\/td>\n        <td id=\"file-markdown-js-LC1083\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> i <span class=\"pl-k\">in<\/span> d ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1084\" class=\"blob-num js-line-number\" data-line-number=\"1084\"><\/td>\n        <td id=\"file-markdown-js-LC1084\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> __foo__ is reserved and not a pattern<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1085\" class=\"blob-num js-line-number\" data-line-number=\"1085\"><\/td>\n        <td id=\"file-markdown-js-LC1085\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">i<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>__<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*<\/span>__<span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span>) ) <span class=\"pl-k\">continue<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1086\" class=\"blob-num js-line-number\" data-line-number=\"1086\"><\/td>\n        <td id=\"file-markdown-js-LC1086\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">var<\/span> l <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">i<\/span>.<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>(<span class=\"pl-c1\">[<span class=\"pl-cce\">\\\\<\/span><span class=\"pl-c1\">.<\/span>*+?|()<span class=\"pl-cce\">\\[\\]<\/span>{}]<\/span>)<span class=\"pl-pds\">/<\/span>g<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\\\<\/span>$1<span class=\"pl-pds\">&quot;<\/span><\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1087\" class=\"blob-num js-line-number\" data-line-number=\"1087\"><\/td>\n        <td id=\"file-markdown-js-LC1087\" class=\"blob-code blob-code-inner js-file-line\">             .<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-c1\">\\n<\/span><span class=\"pl-pds\">/<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\\\<\/span>n<span class=\"pl-pds\">&quot;<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1088\" class=\"blob-num js-line-number\" data-line-number=\"1088\"><\/td>\n        <td id=\"file-markdown-js-LC1088\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">patterns<\/span>.<span class=\"pl-c1\">push<\/span>( <span class=\"pl-smi\">i<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">==<\/span> <span class=\"pl-c1\">1<\/span> <span class=\"pl-k\">?<\/span> l <span class=\"pl-k\">:<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>(?:<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> l <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>)<span class=\"pl-pds\">&quot;<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1089\" class=\"blob-num js-line-number\" data-line-number=\"1089\"><\/td>\n        <td id=\"file-markdown-js-LC1089\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1090\" class=\"blob-num js-line-number\" data-line-number=\"1090\"><\/td>\n        <td id=\"file-markdown-js-LC1090\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1091\" class=\"blob-num js-line-number\" data-line-number=\"1091\"><\/td>\n        <td id=\"file-markdown-js-LC1091\" class=\"blob-code blob-code-inner js-file-line\">  patterns <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">patterns<\/span>.<span class=\"pl-c1\">join<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>|<span class=\"pl-pds\">&quot;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1092\" class=\"blob-num js-line-number\" data-line-number=\"1092\"><\/td>\n        <td id=\"file-markdown-js-LC1092\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">d<\/span>.<span class=\"pl-smi\">__patterns__<\/span> <span class=\"pl-k\">=<\/span> patterns;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1093\" class=\"blob-num js-line-number\" data-line-number=\"1093\"><\/td>\n        <td id=\"file-markdown-js-LC1093\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span>print(&quot;patterns:&quot;, uneval( patterns ) );<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1094\" class=\"blob-num js-line-number\" data-line-number=\"1094\"><\/td>\n        <td id=\"file-markdown-js-LC1094\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1095\" class=\"blob-num js-line-number\" data-line-number=\"1095\"><\/td>\n        <td id=\"file-markdown-js-LC1095\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> fn <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">d<\/span>.<span class=\"pl-smi\">__call__<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1096\" class=\"blob-num js-line-number\" data-line-number=\"1096\"><\/td>\n        <td id=\"file-markdown-js-LC1096\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">d<\/span>.<span class=\"pl-en\">__call__<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>(<span class=\"pl-smi\">text<\/span>, <span class=\"pl-smi\">pattern<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1097\" class=\"blob-num js-line-number\" data-line-number=\"1097\"><\/td>\n        <td id=\"file-markdown-js-LC1097\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( pattern <span class=\"pl-k\">!=<\/span> <span class=\"pl-c1\">undefined<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1098\" class=\"blob-num js-line-number\" data-line-number=\"1098\"><\/td>\n        <td id=\"file-markdown-js-LC1098\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> <span class=\"pl-smi\">fn<\/span>.<span class=\"pl-c1\">call<\/span>(<span class=\"pl-c1\">this<\/span>, text, pattern);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1099\" class=\"blob-num js-line-number\" data-line-number=\"1099\"><\/td>\n        <td id=\"file-markdown-js-LC1099\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1100\" class=\"blob-num js-line-number\" data-line-number=\"1100\"><\/td>\n        <td id=\"file-markdown-js-LC1100\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">else<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1101\" class=\"blob-num js-line-number\" data-line-number=\"1101\"><\/td>\n        <td id=\"file-markdown-js-LC1101\" class=\"blob-code blob-code-inner js-file-line\">    {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1102\" class=\"blob-num js-line-number\" data-line-number=\"1102\"><\/td>\n        <td id=\"file-markdown-js-LC1102\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> <span class=\"pl-smi\">fn<\/span>.<span class=\"pl-c1\">call<\/span>(<span class=\"pl-c1\">this<\/span>, text, patterns);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1103\" class=\"blob-num js-line-number\" data-line-number=\"1103\"><\/td>\n        <td id=\"file-markdown-js-LC1103\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1104\" class=\"blob-num js-line-number\" data-line-number=\"1104\"><\/td>\n        <td id=\"file-markdown-js-LC1104\" class=\"blob-code blob-code-inner js-file-line\">  };<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1105\" class=\"blob-num js-line-number\" data-line-number=\"1105\"><\/td>\n        <td id=\"file-markdown-js-LC1105\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1106\" class=\"blob-num js-line-number\" data-line-number=\"1106\"><\/td>\n        <td id=\"file-markdown-js-LC1106\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1107\" class=\"blob-num js-line-number\" data-line-number=\"1107\"><\/td>\n        <td id=\"file-markdown-js-LC1107\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">DialectHelpers<\/span> <span class=\"pl-k\">=<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1108\" class=\"blob-num js-line-number\" data-line-number=\"1108\"><\/td>\n        <td id=\"file-markdown-js-LC1108\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">DialectHelpers<\/span>.<span class=\"pl-en\">inline_until_char<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>( <span class=\"pl-smi\">text<\/span>, <span class=\"pl-smi\">want<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1109\" class=\"blob-num js-line-number\" data-line-number=\"1109\"><\/td>\n        <td id=\"file-markdown-js-LC1109\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> consumed <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1110\" class=\"blob-num js-line-number\" data-line-number=\"1110\"><\/td>\n        <td id=\"file-markdown-js-LC1110\" class=\"blob-code blob-code-inner js-file-line\">      nodes <span class=\"pl-k\">=<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1111\" class=\"blob-num js-line-number\" data-line-number=\"1111\"><\/td>\n        <td id=\"file-markdown-js-LC1111\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1112\" class=\"blob-num js-line-number\" data-line-number=\"1112\"><\/td>\n        <td id=\"file-markdown-js-LC1112\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">while<\/span> ( <span class=\"pl-c1\">true<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1113\" class=\"blob-num js-line-number\" data-line-number=\"1113\"><\/td>\n        <td id=\"file-markdown-js-LC1113\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">charAt<\/span>( consumed ) <span class=\"pl-k\">==<\/span> want ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1114\" class=\"blob-num js-line-number\" data-line-number=\"1114\"><\/td>\n        <td id=\"file-markdown-js-LC1114\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Found the character we were looking for<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1115\" class=\"blob-num js-line-number\" data-line-number=\"1115\"><\/td>\n        <td id=\"file-markdown-js-LC1115\" class=\"blob-code blob-code-inner js-file-line\">      consumed<span class=\"pl-k\">++<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1116\" class=\"blob-num js-line-number\" data-line-number=\"1116\"><\/td>\n        <td id=\"file-markdown-js-LC1116\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> [ consumed, nodes ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1117\" class=\"blob-num js-line-number\" data-line-number=\"1117\"><\/td>\n        <td id=\"file-markdown-js-LC1117\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1118\" class=\"blob-num js-line-number\" data-line-number=\"1118\"><\/td>\n        <td id=\"file-markdown-js-LC1118\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1119\" class=\"blob-num js-line-number\" data-line-number=\"1119\"><\/td>\n        <td id=\"file-markdown-js-LC1119\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( consumed <span class=\"pl-k\">&gt;=<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1120\" class=\"blob-num js-line-number\" data-line-number=\"1120\"><\/td>\n        <td id=\"file-markdown-js-LC1120\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> No closing char found. Abort.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1121\" class=\"blob-num js-line-number\" data-line-number=\"1121\"><\/td>\n        <td id=\"file-markdown-js-LC1121\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">null<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1122\" class=\"blob-num js-line-number\" data-line-number=\"1122\"><\/td>\n        <td id=\"file-markdown-js-LC1122\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1123\" class=\"blob-num js-line-number\" data-line-number=\"1123\"><\/td>\n        <td id=\"file-markdown-js-LC1123\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1124\" class=\"blob-num js-line-number\" data-line-number=\"1124\"><\/td>\n        <td id=\"file-markdown-js-LC1124\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">var<\/span> res <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-smi\">inline<\/span>.<span class=\"pl-smi\">__oneElement__<\/span>.<span class=\"pl-c1\">call<\/span>(<span class=\"pl-c1\">this<\/span>, <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">substr<\/span>( consumed ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1125\" class=\"blob-num js-line-number\" data-line-number=\"1125\"><\/td>\n        <td id=\"file-markdown-js-LC1125\" class=\"blob-code blob-code-inner js-file-line\">    consumed <span class=\"pl-k\">+=<\/span> res[ <span class=\"pl-c1\">0<\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1126\" class=\"blob-num js-line-number\" data-line-number=\"1126\"><\/td>\n        <td id=\"file-markdown-js-LC1126\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Add any returned nodes.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1127\" class=\"blob-num js-line-number\" data-line-number=\"1127\"><\/td>\n        <td id=\"file-markdown-js-LC1127\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">nodes<\/span>.<span class=\"pl-smi\">push<\/span>.<span class=\"pl-c1\">apply<\/span>( nodes, <span class=\"pl-smi\">res<\/span>.<span class=\"pl-c1\">slice<\/span>( <span class=\"pl-c1\">1<\/span> ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1128\" class=\"blob-num js-line-number\" data-line-number=\"1128\"><\/td>\n        <td id=\"file-markdown-js-LC1128\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1129\" class=\"blob-num js-line-number\" data-line-number=\"1129\"><\/td>\n        <td id=\"file-markdown-js-LC1129\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1130\" class=\"blob-num js-line-number\" data-line-number=\"1130\"><\/td>\n        <td id=\"file-markdown-js-LC1130\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1131\" class=\"blob-num js-line-number\" data-line-number=\"1131\"><\/td>\n        <td id=\"file-markdown-js-LC1131\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Helper function to make sub-classing a dialect easier<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1132\" class=\"blob-num js-line-number\" data-line-number=\"1132\"><\/td>\n        <td id=\"file-markdown-js-LC1132\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-en\">subclassDialect<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>( <span class=\"pl-smi\">d<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1133\" class=\"blob-num js-line-number\" data-line-number=\"1133\"><\/td>\n        <td id=\"file-markdown-js-LC1133\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">Block<\/span>() {}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1134\" class=\"blob-num js-line-number\" data-line-number=\"1134\"><\/td>\n        <td id=\"file-markdown-js-LC1134\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">Block<\/span>.<span class=\"pl-c1\">prototype<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">d<\/span>.<span class=\"pl-smi\">block<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1135\" class=\"blob-num js-line-number\" data-line-number=\"1135\"><\/td>\n        <td id=\"file-markdown-js-LC1135\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">Inline<\/span>() {}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1136\" class=\"blob-num js-line-number\" data-line-number=\"1136\"><\/td>\n        <td id=\"file-markdown-js-LC1136\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">Inline<\/span>.<span class=\"pl-c1\">prototype<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">d<\/span>.<span class=\"pl-smi\">inline<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1137\" class=\"blob-num js-line-number\" data-line-number=\"1137\"><\/td>\n        <td id=\"file-markdown-js-LC1137\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1138\" class=\"blob-num js-line-number\" data-line-number=\"1138\"><\/td>\n        <td id=\"file-markdown-js-LC1138\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> { block<span class=\"pl-k\">:<\/span> <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">Block<\/span>(), inline<span class=\"pl-k\">:<\/span> <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">Inline<\/span>() };<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1139\" class=\"blob-num js-line-number\" data-line-number=\"1139\"><\/td>\n        <td id=\"file-markdown-js-LC1139\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1140\" class=\"blob-num js-line-number\" data-line-number=\"1140\"><\/td>\n        <td id=\"file-markdown-js-LC1140\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1141\" class=\"blob-num js-line-number\" data-line-number=\"1141\"><\/td>\n        <td id=\"file-markdown-js-LC1141\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-en\">buildBlockOrder<\/span> ( <span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Gruber<\/span>.<span class=\"pl-smi\">block<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1142\" class=\"blob-num js-line-number\" data-line-number=\"1142\"><\/td>\n        <td id=\"file-markdown-js-LC1142\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-en\">buildInlinePatterns<\/span>( <span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Gruber<\/span>.<span class=\"pl-smi\">inline<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1143\" class=\"blob-num js-line-number\" data-line-number=\"1143\"><\/td>\n        <td id=\"file-markdown-js-LC1143\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1144\" class=\"blob-num js-line-number\" data-line-number=\"1144\"><\/td>\n        <td id=\"file-markdown-js-LC1144\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Maruku<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-en\">subclassDialect<\/span>( <span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Gruber<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1145\" class=\"blob-num js-line-number\" data-line-number=\"1145\"><\/td>\n        <td id=\"file-markdown-js-LC1145\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1146\" class=\"blob-num js-line-number\" data-line-number=\"1146\"><\/td>\n        <td id=\"file-markdown-js-LC1146\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Maruku<\/span>.<span class=\"pl-en\">processMetaHash<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">processMetaHash<\/span>( <span class=\"pl-smi\">meta_string<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1147\" class=\"blob-num js-line-number\" data-line-number=\"1147\"><\/td>\n        <td id=\"file-markdown-js-LC1147\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> meta <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">split_meta_hash<\/span>( meta_string ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1148\" class=\"blob-num js-line-number\" data-line-number=\"1148\"><\/td>\n        <td id=\"file-markdown-js-LC1148\" class=\"blob-code blob-code-inner js-file-line\">      attr <span class=\"pl-k\">=<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1149\" class=\"blob-num js-line-number\" data-line-number=\"1149\"><\/td>\n        <td id=\"file-markdown-js-LC1149\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1150\" class=\"blob-num js-line-number\" data-line-number=\"1150\"><\/td>\n        <td id=\"file-markdown-js-LC1150\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> i <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; i <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">meta<\/span>.<span class=\"pl-c1\">length<\/span>; <span class=\"pl-k\">++<\/span>i ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1151\" class=\"blob-num js-line-number\" data-line-number=\"1151\"><\/td>\n        <td id=\"file-markdown-js-LC1151\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> id: #foo<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1152\" class=\"blob-num js-line-number\" data-line-number=\"1152\"><\/td>\n        <td id=\"file-markdown-js-LC1152\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> (<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>#<span class=\"pl-pds\">/<\/span><\/span>.<span class=\"pl-c1\">test<\/span>( meta[ i ] ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1153\" class=\"blob-num js-line-number\" data-line-number=\"1153\"><\/td>\n        <td id=\"file-markdown-js-LC1153\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-smi\">attr<\/span>.<span class=\"pl-c1\">id<\/span> <span class=\"pl-k\">=<\/span> meta[ i ].<span class=\"pl-c1\">substring<\/span>( <span class=\"pl-c1\">1<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1154\" class=\"blob-num js-line-number\" data-line-number=\"1154\"><\/td>\n        <td id=\"file-markdown-js-LC1154\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1155\" class=\"blob-num js-line-number\" data-line-number=\"1155\"><\/td>\n        <td id=\"file-markdown-js-LC1155\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> class: .foo<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1156\" class=\"blob-num js-line-number\" data-line-number=\"1156\"><\/td>\n        <td id=\"file-markdown-js-LC1156\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">else<\/span> <span class=\"pl-k\">if<\/span> (<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-cce\">\\.<\/span><span class=\"pl-pds\">/<\/span><\/span>.<span class=\"pl-c1\">test<\/span>( meta[ i ] ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1157\" class=\"blob-num js-line-number\" data-line-number=\"1157\"><\/td>\n        <td id=\"file-markdown-js-LC1157\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if class already exists, append the new one<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1158\" class=\"blob-num js-line-number\" data-line-number=\"1158\"><\/td>\n        <td id=\"file-markdown-js-LC1158\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( attr[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>class<span class=\"pl-pds\">&quot;<\/span><\/span>] ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1159\" class=\"blob-num js-line-number\" data-line-number=\"1159\"><\/td>\n        <td id=\"file-markdown-js-LC1159\" class=\"blob-code blob-code-inner js-file-line\">        attr[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>class<span class=\"pl-pds\">&quot;<\/span><\/span>] <span class=\"pl-k\">=<\/span> attr[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>class<span class=\"pl-pds\">&quot;<\/span><\/span>] <span class=\"pl-k\">+<\/span> meta[ i ].<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-c1\">.<\/span><span class=\"pl-pds\">/<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span> <span class=\"pl-pds\">&quot;<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1160\" class=\"blob-num js-line-number\" data-line-number=\"1160\"><\/td>\n        <td id=\"file-markdown-js-LC1160\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1161\" class=\"blob-num js-line-number\" data-line-number=\"1161\"><\/td>\n        <td id=\"file-markdown-js-LC1161\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1162\" class=\"blob-num js-line-number\" data-line-number=\"1162\"><\/td>\n        <td id=\"file-markdown-js-LC1162\" class=\"blob-code blob-code-inner js-file-line\">        attr[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>class<span class=\"pl-pds\">&quot;<\/span><\/span>] <span class=\"pl-k\">=<\/span> meta[ i ].<span class=\"pl-c1\">substring<\/span>( <span class=\"pl-c1\">1<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1163\" class=\"blob-num js-line-number\" data-line-number=\"1163\"><\/td>\n        <td id=\"file-markdown-js-LC1163\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1164\" class=\"blob-num js-line-number\" data-line-number=\"1164\"><\/td>\n        <td id=\"file-markdown-js-LC1164\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1165\" class=\"blob-num js-line-number\" data-line-number=\"1165\"><\/td>\n        <td id=\"file-markdown-js-LC1165\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> attribute: foo=bar<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1166\" class=\"blob-num js-line-number\" data-line-number=\"1166\"><\/td>\n        <td id=\"file-markdown-js-LC1166\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">else<\/span> <span class=\"pl-k\">if<\/span> (<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-cce\">\\=<\/span><span class=\"pl-pds\">/<\/span><\/span>.<span class=\"pl-c1\">test<\/span>( meta[ i ] ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1167\" class=\"blob-num js-line-number\" data-line-number=\"1167\"><\/td>\n        <td id=\"file-markdown-js-LC1167\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> s <span class=\"pl-k\">=<\/span> meta[ i ].<span class=\"pl-c1\">split<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-cce\">\\=<\/span><span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1168\" class=\"blob-num js-line-number\" data-line-number=\"1168\"><\/td>\n        <td id=\"file-markdown-js-LC1168\" class=\"blob-code blob-code-inner js-file-line\">      attr[ s[ <span class=\"pl-c1\">0<\/span> ] ] <span class=\"pl-k\">=<\/span> s[ <span class=\"pl-c1\">1<\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1169\" class=\"blob-num js-line-number\" data-line-number=\"1169\"><\/td>\n        <td id=\"file-markdown-js-LC1169\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1170\" class=\"blob-num js-line-number\" data-line-number=\"1170\"><\/td>\n        <td id=\"file-markdown-js-LC1170\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1171\" class=\"blob-num js-line-number\" data-line-number=\"1171\"><\/td>\n        <td id=\"file-markdown-js-LC1171\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1172\" class=\"blob-num js-line-number\" data-line-number=\"1172\"><\/td>\n        <td id=\"file-markdown-js-LC1172\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> attr;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1173\" class=\"blob-num js-line-number\" data-line-number=\"1173\"><\/td>\n        <td id=\"file-markdown-js-LC1173\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1174\" class=\"blob-num js-line-number\" data-line-number=\"1174\"><\/td>\n        <td id=\"file-markdown-js-LC1174\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1175\" class=\"blob-num js-line-number\" data-line-number=\"1175\"><\/td>\n        <td id=\"file-markdown-js-LC1175\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">function<\/span> <span class=\"pl-en\">split_meta_hash<\/span>( <span class=\"pl-smi\">meta_string<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1176\" class=\"blob-num js-line-number\" data-line-number=\"1176\"><\/td>\n        <td id=\"file-markdown-js-LC1176\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> meta <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">meta_string<\/span>.<span class=\"pl-c1\">split<\/span>( <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1177\" class=\"blob-num js-line-number\" data-line-number=\"1177\"><\/td>\n        <td id=\"file-markdown-js-LC1177\" class=\"blob-code blob-code-inner js-file-line\">      parts <span class=\"pl-k\">=<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ],<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1178\" class=\"blob-num js-line-number\" data-line-number=\"1178\"><\/td>\n        <td id=\"file-markdown-js-LC1178\" class=\"blob-code blob-code-inner js-file-line\">      in_quotes <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">false<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1179\" class=\"blob-num js-line-number\" data-line-number=\"1179\"><\/td>\n        <td id=\"file-markdown-js-LC1179\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1180\" class=\"blob-num js-line-number\" data-line-number=\"1180\"><\/td>\n        <td id=\"file-markdown-js-LC1180\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">while<\/span> ( <span class=\"pl-smi\">meta<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1181\" class=\"blob-num js-line-number\" data-line-number=\"1181\"><\/td>\n        <td id=\"file-markdown-js-LC1181\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">var<\/span> letter <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">meta<\/span>.<span class=\"pl-c1\">shift<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1182\" class=\"blob-num js-line-number\" data-line-number=\"1182\"><\/td>\n        <td id=\"file-markdown-js-LC1182\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">switch<\/span> ( letter ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1183\" class=\"blob-num js-line-number\" data-line-number=\"1183\"><\/td>\n        <td id=\"file-markdown-js-LC1183\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span> <span class=\"pl-pds\">&quot;<\/span><\/span> :<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1184\" class=\"blob-num js-line-number\" data-line-number=\"1184\"><\/td>\n        <td id=\"file-markdown-js-LC1184\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if we&#39;re in a quoted section, keep it<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1185\" class=\"blob-num js-line-number\" data-line-number=\"1185\"><\/td>\n        <td id=\"file-markdown-js-LC1185\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( in_quotes ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1186\" class=\"blob-num js-line-number\" data-line-number=\"1186\"><\/td>\n        <td id=\"file-markdown-js-LC1186\" class=\"blob-code blob-code-inner js-file-line\">          parts[ <span class=\"pl-smi\">parts<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-c1\">1<\/span> ] <span class=\"pl-k\">+=<\/span> letter;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1187\" class=\"blob-num js-line-number\" data-line-number=\"1187\"><\/td>\n        <td id=\"file-markdown-js-LC1187\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1188\" class=\"blob-num js-line-number\" data-line-number=\"1188\"><\/td>\n        <td id=\"file-markdown-js-LC1188\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> otherwise make a new part<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1189\" class=\"blob-num js-line-number\" data-line-number=\"1189\"><\/td>\n        <td id=\"file-markdown-js-LC1189\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1190\" class=\"blob-num js-line-number\" data-line-number=\"1190\"><\/td>\n        <td id=\"file-markdown-js-LC1190\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">parts<\/span>.<span class=\"pl-c1\">push<\/span>( <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1191\" class=\"blob-num js-line-number\" data-line-number=\"1191\"><\/td>\n        <td id=\"file-markdown-js-LC1191\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1192\" class=\"blob-num js-line-number\" data-line-number=\"1192\"><\/td>\n        <td id=\"file-markdown-js-LC1192\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1193\" class=\"blob-num js-line-number\" data-line-number=\"1193\"><\/td>\n        <td id=\"file-markdown-js-LC1193\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&#39;<span class=\"pl-pds\">&quot;<\/span><\/span> :<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1194\" class=\"blob-num js-line-number\" data-line-number=\"1194\"><\/td>\n        <td id=\"file-markdown-js-LC1194\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>&quot;<span class=\"pl-pds\">&#39;<\/span><\/span> :<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1195\" class=\"blob-num js-line-number\" data-line-number=\"1195\"><\/td>\n        <td id=\"file-markdown-js-LC1195\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> reverse the quotes and move straight on<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1196\" class=\"blob-num js-line-number\" data-line-number=\"1196\"><\/td>\n        <td id=\"file-markdown-js-LC1196\" class=\"blob-code blob-code-inner js-file-line\">        in_quotes <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">!<\/span>in_quotes;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1197\" class=\"blob-num js-line-number\" data-line-number=\"1197\"><\/td>\n        <td id=\"file-markdown-js-LC1197\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1198\" class=\"blob-num js-line-number\" data-line-number=\"1198\"><\/td>\n        <td id=\"file-markdown-js-LC1198\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\\\<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> :<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1199\" class=\"blob-num js-line-number\" data-line-number=\"1199\"><\/td>\n        <td id=\"file-markdown-js-LC1199\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> shift off the next letter to be used straight away.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1200\" class=\"blob-num js-line-number\" data-line-number=\"1200\"><\/td>\n        <td id=\"file-markdown-js-LC1200\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> it was escaped so we&#39;ll keep it whatever it is<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1201\" class=\"blob-num js-line-number\" data-line-number=\"1201\"><\/td>\n        <td id=\"file-markdown-js-LC1201\" class=\"blob-code blob-code-inner js-file-line\">        letter <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">meta<\/span>.<span class=\"pl-c1\">shift<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1202\" class=\"blob-num js-line-number\" data-line-number=\"1202\"><\/td>\n        <td id=\"file-markdown-js-LC1202\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">default<\/span> :<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1203\" class=\"blob-num js-line-number\" data-line-number=\"1203\"><\/td>\n        <td id=\"file-markdown-js-LC1203\" class=\"blob-code blob-code-inner js-file-line\">        parts[ <span class=\"pl-smi\">parts<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-c1\">1<\/span> ] <span class=\"pl-k\">+=<\/span> letter;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1204\" class=\"blob-num js-line-number\" data-line-number=\"1204\"><\/td>\n        <td id=\"file-markdown-js-LC1204\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1205\" class=\"blob-num js-line-number\" data-line-number=\"1205\"><\/td>\n        <td id=\"file-markdown-js-LC1205\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1206\" class=\"blob-num js-line-number\" data-line-number=\"1206\"><\/td>\n        <td id=\"file-markdown-js-LC1206\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1207\" class=\"blob-num js-line-number\" data-line-number=\"1207\"><\/td>\n        <td id=\"file-markdown-js-LC1207\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1208\" class=\"blob-num js-line-number\" data-line-number=\"1208\"><\/td>\n        <td id=\"file-markdown-js-LC1208\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> parts;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1209\" class=\"blob-num js-line-number\" data-line-number=\"1209\"><\/td>\n        <td id=\"file-markdown-js-LC1209\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1210\" class=\"blob-num js-line-number\" data-line-number=\"1210\"><\/td>\n        <td id=\"file-markdown-js-LC1210\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1211\" class=\"blob-num js-line-number\" data-line-number=\"1211\"><\/td>\n        <td id=\"file-markdown-js-LC1211\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Maruku<\/span>.<span class=\"pl-smi\">block<\/span>.<span class=\"pl-en\">document_meta<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">document_meta<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1212\" class=\"blob-num js-line-number\" data-line-number=\"1212\"><\/td>\n        <td id=\"file-markdown-js-LC1212\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> we&#39;re only interested in the first block<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1213\" class=\"blob-num js-line-number\" data-line-number=\"1213\"><\/td>\n        <td id=\"file-markdown-js-LC1213\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">block<\/span>.<span class=\"pl-smi\">lineNumber<\/span> <span class=\"pl-k\">&gt;<\/span> <span class=\"pl-c1\">1<\/span> ) <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1214\" class=\"blob-num js-line-number\" data-line-number=\"1214\"><\/td>\n        <td id=\"file-markdown-js-LC1214\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1215\" class=\"blob-num js-line-number\" data-line-number=\"1215\"><\/td>\n        <td id=\"file-markdown-js-LC1215\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> document_meta blocks consist of one or more lines of `Key: Value\\n`<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1216\" class=\"blob-num js-line-number\" data-line-number=\"1216\"><\/td>\n        <td id=\"file-markdown-js-LC1216\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>(?:<span class=\"pl-c1\">\\w<\/span><span class=\"pl-k\">+<\/span>:<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-c1\">\\n<\/span>)<span class=\"pl-k\">*<\/span><span class=\"pl-c1\">\\w<\/span><span class=\"pl-k\">+<\/span>:<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span> ) ) <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1217\" class=\"blob-num js-line-number\" data-line-number=\"1217\"><\/td>\n        <td id=\"file-markdown-js-LC1217\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1218\" class=\"blob-num js-line-number\" data-line-number=\"1218\"><\/td>\n        <td id=\"file-markdown-js-LC1218\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> make an attribute node if it doesn&#39;t exist<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1219\" class=\"blob-num js-line-number\" data-line-number=\"1219\"><\/td>\n        <td id=\"file-markdown-js-LC1219\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span><span class=\"pl-en\">extract_attr<\/span>( <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span> ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1220\" class=\"blob-num js-line-number\" data-line-number=\"1220\"><\/td>\n        <td id=\"file-markdown-js-LC1220\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span>.<span class=\"pl-c1\">splice<\/span>( <span class=\"pl-c1\">1<\/span>, <span class=\"pl-c1\">0<\/span>, {} );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1221\" class=\"blob-num js-line-number\" data-line-number=\"1221\"><\/td>\n        <td id=\"file-markdown-js-LC1221\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1222\" class=\"blob-num js-line-number\" data-line-number=\"1222\"><\/td>\n        <td id=\"file-markdown-js-LC1222\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1223\" class=\"blob-num js-line-number\" data-line-number=\"1223\"><\/td>\n        <td id=\"file-markdown-js-LC1223\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> pairs <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">split<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-c1\">\\n<\/span><span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1224\" class=\"blob-num js-line-number\" data-line-number=\"1224\"><\/td>\n        <td id=\"file-markdown-js-LC1224\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">for<\/span> ( p <span class=\"pl-k\">in<\/span> pairs ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1225\" class=\"blob-num js-line-number\" data-line-number=\"1225\"><\/td>\n        <td id=\"file-markdown-js-LC1225\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">var<\/span> m <span class=\"pl-k\">=<\/span> pairs[ p ].<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>(<span class=\"pl-c1\">\\w<\/span><span class=\"pl-k\">+<\/span>):<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span>(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*<\/span>)<span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span> ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1226\" class=\"blob-num js-line-number\" data-line-number=\"1226\"><\/td>\n        <td id=\"file-markdown-js-LC1226\" class=\"blob-code blob-code-inner js-file-line\">        key <span class=\"pl-k\">=<\/span> m[ <span class=\"pl-c1\">1<\/span> ].<span class=\"pl-c1\">toLowerCase<\/span>(),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1227\" class=\"blob-num js-line-number\" data-line-number=\"1227\"><\/td>\n        <td id=\"file-markdown-js-LC1227\" class=\"blob-code blob-code-inner js-file-line\">        value <span class=\"pl-k\">=<\/span> m[ <span class=\"pl-c1\">2<\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1228\" class=\"blob-num js-line-number\" data-line-number=\"1228\"><\/td>\n        <td id=\"file-markdown-js-LC1228\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1229\" class=\"blob-num js-line-number\" data-line-number=\"1229\"><\/td>\n        <td id=\"file-markdown-js-LC1229\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span>[ <span class=\"pl-c1\">1<\/span> ][ key ] <span class=\"pl-k\">=<\/span> value;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1230\" class=\"blob-num js-line-number\" data-line-number=\"1230\"><\/td>\n        <td id=\"file-markdown-js-LC1230\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1231\" class=\"blob-num js-line-number\" data-line-number=\"1231\"><\/td>\n        <td id=\"file-markdown-js-LC1231\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1232\" class=\"blob-num js-line-number\" data-line-number=\"1232\"><\/td>\n        <td id=\"file-markdown-js-LC1232\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> document_meta produces no content!<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1233\" class=\"blob-num js-line-number\" data-line-number=\"1233\"><\/td>\n        <td id=\"file-markdown-js-LC1233\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1234\" class=\"blob-num js-line-number\" data-line-number=\"1234\"><\/td>\n        <td id=\"file-markdown-js-LC1234\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1235\" class=\"blob-num js-line-number\" data-line-number=\"1235\"><\/td>\n        <td id=\"file-markdown-js-LC1235\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1236\" class=\"blob-num js-line-number\" data-line-number=\"1236\"><\/td>\n        <td id=\"file-markdown-js-LC1236\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Maruku<\/span>.<span class=\"pl-smi\">block<\/span>.<span class=\"pl-en\">block_meta<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">block_meta<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1237\" class=\"blob-num js-line-number\" data-line-number=\"1237\"><\/td>\n        <td id=\"file-markdown-js-LC1237\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> check if the last line of the block is an meta hash<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1238\" class=\"blob-num js-line-number\" data-line-number=\"1238\"><\/td>\n        <td id=\"file-markdown-js-LC1238\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>(<span class=\"pl-k\">^<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-c1\">\\n<\/span>) <span class=\"pl-k\">{0,3}<\/span><span class=\"pl-cce\">\\{<\/span>:<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span>((?:<span class=\"pl-cce\">\\\\\\}<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-c1\">[<span class=\"pl-k\">^<\/span><span class=\"pl-cce\">\\}<\/span>]<\/span>)<span class=\"pl-k\">*<\/span>)<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\}<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1239\" class=\"blob-num js-line-number\" data-line-number=\"1239\"><\/td>\n        <td id=\"file-markdown-js-LC1239\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>m ) <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1240\" class=\"blob-num js-line-number\" data-line-number=\"1240\"><\/td>\n        <td id=\"file-markdown-js-LC1240\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1241\" class=\"blob-num js-line-number\" data-line-number=\"1241\"><\/td>\n        <td id=\"file-markdown-js-LC1241\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> process the meta hash<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1242\" class=\"blob-num js-line-number\" data-line-number=\"1242\"><\/td>\n        <td id=\"file-markdown-js-LC1242\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> attr <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-en\">processMetaHash<\/span>( m[ <span class=\"pl-c1\">2<\/span> ] );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1243\" class=\"blob-num js-line-number\" data-line-number=\"1243\"><\/td>\n        <td id=\"file-markdown-js-LC1243\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1244\" class=\"blob-num js-line-number\" data-line-number=\"1244\"><\/td>\n        <td id=\"file-markdown-js-LC1244\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> hash;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1245\" class=\"blob-num js-line-number\" data-line-number=\"1245\"><\/td>\n        <td id=\"file-markdown-js-LC1245\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1246\" class=\"blob-num js-line-number\" data-line-number=\"1246\"><\/td>\n        <td id=\"file-markdown-js-LC1246\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if we matched ^ then we need to apply meta to the previous block<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1247\" class=\"blob-num js-line-number\" data-line-number=\"1247\"><\/td>\n        <td id=\"file-markdown-js-LC1247\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( m[ <span class=\"pl-c1\">1<\/span> ] <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1248\" class=\"blob-num js-line-number\" data-line-number=\"1248\"><\/td>\n        <td id=\"file-markdown-js-LC1248\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">var<\/span> node <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span>[ <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">tree<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-c1\">1<\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1249\" class=\"blob-num js-line-number\" data-line-number=\"1249\"><\/td>\n        <td id=\"file-markdown-js-LC1249\" class=\"blob-code blob-code-inner js-file-line\">    hash <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">extract_attr<\/span>( node );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1250\" class=\"blob-num js-line-number\" data-line-number=\"1250\"><\/td>\n        <td id=\"file-markdown-js-LC1250\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1251\" class=\"blob-num js-line-number\" data-line-number=\"1251\"><\/td>\n        <td id=\"file-markdown-js-LC1251\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if the node is a string (rather than JsonML), bail<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1252\" class=\"blob-num js-line-number\" data-line-number=\"1252\"><\/td>\n        <td id=\"file-markdown-js-LC1252\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">typeof<\/span> node <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span> ) <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1253\" class=\"blob-num js-line-number\" data-line-number=\"1253\"><\/td>\n        <td id=\"file-markdown-js-LC1253\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1254\" class=\"blob-num js-line-number\" data-line-number=\"1254\"><\/td>\n        <td id=\"file-markdown-js-LC1254\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> create the attribute hash if it doesn&#39;t exist<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1255\" class=\"blob-num js-line-number\" data-line-number=\"1255\"><\/td>\n        <td id=\"file-markdown-js-LC1255\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>hash ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1256\" class=\"blob-num js-line-number\" data-line-number=\"1256\"><\/td>\n        <td id=\"file-markdown-js-LC1256\" class=\"blob-code blob-code-inner js-file-line\">      hash <span class=\"pl-k\">=<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1257\" class=\"blob-num js-line-number\" data-line-number=\"1257\"><\/td>\n        <td id=\"file-markdown-js-LC1257\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-smi\">node<\/span>.<span class=\"pl-c1\">splice<\/span>( <span class=\"pl-c1\">1<\/span>, <span class=\"pl-c1\">0<\/span>, hash );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1258\" class=\"blob-num js-line-number\" data-line-number=\"1258\"><\/td>\n        <td id=\"file-markdown-js-LC1258\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1259\" class=\"blob-num js-line-number\" data-line-number=\"1259\"><\/td>\n        <td id=\"file-markdown-js-LC1259\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1260\" class=\"blob-num js-line-number\" data-line-number=\"1260\"><\/td>\n        <td id=\"file-markdown-js-LC1260\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> add the attributes in<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1261\" class=\"blob-num js-line-number\" data-line-number=\"1261\"><\/td>\n        <td id=\"file-markdown-js-LC1261\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">for<\/span> ( a <span class=\"pl-k\">in<\/span> attr ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1262\" class=\"blob-num js-line-number\" data-line-number=\"1262\"><\/td>\n        <td id=\"file-markdown-js-LC1262\" class=\"blob-code blob-code-inner js-file-line\">      hash[ a ] <span class=\"pl-k\">=<\/span> attr[ a ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1263\" class=\"blob-num js-line-number\" data-line-number=\"1263\"><\/td>\n        <td id=\"file-markdown-js-LC1263\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1264\" class=\"blob-num js-line-number\" data-line-number=\"1264\"><\/td>\n        <td id=\"file-markdown-js-LC1264\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1265\" class=\"blob-num js-line-number\" data-line-number=\"1265\"><\/td>\n        <td id=\"file-markdown-js-LC1265\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> return nothing so the meta hash is removed<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1266\" class=\"blob-num js-line-number\" data-line-number=\"1266\"><\/td>\n        <td id=\"file-markdown-js-LC1266\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1267\" class=\"blob-num js-line-number\" data-line-number=\"1267\"><\/td>\n        <td id=\"file-markdown-js-LC1267\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1268\" class=\"blob-num js-line-number\" data-line-number=\"1268\"><\/td>\n        <td id=\"file-markdown-js-LC1268\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1269\" class=\"blob-num js-line-number\" data-line-number=\"1269\"><\/td>\n        <td id=\"file-markdown-js-LC1269\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> pull the meta hash off the block and process what&#39;s left<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1270\" class=\"blob-num js-line-number\" data-line-number=\"1270\"><\/td>\n        <td id=\"file-markdown-js-LC1270\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> b <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-c1\">\\n.<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1271\" class=\"blob-num js-line-number\" data-line-number=\"1271\"><\/td>\n        <td id=\"file-markdown-js-LC1271\" class=\"blob-code blob-code-inner js-file-line\">      result <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processBlock<\/span>( b, [] );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1272\" class=\"blob-num js-line-number\" data-line-number=\"1272\"><\/td>\n        <td id=\"file-markdown-js-LC1272\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1273\" class=\"blob-num js-line-number\" data-line-number=\"1273\"><\/td>\n        <td id=\"file-markdown-js-LC1273\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> get or make the attributes hash<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1274\" class=\"blob-num js-line-number\" data-line-number=\"1274\"><\/td>\n        <td id=\"file-markdown-js-LC1274\" class=\"blob-code blob-code-inner js-file-line\">  hash <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">extract_attr<\/span>( result[ <span class=\"pl-c1\">0<\/span> ] );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1275\" class=\"blob-num js-line-number\" data-line-number=\"1275\"><\/td>\n        <td id=\"file-markdown-js-LC1275\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>hash ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1276\" class=\"blob-num js-line-number\" data-line-number=\"1276\"><\/td>\n        <td id=\"file-markdown-js-LC1276\" class=\"blob-code blob-code-inner js-file-line\">    hash <span class=\"pl-k\">=<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1277\" class=\"blob-num js-line-number\" data-line-number=\"1277\"><\/td>\n        <td id=\"file-markdown-js-LC1277\" class=\"blob-code blob-code-inner js-file-line\">    result[ <span class=\"pl-c1\">0<\/span> ].<span class=\"pl-c1\">splice<\/span>( <span class=\"pl-c1\">1<\/span>, <span class=\"pl-c1\">0<\/span>, hash );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1278\" class=\"blob-num js-line-number\" data-line-number=\"1278\"><\/td>\n        <td id=\"file-markdown-js-LC1278\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1279\" class=\"blob-num js-line-number\" data-line-number=\"1279\"><\/td>\n        <td id=\"file-markdown-js-LC1279\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1280\" class=\"blob-num js-line-number\" data-line-number=\"1280\"><\/td>\n        <td id=\"file-markdown-js-LC1280\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> attach the attributes to the block<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1281\" class=\"blob-num js-line-number\" data-line-number=\"1281\"><\/td>\n        <td id=\"file-markdown-js-LC1281\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">for<\/span> ( a <span class=\"pl-k\">in<\/span> attr ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1282\" class=\"blob-num js-line-number\" data-line-number=\"1282\"><\/td>\n        <td id=\"file-markdown-js-LC1282\" class=\"blob-code blob-code-inner js-file-line\">    hash[ a ] <span class=\"pl-k\">=<\/span> attr[ a ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1283\" class=\"blob-num js-line-number\" data-line-number=\"1283\"><\/td>\n        <td id=\"file-markdown-js-LC1283\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1284\" class=\"blob-num js-line-number\" data-line-number=\"1284\"><\/td>\n        <td id=\"file-markdown-js-LC1284\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1285\" class=\"blob-num js-line-number\" data-line-number=\"1285\"><\/td>\n        <td id=\"file-markdown-js-LC1285\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> result;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1286\" class=\"blob-num js-line-number\" data-line-number=\"1286\"><\/td>\n        <td id=\"file-markdown-js-LC1286\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1287\" class=\"blob-num js-line-number\" data-line-number=\"1287\"><\/td>\n        <td id=\"file-markdown-js-LC1287\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1288\" class=\"blob-num js-line-number\" data-line-number=\"1288\"><\/td>\n        <td id=\"file-markdown-js-LC1288\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Maruku<\/span>.<span class=\"pl-smi\">block<\/span>.<span class=\"pl-en\">definition_list<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">definition_list<\/span>( <span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1289\" class=\"blob-num js-line-number\" data-line-number=\"1289\"><\/td>\n        <td id=\"file-markdown-js-LC1289\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> one or more terms followed by one or more definitions, in a single block<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1290\" class=\"blob-num js-line-number\" data-line-number=\"1290\"><\/td>\n        <td id=\"file-markdown-js-LC1290\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> tight <span class=\"pl-k\">=<\/span><span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span>((?:<span class=\"pl-c1\">[<span class=\"pl-k\">^<\/span><span class=\"pl-c1\">\\s<\/span>:]<\/span><span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-c1\">\\n<\/span>)<span class=\"pl-k\">+<\/span>):<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">+<\/span>(<span class=\"pl-c1\">[<span class=\"pl-c1\">\\s\\S<\/span>]<\/span><span class=\"pl-k\">+<\/span>)<span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1291\" class=\"blob-num js-line-number\" data-line-number=\"1291\"><\/td>\n        <td id=\"file-markdown-js-LC1291\" class=\"blob-code blob-code-inner js-file-line\">      list <span class=\"pl-k\">=<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>dl<span class=\"pl-pds\">&quot;<\/span><\/span> ],<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1292\" class=\"blob-num js-line-number\" data-line-number=\"1292\"><\/td>\n        <td id=\"file-markdown-js-LC1292\" class=\"blob-code blob-code-inner js-file-line\">      i, m;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1293\" class=\"blob-num js-line-number\" data-line-number=\"1293\"><\/td>\n        <td id=\"file-markdown-js-LC1293\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1294\" class=\"blob-num js-line-number\" data-line-number=\"1294\"><\/td>\n        <td id=\"file-markdown-js-LC1294\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> see if we&#39;re dealing with a tight or loose block<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1295\" class=\"blob-num js-line-number\" data-line-number=\"1295\"><\/td>\n        <td id=\"file-markdown-js-LC1295\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( ( m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>( tight ) ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1296\" class=\"blob-num js-line-number\" data-line-number=\"1296\"><\/td>\n        <td id=\"file-markdown-js-LC1296\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> pull subsequent tight DL blocks out of `next`<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1297\" class=\"blob-num js-line-number\" data-line-number=\"1297\"><\/td>\n        <td id=\"file-markdown-js-LC1297\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">var<\/span> blocks <span class=\"pl-k\">=<\/span> [ block ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1298\" class=\"blob-num js-line-number\" data-line-number=\"1298\"><\/td>\n        <td id=\"file-markdown-js-LC1298\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">while<\/span> ( <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-smi\">tight<\/span>.<span class=\"pl-c1\">exec<\/span>( next[ <span class=\"pl-c1\">0<\/span> ] ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1299\" class=\"blob-num js-line-number\" data-line-number=\"1299\"><\/td>\n        <td id=\"file-markdown-js-LC1299\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-smi\">blocks<\/span>.<span class=\"pl-c1\">push<\/span>( <span class=\"pl-smi\">next<\/span>.<span class=\"pl-c1\">shift<\/span>() );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1300\" class=\"blob-num js-line-number\" data-line-number=\"1300\"><\/td>\n        <td id=\"file-markdown-js-LC1300\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1301\" class=\"blob-num js-line-number\" data-line-number=\"1301\"><\/td>\n        <td id=\"file-markdown-js-LC1301\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1302\" class=\"blob-num js-line-number\" data-line-number=\"1302\"><\/td>\n        <td id=\"file-markdown-js-LC1302\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> b <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; b <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">blocks<\/span>.<span class=\"pl-c1\">length<\/span>; <span class=\"pl-k\">++<\/span>b ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1303\" class=\"blob-num js-line-number\" data-line-number=\"1303\"><\/td>\n        <td id=\"file-markdown-js-LC1303\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> m <span class=\"pl-k\">=<\/span> blocks[ b ].<span class=\"pl-c1\">match<\/span>( tight ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1304\" class=\"blob-num js-line-number\" data-line-number=\"1304\"><\/td>\n        <td id=\"file-markdown-js-LC1304\" class=\"blob-code blob-code-inner js-file-line\">          terms <span class=\"pl-k\">=<\/span> m[ <span class=\"pl-c1\">1<\/span> ].<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-c1\">\\n<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ).<span class=\"pl-c1\">split<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-c1\">\\n<\/span><span class=\"pl-pds\">/<\/span><\/span> ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1305\" class=\"blob-num js-line-number\" data-line-number=\"1305\"><\/td>\n        <td id=\"file-markdown-js-LC1305\" class=\"blob-code blob-code-inner js-file-line\">          defns <span class=\"pl-k\">=<\/span> m[ <span class=\"pl-c1\">2<\/span> ].<span class=\"pl-c1\">split<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-c1\">\\n<\/span>:<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">+<\/span><span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1306\" class=\"blob-num js-line-number\" data-line-number=\"1306\"><\/td>\n        <td id=\"file-markdown-js-LC1306\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1307\" class=\"blob-num js-line-number\" data-line-number=\"1307\"><\/td>\n        <td id=\"file-markdown-js-LC1307\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> print( uneval( m ) );<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1308\" class=\"blob-num js-line-number\" data-line-number=\"1308\"><\/td>\n        <td id=\"file-markdown-js-LC1308\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1309\" class=\"blob-num js-line-number\" data-line-number=\"1309\"><\/td>\n        <td id=\"file-markdown-js-LC1309\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">for<\/span> ( i <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; i <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">terms<\/span>.<span class=\"pl-c1\">length<\/span>; <span class=\"pl-k\">++<\/span>i ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1310\" class=\"blob-num js-line-number\" data-line-number=\"1310\"><\/td>\n        <td id=\"file-markdown-js-LC1310\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">list<\/span>.<span class=\"pl-c1\">push<\/span>( [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>dt<span class=\"pl-pds\">&quot;<\/span><\/span>, terms[ i ] ] );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1311\" class=\"blob-num js-line-number\" data-line-number=\"1311\"><\/td>\n        <td id=\"file-markdown-js-LC1311\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1312\" class=\"blob-num js-line-number\" data-line-number=\"1312\"><\/td>\n        <td id=\"file-markdown-js-LC1312\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1313\" class=\"blob-num js-line-number\" data-line-number=\"1313\"><\/td>\n        <td id=\"file-markdown-js-LC1313\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">for<\/span> ( i <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; i <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">defns<\/span>.<span class=\"pl-c1\">length<\/span>; <span class=\"pl-k\">++<\/span>i ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1314\" class=\"blob-num js-line-number\" data-line-number=\"1314\"><\/td>\n        <td id=\"file-markdown-js-LC1314\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> run inline processing over the definition<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1315\" class=\"blob-num js-line-number\" data-line-number=\"1315\"><\/td>\n        <td id=\"file-markdown-js-LC1315\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">list<\/span>.<span class=\"pl-c1\">push<\/span>( [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>dd<span class=\"pl-pds\">&quot;<\/span><\/span> ].<span class=\"pl-c1\">concat<\/span>( <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processInline<\/span>( defns[ i ].<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>(<span class=\"pl-c1\">\\n<\/span>)<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">+<\/span><span class=\"pl-pds\">/<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>$1<span class=\"pl-pds\">&quot;<\/span><\/span> ) ) ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1316\" class=\"blob-num js-line-number\" data-line-number=\"1316\"><\/td>\n        <td id=\"file-markdown-js-LC1316\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1317\" class=\"blob-num js-line-number\" data-line-number=\"1317\"><\/td>\n        <td id=\"file-markdown-js-LC1317\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1318\" class=\"blob-num js-line-number\" data-line-number=\"1318\"><\/td>\n        <td id=\"file-markdown-js-LC1318\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1319\" class=\"blob-num js-line-number\" data-line-number=\"1319\"><\/td>\n        <td id=\"file-markdown-js-LC1319\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1320\" class=\"blob-num js-line-number\" data-line-number=\"1320\"><\/td>\n        <td id=\"file-markdown-js-LC1320\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1321\" class=\"blob-num js-line-number\" data-line-number=\"1321\"><\/td>\n        <td id=\"file-markdown-js-LC1321\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1322\" class=\"blob-num js-line-number\" data-line-number=\"1322\"><\/td>\n        <td id=\"file-markdown-js-LC1322\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1323\" class=\"blob-num js-line-number\" data-line-number=\"1323\"><\/td>\n        <td id=\"file-markdown-js-LC1323\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> [ list ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1324\" class=\"blob-num js-line-number\" data-line-number=\"1324\"><\/td>\n        <td id=\"file-markdown-js-LC1324\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1325\" class=\"blob-num js-line-number\" data-line-number=\"1325\"><\/td>\n        <td id=\"file-markdown-js-LC1325\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1326\" class=\"blob-num js-line-number\" data-line-number=\"1326\"><\/td>\n        <td id=\"file-markdown-js-LC1326\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> splits on unescaped instances of @ch. If @ch is not a character the result<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1327\" class=\"blob-num js-line-number\" data-line-number=\"1327\"><\/td>\n        <td id=\"file-markdown-js-LC1327\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> can be unpredictable<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1328\" class=\"blob-num js-line-number\" data-line-number=\"1328\"><\/td>\n        <td id=\"file-markdown-js-LC1328\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1329\" class=\"blob-num js-line-number\" data-line-number=\"1329\"><\/td>\n        <td id=\"file-markdown-js-LC1329\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Maruku<\/span>.<span class=\"pl-smi\">block<\/span>.<span class=\"pl-en\">table<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">table<\/span> (<span class=\"pl-smi\">block<\/span>, <span class=\"pl-smi\">next<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1330\" class=\"blob-num js-line-number\" data-line-number=\"1330\"><\/td>\n        <td id=\"file-markdown-js-LC1330\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1331\" class=\"blob-num js-line-number\" data-line-number=\"1331\"><\/td>\n        <td id=\"file-markdown-js-LC1331\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">var<\/span> <span class=\"pl-en\">_split_on_unescaped<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>(<span class=\"pl-smi\">s<\/span>, <span class=\"pl-smi\">ch<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1332\" class=\"blob-num js-line-number\" data-line-number=\"1332\"><\/td>\n        <td id=\"file-markdown-js-LC1332\" class=\"blob-code blob-code-inner js-file-line\">        ch <span class=\"pl-k\">=<\/span> ch <span class=\"pl-k\">||<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span><span class=\"pl-cce\">\\\\<\/span>s<span class=\"pl-pds\">&#39;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1333\" class=\"blob-num js-line-number\" data-line-number=\"1333\"><\/td>\n        <td id=\"file-markdown-js-LC1333\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> (<span class=\"pl-smi\">ch<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"><span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-c1\">[<span class=\"pl-cce\">\\\\<\/span>|<span class=\"pl-cce\">\\[\\]<\/span>{}?*<span class=\"pl-c1\">.<\/span>+^$]<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span>)) { ch <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span><span class=\"pl-cce\">\\\\<\/span><span class=\"pl-pds\">&#39;<\/span><\/span> <span class=\"pl-k\">+<\/span> ch; }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1334\" class=\"blob-num js-line-number\" data-line-number=\"1334\"><\/td>\n        <td id=\"file-markdown-js-LC1334\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> res <span class=\"pl-k\">=<\/span> [ ],<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1335\" class=\"blob-num js-line-number\" data-line-number=\"1335\"><\/td>\n        <td id=\"file-markdown-js-LC1335\" class=\"blob-code blob-code-inner js-file-line\">            r <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">new<\/span> <span class=\"pl-en\">RegExp<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>^((?:<span class=\"pl-cce\">\\\\\\\\<\/span>.|[^<span class=\"pl-cce\">\\\\\\\\<\/span><span class=\"pl-pds\">&#39;<\/span><\/span> <span class=\"pl-k\">+<\/span> ch <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>])*)<span class=\"pl-pds\">&#39;<\/span><\/span> <span class=\"pl-k\">+<\/span> ch <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>(.*)<span class=\"pl-pds\">&#39;<\/span><\/span>),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1336\" class=\"blob-num js-line-number\" data-line-number=\"1336\"><\/td>\n        <td id=\"file-markdown-js-LC1336\" class=\"blob-code blob-code-inner js-file-line\">            m;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1337\" class=\"blob-num js-line-number\" data-line-number=\"1337\"><\/td>\n        <td id=\"file-markdown-js-LC1337\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">while<\/span>(m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">s<\/span>.<span class=\"pl-c1\">match<\/span>(r)) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1338\" class=\"blob-num js-line-number\" data-line-number=\"1338\"><\/td>\n        <td id=\"file-markdown-js-LC1338\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">res<\/span>.<span class=\"pl-c1\">push<\/span>(m[<span class=\"pl-c1\">1<\/span>]);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1339\" class=\"blob-num js-line-number\" data-line-number=\"1339\"><\/td>\n        <td id=\"file-markdown-js-LC1339\" class=\"blob-code blob-code-inner js-file-line\">            s <span class=\"pl-k\">=<\/span> m[<span class=\"pl-c1\">2<\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1340\" class=\"blob-num js-line-number\" data-line-number=\"1340\"><\/td>\n        <td id=\"file-markdown-js-LC1340\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1341\" class=\"blob-num js-line-number\" data-line-number=\"1341\"><\/td>\n        <td id=\"file-markdown-js-LC1341\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">res<\/span>.<span class=\"pl-c1\">push<\/span>(s);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1342\" class=\"blob-num js-line-number\" data-line-number=\"1342\"><\/td>\n        <td id=\"file-markdown-js-LC1342\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> res;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1343\" class=\"blob-num js-line-number\" data-line-number=\"1343\"><\/td>\n        <td id=\"file-markdown-js-LC1343\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1344\" class=\"blob-num js-line-number\" data-line-number=\"1344\"><\/td>\n        <td id=\"file-markdown-js-LC1344\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1345\" class=\"blob-num js-line-number\" data-line-number=\"1345\"><\/td>\n        <td id=\"file-markdown-js-LC1345\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">var<\/span> leading_pipe <span class=\"pl-k\">=<\/span><span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span> <span class=\"pl-k\">{0,3}<\/span><span class=\"pl-cce\">\\|<\/span>(<span class=\"pl-c1\">.<\/span><span class=\"pl-k\">+<\/span>)<span class=\"pl-c1\">\\n<\/span> <span class=\"pl-k\">{0,3}<\/span><span class=\"pl-cce\">\\|<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span>(<span class=\"pl-c1\">[<span class=\"pl-c1\">\\-:<\/span>]<\/span><span class=\"pl-k\">+<\/span><span class=\"pl-c1\">[<span class=\"pl-c1\">\\-|<\/span> :]<\/span><span class=\"pl-k\">*<\/span>)<span class=\"pl-c1\">\\n<\/span>((?:<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\|<\/span><span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*<\/span>(?:<span class=\"pl-c1\">\\n<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-k\">$<\/span>))<span class=\"pl-k\">*<\/span>)(?=<span class=\"pl-c1\">\\n<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-k\">$<\/span>)<span class=\"pl-pds\">/<\/span><\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1346\" class=\"blob-num js-line-number\" data-line-number=\"1346\"><\/td>\n        <td id=\"file-markdown-js-LC1346\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> find at least an unescaped pipe in each line<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1347\" class=\"blob-num js-line-number\" data-line-number=\"1347\"><\/td>\n        <td id=\"file-markdown-js-LC1347\" class=\"blob-code blob-code-inner js-file-line\">        no_leading_pipe <span class=\"pl-k\">=<\/span><span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span> <span class=\"pl-k\">{0,3}<\/span>(<span class=\"pl-c1\">\\S<\/span>(?:<span class=\"pl-cce\">\\\\<\/span><span class=\"pl-c1\">.<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-c1\">[<span class=\"pl-k\">^<\/span><span class=\"pl-cce\">\\\\<\/span>|]<\/span>)<span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\|<\/span><span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*<\/span>)<span class=\"pl-c1\">\\n<\/span> <span class=\"pl-k\">{0,3}<\/span>(<span class=\"pl-c1\">[<span class=\"pl-c1\">\\-:<\/span>]<\/span><span class=\"pl-k\">+<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\|<\/span><span class=\"pl-c1\">[<span class=\"pl-c1\">\\-|<\/span> :]<\/span><span class=\"pl-k\">*<\/span>)<span class=\"pl-c1\">\\n<\/span>((?:(?:<span class=\"pl-cce\">\\\\<\/span><span class=\"pl-c1\">.<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-c1\">[<span class=\"pl-k\">^<\/span><span class=\"pl-cce\">\\\\<\/span>|]<\/span>)<span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\|<\/span><span class=\"pl-c1\">.<\/span><span class=\"pl-k\">*<\/span>(?:<span class=\"pl-c1\">\\n<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-k\">$<\/span>))<span class=\"pl-k\">*<\/span>)(?=<span class=\"pl-c1\">\\n<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-k\">$<\/span>)<span class=\"pl-pds\">/<\/span><\/span>,<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1348\" class=\"blob-num js-line-number\" data-line-number=\"1348\"><\/td>\n        <td id=\"file-markdown-js-LC1348\" class=\"blob-code blob-code-inner js-file-line\">        i, m;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1349\" class=\"blob-num js-line-number\" data-line-number=\"1349\"><\/td>\n        <td id=\"file-markdown-js-LC1349\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> (m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>(leading_pipe)) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1350\" class=\"blob-num js-line-number\" data-line-number=\"1350\"><\/td>\n        <td id=\"file-markdown-js-LC1350\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> remove leading pipes in contents<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1351\" class=\"blob-num js-line-number\" data-line-number=\"1351\"><\/td>\n        <td id=\"file-markdown-js-LC1351\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> (header and horizontal rule already have the leading pipe left out)<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1352\" class=\"blob-num js-line-number\" data-line-number=\"1352\"><\/td>\n        <td id=\"file-markdown-js-LC1352\" class=\"blob-code blob-code-inner js-file-line\">        m[<span class=\"pl-c1\">3<\/span>] <span class=\"pl-k\">=<\/span> m[<span class=\"pl-c1\">3<\/span>].<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"><span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\|<\/span><span class=\"pl-pds\">/<\/span>gm<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span><span class=\"pl-pds\">&#39;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1353\" class=\"blob-num js-line-number\" data-line-number=\"1353\"><\/td>\n        <td id=\"file-markdown-js-LC1353\" class=\"blob-code blob-code-inner js-file-line\">    } <span class=\"pl-k\">else<\/span> <span class=\"pl-k\">if<\/span> (<span class=\"pl-k\">!<\/span> ( m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">block<\/span>.<span class=\"pl-c1\">match<\/span>(no_leading_pipe))) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1354\" class=\"blob-num js-line-number\" data-line-number=\"1354\"><\/td>\n        <td id=\"file-markdown-js-LC1354\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1355\" class=\"blob-num js-line-number\" data-line-number=\"1355\"><\/td>\n        <td id=\"file-markdown-js-LC1355\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1356\" class=\"blob-num js-line-number\" data-line-number=\"1356\"><\/td>\n        <td id=\"file-markdown-js-LC1356\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1357\" class=\"blob-num js-line-number\" data-line-number=\"1357\"><\/td>\n        <td id=\"file-markdown-js-LC1357\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">var<\/span> table <span class=\"pl-k\">=<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>table<span class=\"pl-pds\">&quot;<\/span><\/span>, [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>thead<span class=\"pl-pds\">&quot;<\/span><\/span>, [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>tr<span class=\"pl-pds\">&quot;<\/span><\/span> ] ], [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>tbody<span class=\"pl-pds\">&quot;<\/span><\/span> ] ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1358\" class=\"blob-num js-line-number\" data-line-number=\"1358\"><\/td>\n        <td id=\"file-markdown-js-LC1358\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1359\" class=\"blob-num js-line-number\" data-line-number=\"1359\"><\/td>\n        <td id=\"file-markdown-js-LC1359\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> remove trailing pipes, then split on pipes<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1360\" class=\"blob-num js-line-number\" data-line-number=\"1360\"><\/td>\n        <td id=\"file-markdown-js-LC1360\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> (no escaped pipes are allowed in horizontal rule)<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1361\" class=\"blob-num js-line-number\" data-line-number=\"1361\"><\/td>\n        <td id=\"file-markdown-js-LC1361\" class=\"blob-code blob-code-inner js-file-line\">    m[<span class=\"pl-c1\">2<\/span>] <span class=\"pl-k\">=<\/span> m[<span class=\"pl-c1\">2<\/span>].<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"><span class=\"pl-pds\">/<\/span><span class=\"pl-cce\">\\|<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span><span class=\"pl-pds\">&#39;<\/span><\/span>).<span class=\"pl-c1\">split<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>|<span class=\"pl-pds\">&#39;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1362\" class=\"blob-num js-line-number\" data-line-number=\"1362\"><\/td>\n        <td id=\"file-markdown-js-LC1362\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1363\" class=\"blob-num js-line-number\" data-line-number=\"1363\"><\/td>\n        <td id=\"file-markdown-js-LC1363\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> process alignment<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1364\" class=\"blob-num js-line-number\" data-line-number=\"1364\"><\/td>\n        <td id=\"file-markdown-js-LC1364\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">var<\/span> html_attrs <span class=\"pl-k\">=<\/span> [ ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1365\" class=\"blob-num js-line-number\" data-line-number=\"1365\"><\/td>\n        <td id=\"file-markdown-js-LC1365\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">forEach<\/span> (m[<span class=\"pl-c1\">2<\/span>], <span class=\"pl-k\">function<\/span> (<span class=\"pl-smi\">s<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1366\" class=\"blob-num js-line-number\" data-line-number=\"1366\"><\/td>\n        <td id=\"file-markdown-js-LC1366\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> (<span class=\"pl-smi\">s<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"><span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span>-<span class=\"pl-k\">+<\/span>:<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span>))       <span class=\"pl-smi\">html_attrs<\/span>.<span class=\"pl-c1\">push<\/span>({align<span class=\"pl-k\">:<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>right<span class=\"pl-pds\">&quot;<\/span><\/span>});<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1367\" class=\"blob-num js-line-number\" data-line-number=\"1367\"><\/td>\n        <td id=\"file-markdown-js-LC1367\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else<\/span> <span class=\"pl-k\">if<\/span> (<span class=\"pl-smi\">s<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"><span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span>:-<span class=\"pl-k\">+<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span>))  <span class=\"pl-smi\">html_attrs<\/span>.<span class=\"pl-c1\">push<\/span>({align<span class=\"pl-k\">:<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>left<span class=\"pl-pds\">&quot;<\/span><\/span>});<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1368\" class=\"blob-num js-line-number\" data-line-number=\"1368\"><\/td>\n        <td id=\"file-markdown-js-LC1368\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else<\/span> <span class=\"pl-k\">if<\/span> (<span class=\"pl-smi\">s<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"><span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span>:-<span class=\"pl-k\">+<\/span>:<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span>)) <span class=\"pl-smi\">html_attrs<\/span>.<span class=\"pl-c1\">push<\/span>({align<span class=\"pl-k\">:<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>center<span class=\"pl-pds\">&quot;<\/span><\/span>});<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1369\" class=\"blob-num js-line-number\" data-line-number=\"1369\"><\/td>\n        <td id=\"file-markdown-js-LC1369\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else<\/span>                              <span class=\"pl-smi\">html_attrs<\/span>.<span class=\"pl-c1\">push<\/span>({});<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1370\" class=\"blob-num js-line-number\" data-line-number=\"1370\"><\/td>\n        <td id=\"file-markdown-js-LC1370\" class=\"blob-code blob-code-inner js-file-line\">    });<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1371\" class=\"blob-num js-line-number\" data-line-number=\"1371\"><\/td>\n        <td id=\"file-markdown-js-LC1371\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1372\" class=\"blob-num js-line-number\" data-line-number=\"1372\"><\/td>\n        <td id=\"file-markdown-js-LC1372\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> now for the header, avoid escaped pipes<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1373\" class=\"blob-num js-line-number\" data-line-number=\"1373\"><\/td>\n        <td id=\"file-markdown-js-LC1373\" class=\"blob-code blob-code-inner js-file-line\">    m[<span class=\"pl-c1\">1<\/span>] <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">_split_on_unescaped<\/span>(m[<span class=\"pl-c1\">1<\/span>].<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"><span class=\"pl-pds\">/<\/span><span class=\"pl-cce\">\\|<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span><\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span><span class=\"pl-pds\">&#39;<\/span><\/span>), <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>|<span class=\"pl-pds\">&#39;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1374\" class=\"blob-num js-line-number\" data-line-number=\"1374\"><\/td>\n        <td id=\"file-markdown-js-LC1374\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">for<\/span> (i <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; i <span class=\"pl-k\">&lt;<\/span> m[<span class=\"pl-c1\">1<\/span>].<span class=\"pl-c1\">length<\/span>; i<span class=\"pl-k\">++<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1375\" class=\"blob-num js-line-number\" data-line-number=\"1375\"><\/td>\n        <td id=\"file-markdown-js-LC1375\" class=\"blob-code blob-code-inner js-file-line\">        table[<span class=\"pl-c1\">1<\/span>][<span class=\"pl-c1\">1<\/span>].<span class=\"pl-c1\">push<\/span>([<span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>th<span class=\"pl-pds\">&#39;<\/span><\/span>, html_attrs[i] <span class=\"pl-k\">||<\/span> {}].<span class=\"pl-c1\">concat<\/span>(<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1376\" class=\"blob-num js-line-number\" data-line-number=\"1376\"><\/td>\n        <td id=\"file-markdown-js-LC1376\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processInline<\/span>(m[<span class=\"pl-c1\">1<\/span>][i].<span class=\"pl-en\">trim<\/span>())));<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1377\" class=\"blob-num js-line-number\" data-line-number=\"1377\"><\/td>\n        <td id=\"file-markdown-js-LC1377\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1378\" class=\"blob-num js-line-number\" data-line-number=\"1378\"><\/td>\n        <td id=\"file-markdown-js-LC1378\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1379\" class=\"blob-num js-line-number\" data-line-number=\"1379\"><\/td>\n        <td id=\"file-markdown-js-LC1379\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> now for body contents<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1380\" class=\"blob-num js-line-number\" data-line-number=\"1380\"><\/td>\n        <td id=\"file-markdown-js-LC1380\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">forEach<\/span> (m[<span class=\"pl-c1\">3<\/span>].<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"><span class=\"pl-pds\">/<\/span><span class=\"pl-cce\">\\|<\/span><span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-k\">$<\/span><span class=\"pl-pds\">/<\/span>mg<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span><span class=\"pl-pds\">&#39;<\/span><\/span>).<span class=\"pl-c1\">split<\/span>(<span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span><span class=\"pl-cce\">\\n<\/span><span class=\"pl-pds\">&#39;<\/span><\/span>), <span class=\"pl-k\">function<\/span> (<span class=\"pl-smi\">row<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1381\" class=\"blob-num js-line-number\" data-line-number=\"1381\"><\/td>\n        <td id=\"file-markdown-js-LC1381\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">var<\/span> html_row <span class=\"pl-k\">=<\/span> [<span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>tr<span class=\"pl-pds\">&#39;<\/span><\/span>];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1382\" class=\"blob-num js-line-number\" data-line-number=\"1382\"><\/td>\n        <td id=\"file-markdown-js-LC1382\" class=\"blob-code blob-code-inner js-file-line\">        row <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">_split_on_unescaped<\/span>(row, <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>|<span class=\"pl-pds\">&#39;<\/span><\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1383\" class=\"blob-num js-line-number\" data-line-number=\"1383\"><\/td>\n        <td id=\"file-markdown-js-LC1383\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">for<\/span> (i <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; i <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">row<\/span>.<span class=\"pl-c1\">length<\/span>; i<span class=\"pl-k\">++<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1384\" class=\"blob-num js-line-number\" data-line-number=\"1384\"><\/td>\n        <td id=\"file-markdown-js-LC1384\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">html_row<\/span>.<span class=\"pl-c1\">push<\/span>([<span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>td<span class=\"pl-pds\">&#39;<\/span><\/span>, html_attrs[i] <span class=\"pl-k\">||<\/span> {}].<span class=\"pl-c1\">concat<\/span>(<span class=\"pl-c1\">this<\/span>.<span class=\"pl-en\">processInline<\/span>(row[i].<span class=\"pl-en\">trim<\/span>())));<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1385\" class=\"blob-num js-line-number\" data-line-number=\"1385\"><\/td>\n        <td id=\"file-markdown-js-LC1385\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1386\" class=\"blob-num js-line-number\" data-line-number=\"1386\"><\/td>\n        <td id=\"file-markdown-js-LC1386\" class=\"blob-code blob-code-inner js-file-line\">        table[<span class=\"pl-c1\">2<\/span>].<span class=\"pl-c1\">push<\/span>(html_row);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1387\" class=\"blob-num js-line-number\" data-line-number=\"1387\"><\/td>\n        <td id=\"file-markdown-js-LC1387\" class=\"blob-code blob-code-inner js-file-line\">    }, <span class=\"pl-c1\">this<\/span>);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1388\" class=\"blob-num js-line-number\" data-line-number=\"1388\"><\/td>\n        <td id=\"file-markdown-js-LC1388\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1389\" class=\"blob-num js-line-number\" data-line-number=\"1389\"><\/td>\n        <td id=\"file-markdown-js-LC1389\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> [table];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1390\" class=\"blob-num js-line-number\" data-line-number=\"1390\"><\/td>\n        <td id=\"file-markdown-js-LC1390\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1391\" class=\"blob-num js-line-number\" data-line-number=\"1391\"><\/td>\n        <td id=\"file-markdown-js-LC1391\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1392\" class=\"blob-num js-line-number\" data-line-number=\"1392\"><\/td>\n        <td id=\"file-markdown-js-LC1392\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Maruku<\/span>.<span class=\"pl-smi\">inline<\/span>[ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>{:<span class=\"pl-pds\">&quot;<\/span><\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span> <span class=\"pl-en\">inline_meta<\/span>( <span class=\"pl-smi\">text<\/span>, <span class=\"pl-smi\">matches<\/span>, <span class=\"pl-smi\">out<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1393\" class=\"blob-num js-line-number\" data-line-number=\"1393\"><\/td>\n        <td id=\"file-markdown-js-LC1393\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span><span class=\"pl-smi\">out<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1394\" class=\"blob-num js-line-number\" data-line-number=\"1394\"><\/td>\n        <td id=\"file-markdown-js-LC1394\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> [ <span class=\"pl-c1\">2<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>{:<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1395\" class=\"blob-num js-line-number\" data-line-number=\"1395\"><\/td>\n        <td id=\"file-markdown-js-LC1395\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1396\" class=\"blob-num js-line-number\" data-line-number=\"1396\"><\/td>\n        <td id=\"file-markdown-js-LC1396\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1397\" class=\"blob-num js-line-number\" data-line-number=\"1397\"><\/td>\n        <td id=\"file-markdown-js-LC1397\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> get the preceeding element<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1398\" class=\"blob-num js-line-number\" data-line-number=\"1398\"><\/td>\n        <td id=\"file-markdown-js-LC1398\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> before <span class=\"pl-k\">=<\/span> out[ <span class=\"pl-smi\">out<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> <span class=\"pl-c1\">1<\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1399\" class=\"blob-num js-line-number\" data-line-number=\"1399\"><\/td>\n        <td id=\"file-markdown-js-LC1399\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1400\" class=\"blob-num js-line-number\" data-line-number=\"1400\"><\/td>\n        <td id=\"file-markdown-js-LC1400\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">typeof<\/span> before <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1401\" class=\"blob-num js-line-number\" data-line-number=\"1401\"><\/td>\n        <td id=\"file-markdown-js-LC1401\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> [ <span class=\"pl-c1\">2<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>{:<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1402\" class=\"blob-num js-line-number\" data-line-number=\"1402\"><\/td>\n        <td id=\"file-markdown-js-LC1402\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1403\" class=\"blob-num js-line-number\" data-line-number=\"1403\"><\/td>\n        <td id=\"file-markdown-js-LC1403\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1404\" class=\"blob-num js-line-number\" data-line-number=\"1404\"><\/td>\n        <td id=\"file-markdown-js-LC1404\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> match a meta hash<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1405\" class=\"blob-num js-line-number\" data-line-number=\"1405\"><\/td>\n        <td id=\"file-markdown-js-LC1405\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> m <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">match<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-cce\">\\{<\/span>:<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span>((?:<span class=\"pl-cce\">\\\\\\}<\/span><span class=\"pl-k\">|<\/span><span class=\"pl-c1\">[<span class=\"pl-k\">^<\/span><span class=\"pl-cce\">\\}<\/span>]<\/span>)<span class=\"pl-k\">*<\/span>)<span class=\"pl-c1\">\\s<\/span><span class=\"pl-k\">*<\/span><span class=\"pl-cce\">\\}<\/span><span class=\"pl-pds\">/<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1406\" class=\"blob-num js-line-number\" data-line-number=\"1406\"><\/td>\n        <td id=\"file-markdown-js-LC1406\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1407\" class=\"blob-num js-line-number\" data-line-number=\"1407\"><\/td>\n        <td id=\"file-markdown-js-LC1407\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> no match, false alarm<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1408\" class=\"blob-num js-line-number\" data-line-number=\"1408\"><\/td>\n        <td id=\"file-markdown-js-LC1408\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>m ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1409\" class=\"blob-num js-line-number\" data-line-number=\"1409\"><\/td>\n        <td id=\"file-markdown-js-LC1409\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> [ <span class=\"pl-c1\">2<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>{:<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1410\" class=\"blob-num js-line-number\" data-line-number=\"1410\"><\/td>\n        <td id=\"file-markdown-js-LC1410\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1411\" class=\"blob-num js-line-number\" data-line-number=\"1411\"><\/td>\n        <td id=\"file-markdown-js-LC1411\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1412\" class=\"blob-num js-line-number\" data-line-number=\"1412\"><\/td>\n        <td id=\"file-markdown-js-LC1412\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> attach the attributes to the preceeding element<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1413\" class=\"blob-num js-line-number\" data-line-number=\"1413\"><\/td>\n        <td id=\"file-markdown-js-LC1413\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> meta <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">this<\/span>.<span class=\"pl-smi\">dialect<\/span>.<span class=\"pl-en\">processMetaHash<\/span>( m[ <span class=\"pl-c1\">1<\/span> ] ),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1414\" class=\"blob-num js-line-number\" data-line-number=\"1414\"><\/td>\n        <td id=\"file-markdown-js-LC1414\" class=\"blob-code blob-code-inner js-file-line\">      attr <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">extract_attr<\/span>( before );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1415\" class=\"blob-num js-line-number\" data-line-number=\"1415\"><\/td>\n        <td id=\"file-markdown-js-LC1415\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1416\" class=\"blob-num js-line-number\" data-line-number=\"1416\"><\/td>\n        <td id=\"file-markdown-js-LC1416\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">!<\/span>attr ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1417\" class=\"blob-num js-line-number\" data-line-number=\"1417\"><\/td>\n        <td id=\"file-markdown-js-LC1417\" class=\"blob-code blob-code-inner js-file-line\">    attr <span class=\"pl-k\">=<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1418\" class=\"blob-num js-line-number\" data-line-number=\"1418\"><\/td>\n        <td id=\"file-markdown-js-LC1418\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">before<\/span>.<span class=\"pl-c1\">splice<\/span>( <span class=\"pl-c1\">1<\/span>, <span class=\"pl-c1\">0<\/span>, attr );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1419\" class=\"blob-num js-line-number\" data-line-number=\"1419\"><\/td>\n        <td id=\"file-markdown-js-LC1419\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1420\" class=\"blob-num js-line-number\" data-line-number=\"1420\"><\/td>\n        <td id=\"file-markdown-js-LC1420\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1421\" class=\"blob-num js-line-number\" data-line-number=\"1421\"><\/td>\n        <td id=\"file-markdown-js-LC1421\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> k <span class=\"pl-k\">in<\/span> meta ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1422\" class=\"blob-num js-line-number\" data-line-number=\"1422\"><\/td>\n        <td id=\"file-markdown-js-LC1422\" class=\"blob-code blob-code-inner js-file-line\">    attr[ k ] <span class=\"pl-k\">=<\/span> meta[ k ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1423\" class=\"blob-num js-line-number\" data-line-number=\"1423\"><\/td>\n        <td id=\"file-markdown-js-LC1423\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1424\" class=\"blob-num js-line-number\" data-line-number=\"1424\"><\/td>\n        <td id=\"file-markdown-js-LC1424\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1425\" class=\"blob-num js-line-number\" data-line-number=\"1425\"><\/td>\n        <td id=\"file-markdown-js-LC1425\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> cut out the string and replace it with nothing<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1426\" class=\"blob-num js-line-number\" data-line-number=\"1426\"><\/td>\n        <td id=\"file-markdown-js-LC1426\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> [ m[ <span class=\"pl-c1\">0<\/span> ].<span class=\"pl-c1\">length<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1427\" class=\"blob-num js-line-number\" data-line-number=\"1427\"><\/td>\n        <td id=\"file-markdown-js-LC1427\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1428\" class=\"blob-num js-line-number\" data-line-number=\"1428\"><\/td>\n        <td id=\"file-markdown-js-LC1428\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1429\" class=\"blob-num js-line-number\" data-line-number=\"1429\"><\/td>\n        <td id=\"file-markdown-js-LC1429\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Maruku<\/span>.<span class=\"pl-smi\">inline<\/span>.<span class=\"pl-smi\">__escape__<\/span> <span class=\"pl-k\">=<\/span><span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span><span class=\"pl-k\">^<\/span><span class=\"pl-cce\">\\\\<\/span><span class=\"pl-c1\">[<span class=\"pl-cce\">\\\\<\/span>`<span class=\"pl-cce\">\\*<\/span>_{}<span class=\"pl-cce\">\\[\\]<\/span>()#<span class=\"pl-cce\">\\+<\/span><span class=\"pl-c1\">.<\/span>!<span class=\"pl-c1\">\\-|<\/span>:]<\/span><span class=\"pl-pds\">/<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1430\" class=\"blob-num js-line-number\" data-line-number=\"1430\"><\/td>\n        <td id=\"file-markdown-js-LC1430\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1431\" class=\"blob-num js-line-number\" data-line-number=\"1431\"><\/td>\n        <td id=\"file-markdown-js-LC1431\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-en\">buildBlockOrder<\/span> ( <span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Maruku<\/span>.<span class=\"pl-smi\">block<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1432\" class=\"blob-num js-line-number\" data-line-number=\"1432\"><\/td>\n        <td id=\"file-markdown-js-LC1432\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-en\">buildInlinePatterns<\/span>( <span class=\"pl-smi\">Markdown<\/span>.<span class=\"pl-smi\">dialects<\/span>.<span class=\"pl-smi\">Maruku<\/span>.<span class=\"pl-smi\">inline<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1433\" class=\"blob-num js-line-number\" data-line-number=\"1433\"><\/td>\n        <td id=\"file-markdown-js-LC1433\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1434\" class=\"blob-num js-line-number\" data-line-number=\"1434\"><\/td>\n        <td id=\"file-markdown-js-LC1434\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">var<\/span> isArray <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">Array<\/span>.<span class=\"pl-smi\">isArray<\/span> <span class=\"pl-k\">||<\/span> <span class=\"pl-k\">function<\/span>(<span class=\"pl-smi\">obj<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1435\" class=\"blob-num js-line-number\" data-line-number=\"1435\"><\/td>\n        <td id=\"file-markdown-js-LC1435\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">Object<\/span>.<span class=\"pl-c1\">prototype<\/span>.<span class=\"pl-smi\">toString<\/span>.<span class=\"pl-c1\">call<\/span>(obj) <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>[object Array]<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1436\" class=\"blob-num js-line-number\" data-line-number=\"1436\"><\/td>\n        <td id=\"file-markdown-js-LC1436\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1437\" class=\"blob-num js-line-number\" data-line-number=\"1437\"><\/td>\n        <td id=\"file-markdown-js-LC1437\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1438\" class=\"blob-num js-line-number\" data-line-number=\"1438\"><\/td>\n        <td id=\"file-markdown-js-LC1438\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">var<\/span> forEach;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1439\" class=\"blob-num js-line-number\" data-line-number=\"1439\"><\/td>\n        <td id=\"file-markdown-js-LC1439\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Don&#39;t mess with Array.prototype. Its not friendly<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1440\" class=\"blob-num js-line-number\" data-line-number=\"1440\"><\/td>\n        <td id=\"file-markdown-js-LC1440\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">if<\/span> ( <span class=\"pl-c1\">Array<\/span>.<span class=\"pl-c1\">prototype<\/span>.<span class=\"pl-smi\">forEach<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1441\" class=\"blob-num js-line-number\" data-line-number=\"1441\"><\/td>\n        <td id=\"file-markdown-js-LC1441\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-en\">forEach<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>( <span class=\"pl-smi\">arr<\/span>, <span class=\"pl-smi\">cb<\/span>, <span class=\"pl-smi\">thisp<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1442\" class=\"blob-num js-line-number\" data-line-number=\"1442\"><\/td>\n        <td id=\"file-markdown-js-LC1442\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> <span class=\"pl-smi\">arr<\/span>.<span class=\"pl-c1\">forEach<\/span>( cb, thisp );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1443\" class=\"blob-num js-line-number\" data-line-number=\"1443\"><\/td>\n        <td id=\"file-markdown-js-LC1443\" class=\"blob-code blob-code-inner js-file-line\">  };<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1444\" class=\"blob-num js-line-number\" data-line-number=\"1444\"><\/td>\n        <td id=\"file-markdown-js-LC1444\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1445\" class=\"blob-num js-line-number\" data-line-number=\"1445\"><\/td>\n        <td id=\"file-markdown-js-LC1445\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1446\" class=\"blob-num js-line-number\" data-line-number=\"1446\"><\/td>\n        <td id=\"file-markdown-js-LC1446\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-en\">forEach<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>(<span class=\"pl-smi\">arr<\/span>, <span class=\"pl-smi\">cb<\/span>, <span class=\"pl-smi\">thisp<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1447\" class=\"blob-num js-line-number\" data-line-number=\"1447\"><\/td>\n        <td id=\"file-markdown-js-LC1447\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">for<\/span> (<span class=\"pl-k\">var<\/span> i <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">0<\/span>; i <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">arr<\/span>.<span class=\"pl-c1\">length<\/span>; i<span class=\"pl-k\">++<\/span>) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1448\" class=\"blob-num js-line-number\" data-line-number=\"1448\"><\/td>\n        <td id=\"file-markdown-js-LC1448\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-smi\">cb<\/span>.<span class=\"pl-c1\">call<\/span>(thisp <span class=\"pl-k\">||<\/span> arr, arr[i], i, arr);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1449\" class=\"blob-num js-line-number\" data-line-number=\"1449\"><\/td>\n        <td id=\"file-markdown-js-LC1449\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1450\" class=\"blob-num js-line-number\" data-line-number=\"1450\"><\/td>\n        <td id=\"file-markdown-js-LC1450\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1451\" class=\"blob-num js-line-number\" data-line-number=\"1451\"><\/td>\n        <td id=\"file-markdown-js-LC1451\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1452\" class=\"blob-num js-line-number\" data-line-number=\"1452\"><\/td>\n        <td id=\"file-markdown-js-LC1452\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1453\" class=\"blob-num js-line-number\" data-line-number=\"1453\"><\/td>\n        <td id=\"file-markdown-js-LC1453\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">var<\/span> <span class=\"pl-en\">isEmpty<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>( <span class=\"pl-smi\">obj<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1454\" class=\"blob-num js-line-number\" data-line-number=\"1454\"><\/td>\n        <td id=\"file-markdown-js-LC1454\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> key <span class=\"pl-k\">in<\/span> obj ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1455\" class=\"blob-num js-line-number\" data-line-number=\"1455\"><\/td>\n        <td id=\"file-markdown-js-LC1455\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">hasOwnProperty<\/span>.<span class=\"pl-c1\">call<\/span>( obj, key ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1456\" class=\"blob-num js-line-number\" data-line-number=\"1456\"><\/td>\n        <td id=\"file-markdown-js-LC1456\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">false<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1457\" class=\"blob-num js-line-number\" data-line-number=\"1457\"><\/td>\n        <td id=\"file-markdown-js-LC1457\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1458\" class=\"blob-num js-line-number\" data-line-number=\"1458\"><\/td>\n        <td id=\"file-markdown-js-LC1458\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1459\" class=\"blob-num js-line-number\" data-line-number=\"1459\"><\/td>\n        <td id=\"file-markdown-js-LC1459\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1460\" class=\"blob-num js-line-number\" data-line-number=\"1460\"><\/td>\n        <td id=\"file-markdown-js-LC1460\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">true<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1461\" class=\"blob-num js-line-number\" data-line-number=\"1461\"><\/td>\n        <td id=\"file-markdown-js-LC1461\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1462\" class=\"blob-num js-line-number\" data-line-number=\"1462\"><\/td>\n        <td id=\"file-markdown-js-LC1462\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1463\" class=\"blob-num js-line-number\" data-line-number=\"1463\"><\/td>\n        <td id=\"file-markdown-js-LC1463\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">function<\/span> <span class=\"pl-en\">extract_attr<\/span>( <span class=\"pl-smi\">jsonml<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1464\" class=\"blob-num js-line-number\" data-line-number=\"1464\"><\/td>\n        <td id=\"file-markdown-js-LC1464\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> <span class=\"pl-en\">isArray<\/span>(jsonml)<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1465\" class=\"blob-num js-line-number\" data-line-number=\"1465\"><\/td>\n        <td id=\"file-markdown-js-LC1465\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&gt;<\/span> <span class=\"pl-c1\">1<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1466\" class=\"blob-num js-line-number\" data-line-number=\"1466\"><\/td>\n        <td id=\"file-markdown-js-LC1466\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">typeof<\/span> jsonml[ <span class=\"pl-c1\">1<\/span> ] <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>object<span class=\"pl-pds\">&quot;<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1467\" class=\"blob-num js-line-number\" data-line-number=\"1467\"><\/td>\n        <td id=\"file-markdown-js-LC1467\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">!<\/span>( <span class=\"pl-en\">isArray<\/span>(jsonml[ <span class=\"pl-c1\">1<\/span> ]) )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1468\" class=\"blob-num js-line-number\" data-line-number=\"1468\"><\/td>\n        <td id=\"file-markdown-js-LC1468\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">?<\/span> jsonml[ <span class=\"pl-c1\">1<\/span> ]<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1469\" class=\"blob-num js-line-number\" data-line-number=\"1469\"><\/td>\n        <td id=\"file-markdown-js-LC1469\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">:<\/span> <span class=\"pl-c1\">undefined<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1470\" class=\"blob-num js-line-number\" data-line-number=\"1470\"><\/td>\n        <td id=\"file-markdown-js-LC1470\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1471\" class=\"blob-num js-line-number\" data-line-number=\"1471\"><\/td>\n        <td id=\"file-markdown-js-LC1471\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1472\" class=\"blob-num js-line-number\" data-line-number=\"1472\"><\/td>\n        <td id=\"file-markdown-js-LC1472\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1473\" class=\"blob-num js-line-number\" data-line-number=\"1473\"><\/td>\n        <td id=\"file-markdown-js-LC1473\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1474\" class=\"blob-num js-line-number\" data-line-number=\"1474\"><\/td>\n        <td id=\"file-markdown-js-LC1474\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">/**<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1475\" class=\"blob-num js-line-number\" data-line-number=\"1475\"><\/td>\n        <td id=\"file-markdown-js-LC1475\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  renderJsonML( jsonml[, options] ) -&gt; String<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1476\" class=\"blob-num js-line-number\" data-line-number=\"1476\"><\/td>\n        <td id=\"file-markdown-js-LC1476\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - jsonml (Array): JsonML array to render to XML<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1477\" class=\"blob-num js-line-number\" data-line-number=\"1477\"><\/td>\n        <td id=\"file-markdown-js-LC1477\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - options (Object): options<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1478\" class=\"blob-num js-line-number\" data-line-number=\"1478\"><\/td>\n        <td id=\"file-markdown-js-LC1478\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1479\" class=\"blob-num js-line-number\" data-line-number=\"1479\"><\/td>\n        <td id=\"file-markdown-js-LC1479\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  Converts the given JsonML into well-formed XML.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1480\" class=\"blob-num js-line-number\" data-line-number=\"1480\"><\/td>\n        <td id=\"file-markdown-js-LC1480\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1481\" class=\"blob-num js-line-number\" data-line-number=\"1481\"><\/td>\n        <td id=\"file-markdown-js-LC1481\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  The options currently understood are:<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1482\" class=\"blob-num js-line-number\" data-line-number=\"1482\"><\/td>\n        <td id=\"file-markdown-js-LC1482\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1483\" class=\"blob-num js-line-number\" data-line-number=\"1483\"><\/td>\n        <td id=\"file-markdown-js-LC1483\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *  - root (Boolean): wether or not the root node should be included in the<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1484\" class=\"blob-num js-line-number\" data-line-number=\"1484\"><\/td>\n        <td id=\"file-markdown-js-LC1484\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *    output, or just its children. The default `false` is to not include the<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1485\" class=\"blob-num js-line-number\" data-line-number=\"1485\"><\/td>\n        <td id=\"file-markdown-js-LC1485\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> *    root itself.<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1486\" class=\"blob-num js-line-number\" data-line-number=\"1486\"><\/td>\n        <td id=\"file-markdown-js-LC1486\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"> <span class=\"pl-c\">*/<\/span><\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1487\" class=\"blob-num js-line-number\" data-line-number=\"1487\"><\/td>\n        <td id=\"file-markdown-js-LC1487\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">expose<\/span>.<span class=\"pl-en\">renderJsonML<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-k\">function<\/span>( <span class=\"pl-smi\">jsonml<\/span>, <span class=\"pl-smi\">options<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1488\" class=\"blob-num js-line-number\" data-line-number=\"1488\"><\/td>\n        <td id=\"file-markdown-js-LC1488\" class=\"blob-code blob-code-inner js-file-line\">  options <span class=\"pl-k\">=<\/span> options <span class=\"pl-k\">||<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1489\" class=\"blob-num js-line-number\" data-line-number=\"1489\"><\/td>\n        <td id=\"file-markdown-js-LC1489\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> include the root element in the rendered output?<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1490\" class=\"blob-num js-line-number\" data-line-number=\"1490\"><\/td>\n        <td id=\"file-markdown-js-LC1490\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">options<\/span>.<span class=\"pl-smi\">root<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">options<\/span>.<span class=\"pl-smi\">root<\/span> <span class=\"pl-k\">||<\/span> <span class=\"pl-c1\">false<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1491\" class=\"blob-num js-line-number\" data-line-number=\"1491\"><\/td>\n        <td id=\"file-markdown-js-LC1491\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1492\" class=\"blob-num js-line-number\" data-line-number=\"1492\"><\/td>\n        <td id=\"file-markdown-js-LC1492\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> content <span class=\"pl-k\">=<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1493\" class=\"blob-num js-line-number\" data-line-number=\"1493\"><\/td>\n        <td id=\"file-markdown-js-LC1493\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1494\" class=\"blob-num js-line-number\" data-line-number=\"1494\"><\/td>\n        <td id=\"file-markdown-js-LC1494\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">options<\/span>.<span class=\"pl-smi\">root<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1495\" class=\"blob-num js-line-number\" data-line-number=\"1495\"><\/td>\n        <td id=\"file-markdown-js-LC1495\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">content<\/span>.<span class=\"pl-c1\">push<\/span>( <span class=\"pl-en\">render_tree<\/span>( jsonml ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1496\" class=\"blob-num js-line-number\" data-line-number=\"1496\"><\/td>\n        <td id=\"file-markdown-js-LC1496\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1497\" class=\"blob-num js-line-number\" data-line-number=\"1497\"><\/td>\n        <td id=\"file-markdown-js-LC1497\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1498\" class=\"blob-num js-line-number\" data-line-number=\"1498\"><\/td>\n        <td id=\"file-markdown-js-LC1498\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">shift<\/span>(); <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> get rid of the tag<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1499\" class=\"blob-num js-line-number\" data-line-number=\"1499\"><\/td>\n        <td id=\"file-markdown-js-LC1499\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">typeof<\/span> jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>object<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">!<\/span>( jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">instanceof<\/span> <span class=\"pl-c1\">Array<\/span> ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1500\" class=\"blob-num js-line-number\" data-line-number=\"1500\"><\/td>\n        <td id=\"file-markdown-js-LC1500\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">shift<\/span>(); <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> get rid of the attributes<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1501\" class=\"blob-num js-line-number\" data-line-number=\"1501\"><\/td>\n        <td id=\"file-markdown-js-LC1501\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1502\" class=\"blob-num js-line-number\" data-line-number=\"1502\"><\/td>\n        <td id=\"file-markdown-js-LC1502\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1503\" class=\"blob-num js-line-number\" data-line-number=\"1503\"><\/td>\n        <td id=\"file-markdown-js-LC1503\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">while<\/span> ( <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1504\" class=\"blob-num js-line-number\" data-line-number=\"1504\"><\/td>\n        <td id=\"file-markdown-js-LC1504\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-smi\">content<\/span>.<span class=\"pl-c1\">push<\/span>( <span class=\"pl-en\">render_tree<\/span>( <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">shift<\/span>() ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1505\" class=\"blob-num js-line-number\" data-line-number=\"1505\"><\/td>\n        <td id=\"file-markdown-js-LC1505\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1506\" class=\"blob-num js-line-number\" data-line-number=\"1506\"><\/td>\n        <td id=\"file-markdown-js-LC1506\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1507\" class=\"blob-num js-line-number\" data-line-number=\"1507\"><\/td>\n        <td id=\"file-markdown-js-LC1507\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1508\" class=\"blob-num js-line-number\" data-line-number=\"1508\"><\/td>\n        <td id=\"file-markdown-js-LC1508\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> <span class=\"pl-smi\">content<\/span>.<span class=\"pl-c1\">join<\/span>( <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\n\\n<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1509\" class=\"blob-num js-line-number\" data-line-number=\"1509\"><\/td>\n        <td id=\"file-markdown-js-LC1509\" class=\"blob-code blob-code-inner js-file-line\">};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1510\" class=\"blob-num js-line-number\" data-line-number=\"1510\"><\/td>\n        <td id=\"file-markdown-js-LC1510\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1511\" class=\"blob-num js-line-number\" data-line-number=\"1511\"><\/td>\n        <td id=\"file-markdown-js-LC1511\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">function<\/span> <span class=\"pl-en\">escapeHTML<\/span>( <span class=\"pl-smi\">text<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1512\" class=\"blob-num js-line-number\" data-line-number=\"1512\"><\/td>\n        <td id=\"file-markdown-js-LC1512\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> <span class=\"pl-smi\">text<\/span>.<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>&amp;<span class=\"pl-pds\">/<\/span>g<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&amp;amp;<span class=\"pl-pds\">&quot;<\/span><\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1513\" class=\"blob-num js-line-number\" data-line-number=\"1513\"><\/td>\n        <td id=\"file-markdown-js-LC1513\" class=\"blob-code blob-code-inner js-file-line\">             .<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>&lt;<span class=\"pl-pds\">/<\/span>g<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&amp;lt;<span class=\"pl-pds\">&quot;<\/span><\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1514\" class=\"blob-num js-line-number\" data-line-number=\"1514\"><\/td>\n        <td id=\"file-markdown-js-LC1514\" class=\"blob-code blob-code-inner js-file-line\">             .<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>&gt;<span class=\"pl-pds\">/<\/span>g<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&amp;gt;<span class=\"pl-pds\">&quot;<\/span><\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1515\" class=\"blob-num js-line-number\" data-line-number=\"1515\"><\/td>\n        <td id=\"file-markdown-js-LC1515\" class=\"blob-code blob-code-inner js-file-line\">             .<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>&quot;<span class=\"pl-pds\">/<\/span>g<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&amp;quot;<span class=\"pl-pds\">&quot;<\/span><\/span> )<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1516\" class=\"blob-num js-line-number\" data-line-number=\"1516\"><\/td>\n        <td id=\"file-markdown-js-LC1516\" class=\"blob-code blob-code-inner js-file-line\">             .<span class=\"pl-c1\">replace<\/span>(<span class=\"pl-sr\"> <span class=\"pl-pds\">/<\/span>&#39;<span class=\"pl-pds\">/<\/span>g<\/span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&amp;#39;<span class=\"pl-pds\">&quot;<\/span><\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1517\" class=\"blob-num js-line-number\" data-line-number=\"1517\"><\/td>\n        <td id=\"file-markdown-js-LC1517\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1518\" class=\"blob-num js-line-number\" data-line-number=\"1518\"><\/td>\n        <td id=\"file-markdown-js-LC1518\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1519\" class=\"blob-num js-line-number\" data-line-number=\"1519\"><\/td>\n        <td id=\"file-markdown-js-LC1519\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">function<\/span> <span class=\"pl-en\">render_tree<\/span>( <span class=\"pl-smi\">jsonml<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1520\" class=\"blob-num js-line-number\" data-line-number=\"1520\"><\/td>\n        <td id=\"file-markdown-js-LC1520\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> basic case<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1521\" class=\"blob-num js-line-number\" data-line-number=\"1521\"><\/td>\n        <td id=\"file-markdown-js-LC1521\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">typeof<\/span> jsonml <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1522\" class=\"blob-num js-line-number\" data-line-number=\"1522\"><\/td>\n        <td id=\"file-markdown-js-LC1522\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> <span class=\"pl-en\">escapeHTML<\/span>( jsonml );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1523\" class=\"blob-num js-line-number\" data-line-number=\"1523\"><\/td>\n        <td id=\"file-markdown-js-LC1523\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1524\" class=\"blob-num js-line-number\" data-line-number=\"1524\"><\/td>\n        <td id=\"file-markdown-js-LC1524\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1525\" class=\"blob-num js-line-number\" data-line-number=\"1525\"><\/td>\n        <td id=\"file-markdown-js-LC1525\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> tag <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">shift<\/span>(),<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1526\" class=\"blob-num js-line-number\" data-line-number=\"1526\"><\/td>\n        <td id=\"file-markdown-js-LC1526\" class=\"blob-code blob-code-inner js-file-line\">      attributes <span class=\"pl-k\">=<\/span> {},<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1527\" class=\"blob-num js-line-number\" data-line-number=\"1527\"><\/td>\n        <td id=\"file-markdown-js-LC1527\" class=\"blob-code blob-code-inner js-file-line\">      content <span class=\"pl-k\">=<\/span> [];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1528\" class=\"blob-num js-line-number\" data-line-number=\"1528\"><\/td>\n        <td id=\"file-markdown-js-LC1528\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1529\" class=\"blob-num js-line-number\" data-line-number=\"1529\"><\/td>\n        <td id=\"file-markdown-js-LC1529\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">typeof<\/span> jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>object<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">!<\/span>( jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">instanceof<\/span> <span class=\"pl-c1\">Array<\/span> ) ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1530\" class=\"blob-num js-line-number\" data-line-number=\"1530\"><\/td>\n        <td id=\"file-markdown-js-LC1530\" class=\"blob-code blob-code-inner js-file-line\">    attributes <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">shift<\/span>();<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1531\" class=\"blob-num js-line-number\" data-line-number=\"1531\"><\/td>\n        <td id=\"file-markdown-js-LC1531\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1532\" class=\"blob-num js-line-number\" data-line-number=\"1532\"><\/td>\n        <td id=\"file-markdown-js-LC1532\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1533\" class=\"blob-num js-line-number\" data-line-number=\"1533\"><\/td>\n        <td id=\"file-markdown-js-LC1533\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">while<\/span> ( <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1534\" class=\"blob-num js-line-number\" data-line-number=\"1534\"><\/td>\n        <td id=\"file-markdown-js-LC1534\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">content<\/span>.<span class=\"pl-c1\">push<\/span>( <span class=\"pl-en\">render_tree<\/span>( <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">shift<\/span>() ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1535\" class=\"blob-num js-line-number\" data-line-number=\"1535\"><\/td>\n        <td id=\"file-markdown-js-LC1535\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1536\" class=\"blob-num js-line-number\" data-line-number=\"1536\"><\/td>\n        <td id=\"file-markdown-js-LC1536\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1537\" class=\"blob-num js-line-number\" data-line-number=\"1537\"><\/td>\n        <td id=\"file-markdown-js-LC1537\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> tag_attrs <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1538\" class=\"blob-num js-line-number\" data-line-number=\"1538\"><\/td>\n        <td id=\"file-markdown-js-LC1538\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> a <span class=\"pl-k\">in<\/span> attributes ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1539\" class=\"blob-num js-line-number\" data-line-number=\"1539\"><\/td>\n        <td id=\"file-markdown-js-LC1539\" class=\"blob-code blob-code-inner js-file-line\">    tag_attrs <span class=\"pl-k\">+=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span> <span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> a <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>=&quot;<span class=\"pl-pds\">&#39;<\/span><\/span> <span class=\"pl-k\">+<\/span> <span class=\"pl-en\">escapeHTML<\/span>( attributes[ a ] ) <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;<\/span>&quot;<span class=\"pl-pds\">&#39;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1540\" class=\"blob-num js-line-number\" data-line-number=\"1540\"><\/td>\n        <td id=\"file-markdown-js-LC1540\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1541\" class=\"blob-num js-line-number\" data-line-number=\"1541\"><\/td>\n        <td id=\"file-markdown-js-LC1541\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1542\" class=\"blob-num js-line-number\" data-line-number=\"1542\"><\/td>\n        <td id=\"file-markdown-js-LC1542\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> be careful about adding whitespace here for inline elements<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1543\" class=\"blob-num js-line-number\" data-line-number=\"1543\"><\/td>\n        <td id=\"file-markdown-js-LC1543\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( tag <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>img<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">||<\/span> tag <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>br<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">||<\/span> tag <span class=\"pl-k\">==<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>hr<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1544\" class=\"blob-num js-line-number\" data-line-number=\"1544\"><\/td>\n        <td id=\"file-markdown-js-LC1544\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&lt;<span class=\"pl-pds\">&quot;<\/span><\/span><span class=\"pl-k\">+<\/span> tag <span class=\"pl-k\">+<\/span> tag_attrs <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>/&gt;<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1545\" class=\"blob-num js-line-number\" data-line-number=\"1545\"><\/td>\n        <td id=\"file-markdown-js-LC1545\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1546\" class=\"blob-num js-line-number\" data-line-number=\"1546\"><\/td>\n        <td id=\"file-markdown-js-LC1546\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1547\" class=\"blob-num js-line-number\" data-line-number=\"1547\"><\/td>\n        <td id=\"file-markdown-js-LC1547\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&lt;<span class=\"pl-pds\">&quot;<\/span><\/span><span class=\"pl-k\">+<\/span> tag <span class=\"pl-k\">+<\/span> tag_attrs <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&gt;<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> <span class=\"pl-smi\">content<\/span>.<span class=\"pl-c1\">join<\/span>( <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span> ) <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&lt;/<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> tag <span class=\"pl-k\">+<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>&gt;<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1548\" class=\"blob-num js-line-number\" data-line-number=\"1548\"><\/td>\n        <td id=\"file-markdown-js-LC1548\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1549\" class=\"blob-num js-line-number\" data-line-number=\"1549\"><\/td>\n        <td id=\"file-markdown-js-LC1549\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1550\" class=\"blob-num js-line-number\" data-line-number=\"1550\"><\/td>\n        <td id=\"file-markdown-js-LC1550\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1551\" class=\"blob-num js-line-number\" data-line-number=\"1551\"><\/td>\n        <td id=\"file-markdown-js-LC1551\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">function<\/span> <span class=\"pl-en\">convert_tree_to_html<\/span>( <span class=\"pl-smi\">tree<\/span>, <span class=\"pl-smi\">references<\/span>, <span class=\"pl-smi\">options<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1552\" class=\"blob-num js-line-number\" data-line-number=\"1552\"><\/td>\n        <td id=\"file-markdown-js-LC1552\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> i;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1553\" class=\"blob-num js-line-number\" data-line-number=\"1553\"><\/td>\n        <td id=\"file-markdown-js-LC1553\" class=\"blob-code blob-code-inner js-file-line\">  options <span class=\"pl-k\">=<\/span> options <span class=\"pl-k\">||<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1554\" class=\"blob-num js-line-number\" data-line-number=\"1554\"><\/td>\n        <td id=\"file-markdown-js-LC1554\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1555\" class=\"blob-num js-line-number\" data-line-number=\"1555\"><\/td>\n        <td id=\"file-markdown-js-LC1555\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> shallow clone<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1556\" class=\"blob-num js-line-number\" data-line-number=\"1556\"><\/td>\n        <td id=\"file-markdown-js-LC1556\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> jsonml <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">tree<\/span>.<span class=\"pl-c1\">slice<\/span>( <span class=\"pl-c1\">0<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1557\" class=\"blob-num js-line-number\" data-line-number=\"1557\"><\/td>\n        <td id=\"file-markdown-js-LC1557\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1558\" class=\"blob-num js-line-number\" data-line-number=\"1558\"><\/td>\n        <td id=\"file-markdown-js-LC1558\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">typeof<\/span> <span class=\"pl-smi\">options<\/span>.<span class=\"pl-smi\">preprocessTreeNode<\/span> <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>function<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1559\" class=\"blob-num js-line-number\" data-line-number=\"1559\"><\/td>\n        <td id=\"file-markdown-js-LC1559\" class=\"blob-code blob-code-inner js-file-line\">      jsonml <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">options<\/span>.<span class=\"pl-en\">preprocessTreeNode<\/span>(jsonml, references);<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1560\" class=\"blob-num js-line-number\" data-line-number=\"1560\"><\/td>\n        <td id=\"file-markdown-js-LC1560\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1561\" class=\"blob-num js-line-number\" data-line-number=\"1561\"><\/td>\n        <td id=\"file-markdown-js-LC1561\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1562\" class=\"blob-num js-line-number\" data-line-number=\"1562\"><\/td>\n        <td id=\"file-markdown-js-LC1562\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> Clone attributes if they exist<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1563\" class=\"blob-num js-line-number\" data-line-number=\"1563\"><\/td>\n        <td id=\"file-markdown-js-LC1563\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> attrs <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">extract_attr<\/span>( jsonml );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1564\" class=\"blob-num js-line-number\" data-line-number=\"1564\"><\/td>\n        <td id=\"file-markdown-js-LC1564\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( attrs ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1565\" class=\"blob-num js-line-number\" data-line-number=\"1565\"><\/td>\n        <td id=\"file-markdown-js-LC1565\" class=\"blob-code blob-code-inner js-file-line\">    jsonml[ <span class=\"pl-c1\">1<\/span> ] <span class=\"pl-k\">=<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1566\" class=\"blob-num js-line-number\" data-line-number=\"1566\"><\/td>\n        <td id=\"file-markdown-js-LC1566\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">for<\/span> ( i <span class=\"pl-k\">in<\/span> attrs ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1567\" class=\"blob-num js-line-number\" data-line-number=\"1567\"><\/td>\n        <td id=\"file-markdown-js-LC1567\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">1<\/span> ][ i ] <span class=\"pl-k\">=<\/span> attrs[ i ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1568\" class=\"blob-num js-line-number\" data-line-number=\"1568\"><\/td>\n        <td id=\"file-markdown-js-LC1568\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1569\" class=\"blob-num js-line-number\" data-line-number=\"1569\"><\/td>\n        <td id=\"file-markdown-js-LC1569\" class=\"blob-code blob-code-inner js-file-line\">    attrs <span class=\"pl-k\">=<\/span> jsonml[ <span class=\"pl-c1\">1<\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1570\" class=\"blob-num js-line-number\" data-line-number=\"1570\"><\/td>\n        <td id=\"file-markdown-js-LC1570\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1571\" class=\"blob-num js-line-number\" data-line-number=\"1571\"><\/td>\n        <td id=\"file-markdown-js-LC1571\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1572\" class=\"blob-num js-line-number\" data-line-number=\"1572\"><\/td>\n        <td id=\"file-markdown-js-LC1572\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> basic case<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1573\" class=\"blob-num js-line-number\" data-line-number=\"1573\"><\/td>\n        <td id=\"file-markdown-js-LC1573\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">typeof<\/span> jsonml <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1574\" class=\"blob-num js-line-number\" data-line-number=\"1574\"><\/td>\n        <td id=\"file-markdown-js-LC1574\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> jsonml;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1575\" class=\"blob-num js-line-number\" data-line-number=\"1575\"><\/td>\n        <td id=\"file-markdown-js-LC1575\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1576\" class=\"blob-num js-line-number\" data-line-number=\"1576\"><\/td>\n        <td id=\"file-markdown-js-LC1576\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1577\" class=\"blob-num js-line-number\" data-line-number=\"1577\"><\/td>\n        <td id=\"file-markdown-js-LC1577\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> convert this node<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1578\" class=\"blob-num js-line-number\" data-line-number=\"1578\"><\/td>\n        <td id=\"file-markdown-js-LC1578\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">switch<\/span> ( jsonml[ <span class=\"pl-c1\">0<\/span> ] ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1579\" class=\"blob-num js-line-number\" data-line-number=\"1579\"><\/td>\n        <td id=\"file-markdown-js-LC1579\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>header<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1580\" class=\"blob-num js-line-number\" data-line-number=\"1580\"><\/td>\n        <td id=\"file-markdown-js-LC1580\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>h<span class=\"pl-pds\">&quot;<\/span><\/span> <span class=\"pl-k\">+<\/span> jsonml[ <span class=\"pl-c1\">1<\/span> ].<span class=\"pl-smi\">level<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1581\" class=\"blob-num js-line-number\" data-line-number=\"1581\"><\/td>\n        <td id=\"file-markdown-js-LC1581\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">delete<\/span> jsonml[ <span class=\"pl-c1\">1<\/span> ].<span class=\"pl-smi\">level<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1582\" class=\"blob-num js-line-number\" data-line-number=\"1582\"><\/td>\n        <td id=\"file-markdown-js-LC1582\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1583\" class=\"blob-num js-line-number\" data-line-number=\"1583\"><\/td>\n        <td id=\"file-markdown-js-LC1583\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>bulletlist<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1584\" class=\"blob-num js-line-number\" data-line-number=\"1584\"><\/td>\n        <td id=\"file-markdown-js-LC1584\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>ul<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1585\" class=\"blob-num js-line-number\" data-line-number=\"1585\"><\/td>\n        <td id=\"file-markdown-js-LC1585\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1586\" class=\"blob-num js-line-number\" data-line-number=\"1586\"><\/td>\n        <td id=\"file-markdown-js-LC1586\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>numberlist<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1587\" class=\"blob-num js-line-number\" data-line-number=\"1587\"><\/td>\n        <td id=\"file-markdown-js-LC1587\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>ol<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1588\" class=\"blob-num js-line-number\" data-line-number=\"1588\"><\/td>\n        <td id=\"file-markdown-js-LC1588\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1589\" class=\"blob-num js-line-number\" data-line-number=\"1589\"><\/td>\n        <td id=\"file-markdown-js-LC1589\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>listitem<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1590\" class=\"blob-num js-line-number\" data-line-number=\"1590\"><\/td>\n        <td id=\"file-markdown-js-LC1590\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>li<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1591\" class=\"blob-num js-line-number\" data-line-number=\"1591\"><\/td>\n        <td id=\"file-markdown-js-LC1591\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1592\" class=\"blob-num js-line-number\" data-line-number=\"1592\"><\/td>\n        <td id=\"file-markdown-js-LC1592\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>para<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1593\" class=\"blob-num js-line-number\" data-line-number=\"1593\"><\/td>\n        <td id=\"file-markdown-js-LC1593\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>p<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1594\" class=\"blob-num js-line-number\" data-line-number=\"1594\"><\/td>\n        <td id=\"file-markdown-js-LC1594\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1595\" class=\"blob-num js-line-number\" data-line-number=\"1595\"><\/td>\n        <td id=\"file-markdown-js-LC1595\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>markdown<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1596\" class=\"blob-num js-line-number\" data-line-number=\"1596\"><\/td>\n        <td id=\"file-markdown-js-LC1596\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>html<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1597\" class=\"blob-num js-line-number\" data-line-number=\"1597\"><\/td>\n        <td id=\"file-markdown-js-LC1597\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( attrs ) <span class=\"pl-k\">delete<\/span> <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">references<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1598\" class=\"blob-num js-line-number\" data-line-number=\"1598\"><\/td>\n        <td id=\"file-markdown-js-LC1598\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1599\" class=\"blob-num js-line-number\" data-line-number=\"1599\"><\/td>\n        <td id=\"file-markdown-js-LC1599\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>code_block<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1600\" class=\"blob-num js-line-number\" data-line-number=\"1600\"><\/td>\n        <td id=\"file-markdown-js-LC1600\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>pre<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1601\" class=\"blob-num js-line-number\" data-line-number=\"1601\"><\/td>\n        <td id=\"file-markdown-js-LC1601\" class=\"blob-code blob-code-inner js-file-line\">      i <span class=\"pl-k\">=<\/span> attrs <span class=\"pl-k\">?<\/span> <span class=\"pl-c1\">2<\/span> <span class=\"pl-k\">:<\/span> <span class=\"pl-c1\">1<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1602\" class=\"blob-num js-line-number\" data-line-number=\"1602\"><\/td>\n        <td id=\"file-markdown-js-LC1602\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> code <span class=\"pl-k\">=<\/span> [ <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>code<span class=\"pl-pds\">&quot;<\/span><\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1603\" class=\"blob-num js-line-number\" data-line-number=\"1603\"><\/td>\n        <td id=\"file-markdown-js-LC1603\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-smi\">code<\/span>.<span class=\"pl-smi\">push<\/span>.<span class=\"pl-c1\">apply<\/span>( code, <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">splice<\/span>( i, <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">-<\/span> i ) );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1604\" class=\"blob-num js-line-number\" data-line-number=\"1604\"><\/td>\n        <td id=\"file-markdown-js-LC1604\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ i ] <span class=\"pl-k\">=<\/span> code;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1605\" class=\"blob-num js-line-number\" data-line-number=\"1605\"><\/td>\n        <td id=\"file-markdown-js-LC1605\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1606\" class=\"blob-num js-line-number\" data-line-number=\"1606\"><\/td>\n        <td id=\"file-markdown-js-LC1606\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>inlinecode<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1607\" class=\"blob-num js-line-number\" data-line-number=\"1607\"><\/td>\n        <td id=\"file-markdown-js-LC1607\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>code<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1608\" class=\"blob-num js-line-number\" data-line-number=\"1608\"><\/td>\n        <td id=\"file-markdown-js-LC1608\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1609\" class=\"blob-num js-line-number\" data-line-number=\"1609\"><\/td>\n        <td id=\"file-markdown-js-LC1609\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>img<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1610\" class=\"blob-num js-line-number\" data-line-number=\"1610\"><\/td>\n        <td id=\"file-markdown-js-LC1610\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">1<\/span> ].<span class=\"pl-smi\">src<\/span> <span class=\"pl-k\">=<\/span> jsonml[ <span class=\"pl-c1\">1<\/span> ].<span class=\"pl-c1\">href<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1611\" class=\"blob-num js-line-number\" data-line-number=\"1611\"><\/td>\n        <td id=\"file-markdown-js-LC1611\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">delete<\/span> jsonml[ <span class=\"pl-c1\">1<\/span> ].<span class=\"pl-c1\">href<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1612\" class=\"blob-num js-line-number\" data-line-number=\"1612\"><\/td>\n        <td id=\"file-markdown-js-LC1612\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1613\" class=\"blob-num js-line-number\" data-line-number=\"1613\"><\/td>\n        <td id=\"file-markdown-js-LC1613\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>linebreak<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1614\" class=\"blob-num js-line-number\" data-line-number=\"1614\"><\/td>\n        <td id=\"file-markdown-js-LC1614\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>br<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1615\" class=\"blob-num js-line-number\" data-line-number=\"1615\"><\/td>\n        <td id=\"file-markdown-js-LC1615\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1616\" class=\"blob-num js-line-number\" data-line-number=\"1616\"><\/td>\n        <td id=\"file-markdown-js-LC1616\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>link<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1617\" class=\"blob-num js-line-number\" data-line-number=\"1617\"><\/td>\n        <td id=\"file-markdown-js-LC1617\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>a<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1618\" class=\"blob-num js-line-number\" data-line-number=\"1618\"><\/td>\n        <td id=\"file-markdown-js-LC1618\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1619\" class=\"blob-num js-line-number\" data-line-number=\"1619\"><\/td>\n        <td id=\"file-markdown-js-LC1619\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>link_ref<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1620\" class=\"blob-num js-line-number\" data-line-number=\"1620\"><\/td>\n        <td id=\"file-markdown-js-LC1620\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>a<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1621\" class=\"blob-num js-line-number\" data-line-number=\"1621\"><\/td>\n        <td id=\"file-markdown-js-LC1621\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1622\" class=\"blob-num js-line-number\" data-line-number=\"1622\"><\/td>\n        <td id=\"file-markdown-js-LC1622\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> grab this ref and clean up the attribute node<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1623\" class=\"blob-num js-line-number\" data-line-number=\"1623\"><\/td>\n        <td id=\"file-markdown-js-LC1623\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> ref <span class=\"pl-k\">=<\/span> references[ <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">ref<\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1624\" class=\"blob-num js-line-number\" data-line-number=\"1624\"><\/td>\n        <td id=\"file-markdown-js-LC1624\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1625\" class=\"blob-num js-line-number\" data-line-number=\"1625\"><\/td>\n        <td id=\"file-markdown-js-LC1625\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if the reference exists, make the link<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1626\" class=\"blob-num js-line-number\" data-line-number=\"1626\"><\/td>\n        <td id=\"file-markdown-js-LC1626\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( ref ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1627\" class=\"blob-num js-line-number\" data-line-number=\"1627\"><\/td>\n        <td id=\"file-markdown-js-LC1627\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">delete<\/span> <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">ref<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1628\" class=\"blob-num js-line-number\" data-line-number=\"1628\"><\/td>\n        <td id=\"file-markdown-js-LC1628\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1629\" class=\"blob-num js-line-number\" data-line-number=\"1629\"><\/td>\n        <td id=\"file-markdown-js-LC1629\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> add in the href and title, if present<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1630\" class=\"blob-num js-line-number\" data-line-number=\"1630\"><\/td>\n        <td id=\"file-markdown-js-LC1630\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-c1\">href<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">ref<\/span>.<span class=\"pl-c1\">href<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1631\" class=\"blob-num js-line-number\" data-line-number=\"1631\"><\/td>\n        <td id=\"file-markdown-js-LC1631\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">ref<\/span>.<span class=\"pl-c1\">title<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1632\" class=\"blob-num js-line-number\" data-line-number=\"1632\"><\/td>\n        <td id=\"file-markdown-js-LC1632\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-c1\">title<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">ref<\/span>.<span class=\"pl-c1\">title<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1633\" class=\"blob-num js-line-number\" data-line-number=\"1633\"><\/td>\n        <td id=\"file-markdown-js-LC1633\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1634\" class=\"blob-num js-line-number\" data-line-number=\"1634\"><\/td>\n        <td id=\"file-markdown-js-LC1634\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1635\" class=\"blob-num js-line-number\" data-line-number=\"1635\"><\/td>\n        <td id=\"file-markdown-js-LC1635\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> get rid of the unneeded original text<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1636\" class=\"blob-num js-line-number\" data-line-number=\"1636\"><\/td>\n        <td id=\"file-markdown-js-LC1636\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">delete<\/span> <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">original<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1637\" class=\"blob-num js-line-number\" data-line-number=\"1637\"><\/td>\n        <td id=\"file-markdown-js-LC1637\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1638\" class=\"blob-num js-line-number\" data-line-number=\"1638\"><\/td>\n        <td id=\"file-markdown-js-LC1638\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> the reference doesn&#39;t exist, so revert to plain text<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1639\" class=\"blob-num js-line-number\" data-line-number=\"1639\"><\/td>\n        <td id=\"file-markdown-js-LC1639\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1640\" class=\"blob-num js-line-number\" data-line-number=\"1640\"><\/td>\n        <td id=\"file-markdown-js-LC1640\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">original<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1641\" class=\"blob-num js-line-number\" data-line-number=\"1641\"><\/td>\n        <td id=\"file-markdown-js-LC1641\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1642\" class=\"blob-num js-line-number\" data-line-number=\"1642\"><\/td>\n        <td id=\"file-markdown-js-LC1642\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1643\" class=\"blob-num js-line-number\" data-line-number=\"1643\"><\/td>\n        <td id=\"file-markdown-js-LC1643\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">case<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>img_ref<span class=\"pl-pds\">&quot;<\/span><\/span>:<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1644\" class=\"blob-num js-line-number\" data-line-number=\"1644\"><\/td>\n        <td id=\"file-markdown-js-LC1644\" class=\"blob-code blob-code-inner js-file-line\">      jsonml[ <span class=\"pl-c1\">0<\/span> ] <span class=\"pl-k\">=<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>img<span class=\"pl-pds\">&quot;<\/span><\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1645\" class=\"blob-num js-line-number\" data-line-number=\"1645\"><\/td>\n        <td id=\"file-markdown-js-LC1645\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1646\" class=\"blob-num js-line-number\" data-line-number=\"1646\"><\/td>\n        <td id=\"file-markdown-js-LC1646\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> grab this ref and clean up the attribute node<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1647\" class=\"blob-num js-line-number\" data-line-number=\"1647\"><\/td>\n        <td id=\"file-markdown-js-LC1647\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">var<\/span> ref <span class=\"pl-k\">=<\/span> references[ <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">ref<\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1648\" class=\"blob-num js-line-number\" data-line-number=\"1648\"><\/td>\n        <td id=\"file-markdown-js-LC1648\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1649\" class=\"blob-num js-line-number\" data-line-number=\"1649\"><\/td>\n        <td id=\"file-markdown-js-LC1649\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if the reference exists, make the link<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1650\" class=\"blob-num js-line-number\" data-line-number=\"1650\"><\/td>\n        <td id=\"file-markdown-js-LC1650\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( ref ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1651\" class=\"blob-num js-line-number\" data-line-number=\"1651\"><\/td>\n        <td id=\"file-markdown-js-LC1651\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">delete<\/span> <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">ref<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1652\" class=\"blob-num js-line-number\" data-line-number=\"1652\"><\/td>\n        <td id=\"file-markdown-js-LC1652\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1653\" class=\"blob-num js-line-number\" data-line-number=\"1653\"><\/td>\n        <td id=\"file-markdown-js-LC1653\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> add in the href and title, if present<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1654\" class=\"blob-num js-line-number\" data-line-number=\"1654\"><\/td>\n        <td id=\"file-markdown-js-LC1654\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">src<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">ref<\/span>.<span class=\"pl-c1\">href<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1655\" class=\"blob-num js-line-number\" data-line-number=\"1655\"><\/td>\n        <td id=\"file-markdown-js-LC1655\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if<\/span> ( <span class=\"pl-smi\">ref<\/span>.<span class=\"pl-c1\">title<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1656\" class=\"blob-num js-line-number\" data-line-number=\"1656\"><\/td>\n        <td id=\"file-markdown-js-LC1656\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-c1\">title<\/span> <span class=\"pl-k\">=<\/span> <span class=\"pl-smi\">ref<\/span>.<span class=\"pl-c1\">title<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1657\" class=\"blob-num js-line-number\" data-line-number=\"1657\"><\/td>\n        <td id=\"file-markdown-js-LC1657\" class=\"blob-code blob-code-inner js-file-line\">        }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1658\" class=\"blob-num js-line-number\" data-line-number=\"1658\"><\/td>\n        <td id=\"file-markdown-js-LC1658\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1659\" class=\"blob-num js-line-number\" data-line-number=\"1659\"><\/td>\n        <td id=\"file-markdown-js-LC1659\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> get rid of the unneeded original text<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1660\" class=\"blob-num js-line-number\" data-line-number=\"1660\"><\/td>\n        <td id=\"file-markdown-js-LC1660\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">delete<\/span> <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">original<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1661\" class=\"blob-num js-line-number\" data-line-number=\"1661\"><\/td>\n        <td id=\"file-markdown-js-LC1661\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1662\" class=\"blob-num js-line-number\" data-line-number=\"1662\"><\/td>\n        <td id=\"file-markdown-js-LC1662\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> the reference doesn&#39;t exist, so revert to plain text<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1663\" class=\"blob-num js-line-number\" data-line-number=\"1663\"><\/td>\n        <td id=\"file-markdown-js-LC1663\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1664\" class=\"blob-num js-line-number\" data-line-number=\"1664\"><\/td>\n        <td id=\"file-markdown-js-LC1664\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return<\/span> <span class=\"pl-smi\">attrs<\/span>.<span class=\"pl-smi\">original<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1665\" class=\"blob-num js-line-number\" data-line-number=\"1665\"><\/td>\n        <td id=\"file-markdown-js-LC1665\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1666\" class=\"blob-num js-line-number\" data-line-number=\"1666\"><\/td>\n        <td id=\"file-markdown-js-LC1666\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1667\" class=\"blob-num js-line-number\" data-line-number=\"1667\"><\/td>\n        <td id=\"file-markdown-js-LC1667\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1668\" class=\"blob-num js-line-number\" data-line-number=\"1668\"><\/td>\n        <td id=\"file-markdown-js-LC1668\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1669\" class=\"blob-num js-line-number\" data-line-number=\"1669\"><\/td>\n        <td id=\"file-markdown-js-LC1669\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> convert all the children<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1670\" class=\"blob-num js-line-number\" data-line-number=\"1670\"><\/td>\n        <td id=\"file-markdown-js-LC1670\" class=\"blob-code blob-code-inner js-file-line\">  i <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">1<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1671\" class=\"blob-num js-line-number\" data-line-number=\"1671\"><\/td>\n        <td id=\"file-markdown-js-LC1671\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1672\" class=\"blob-num js-line-number\" data-line-number=\"1672\"><\/td>\n        <td id=\"file-markdown-js-LC1672\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> deal with the attribute node, if it exists<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1673\" class=\"blob-num js-line-number\" data-line-number=\"1673\"><\/td>\n        <td id=\"file-markdown-js-LC1673\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( attrs ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1674\" class=\"blob-num js-line-number\" data-line-number=\"1674\"><\/td>\n        <td id=\"file-markdown-js-LC1674\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if there are keys, skip over it<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1675\" class=\"blob-num js-line-number\" data-line-number=\"1675\"><\/td>\n        <td id=\"file-markdown-js-LC1675\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">for<\/span> ( <span class=\"pl-k\">var<\/span> key <span class=\"pl-k\">in<\/span> jsonml[ <span class=\"pl-c1\">1<\/span> ] ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1676\" class=\"blob-num js-line-number\" data-line-number=\"1676\"><\/td>\n        <td id=\"file-markdown-js-LC1676\" class=\"blob-code blob-code-inner js-file-line\">        i <span class=\"pl-k\">=<\/span> <span class=\"pl-c1\">2<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1677\" class=\"blob-num js-line-number\" data-line-number=\"1677\"><\/td>\n        <td id=\"file-markdown-js-LC1677\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">break<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1678\" class=\"blob-num js-line-number\" data-line-number=\"1678\"><\/td>\n        <td id=\"file-markdown-js-LC1678\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1679\" class=\"blob-num js-line-number\" data-line-number=\"1679\"><\/td>\n        <td id=\"file-markdown-js-LC1679\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if there aren&#39;t, remove it<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1680\" class=\"blob-num js-line-number\" data-line-number=\"1680\"><\/td>\n        <td id=\"file-markdown-js-LC1680\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( i <span class=\"pl-k\">===<\/span> <span class=\"pl-c1\">1<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1681\" class=\"blob-num js-line-number\" data-line-number=\"1681\"><\/td>\n        <td id=\"file-markdown-js-LC1681\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">splice<\/span>( i, <span class=\"pl-c1\">1<\/span> );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1682\" class=\"blob-num js-line-number\" data-line-number=\"1682\"><\/td>\n        <td id=\"file-markdown-js-LC1682\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1683\" class=\"blob-num js-line-number\" data-line-number=\"1683\"><\/td>\n        <td id=\"file-markdown-js-LC1683\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1684\" class=\"blob-num js-line-number\" data-line-number=\"1684\"><\/td>\n        <td id=\"file-markdown-js-LC1684\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1685\" class=\"blob-num js-line-number\" data-line-number=\"1685\"><\/td>\n        <td id=\"file-markdown-js-LC1685\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">for<\/span> ( ; i <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">length<\/span>; <span class=\"pl-k\">++<\/span>i ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1686\" class=\"blob-num js-line-number\" data-line-number=\"1686\"><\/td>\n        <td id=\"file-markdown-js-LC1686\" class=\"blob-code blob-code-inner js-file-line\">    jsonml[ i ] <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">convert_tree_to_html<\/span>( jsonml[ i ], references, options );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1687\" class=\"blob-num js-line-number\" data-line-number=\"1687\"><\/td>\n        <td id=\"file-markdown-js-LC1687\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1688\" class=\"blob-num js-line-number\" data-line-number=\"1688\"><\/td>\n        <td id=\"file-markdown-js-LC1688\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1689\" class=\"blob-num js-line-number\" data-line-number=\"1689\"><\/td>\n        <td id=\"file-markdown-js-LC1689\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return<\/span> jsonml;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1690\" class=\"blob-num js-line-number\" data-line-number=\"1690\"><\/td>\n        <td id=\"file-markdown-js-LC1690\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1691\" class=\"blob-num js-line-number\" data-line-number=\"1691\"><\/td>\n        <td id=\"file-markdown-js-LC1691\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1692\" class=\"blob-num js-line-number\" data-line-number=\"1692\"><\/td>\n        <td id=\"file-markdown-js-LC1692\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1693\" class=\"blob-num js-line-number\" data-line-number=\"1693\"><\/td>\n        <td id=\"file-markdown-js-LC1693\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//<\/span> merges adjacent text nodes into a single node<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1694\" class=\"blob-num js-line-number\" data-line-number=\"1694\"><\/td>\n        <td id=\"file-markdown-js-LC1694\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">function<\/span> <span class=\"pl-en\">merge_text_nodes<\/span>( <span class=\"pl-smi\">jsonml<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1695\" class=\"blob-num js-line-number\" data-line-number=\"1695\"><\/td>\n        <td id=\"file-markdown-js-LC1695\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> skip the tag name and attribute hash<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1696\" class=\"blob-num js-line-number\" data-line-number=\"1696\"><\/td>\n        <td id=\"file-markdown-js-LC1696\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">var<\/span> i <span class=\"pl-k\">=<\/span> <span class=\"pl-en\">extract_attr<\/span>( jsonml ) <span class=\"pl-k\">?<\/span> <span class=\"pl-c1\">2<\/span> <span class=\"pl-k\">:<\/span> <span class=\"pl-c1\">1<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1697\" class=\"blob-num js-line-number\" data-line-number=\"1697\"><\/td>\n        <td id=\"file-markdown-js-LC1697\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1698\" class=\"blob-num js-line-number\" data-line-number=\"1698\"><\/td>\n        <td id=\"file-markdown-js-LC1698\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">while<\/span> ( i <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">length<\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1699\" class=\"blob-num js-line-number\" data-line-number=\"1699\"><\/td>\n        <td id=\"file-markdown-js-LC1699\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if it&#39;s a string check the next item too<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1700\" class=\"blob-num js-line-number\" data-line-number=\"1700\"><\/td>\n        <td id=\"file-markdown-js-LC1700\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">typeof<\/span> jsonml[ i ] <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1701\" class=\"blob-num js-line-number\" data-line-number=\"1701\"><\/td>\n        <td id=\"file-markdown-js-LC1701\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">if<\/span> ( i <span class=\"pl-k\">+<\/span> <span class=\"pl-c1\">1<\/span> <span class=\"pl-k\">&lt;<\/span> <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">length<\/span> <span class=\"pl-k\">&amp;&amp;<\/span> <span class=\"pl-k\">typeof<\/span> jsonml[ i <span class=\"pl-k\">+<\/span> <span class=\"pl-c1\">1<\/span> ] <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>string<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1702\" class=\"blob-num js-line-number\" data-line-number=\"1702\"><\/td>\n        <td id=\"file-markdown-js-LC1702\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> merge the second string into the first and remove it<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1703\" class=\"blob-num js-line-number\" data-line-number=\"1703\"><\/td>\n        <td id=\"file-markdown-js-LC1703\" class=\"blob-code blob-code-inner js-file-line\">        jsonml[ i ] <span class=\"pl-k\">+=<\/span> <span class=\"pl-smi\">jsonml<\/span>.<span class=\"pl-c1\">splice<\/span>( i <span class=\"pl-k\">+<\/span> <span class=\"pl-c1\">1<\/span>, <span class=\"pl-c1\">1<\/span> )[ <span class=\"pl-c1\">0<\/span> ];<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1704\" class=\"blob-num js-line-number\" data-line-number=\"1704\"><\/td>\n        <td id=\"file-markdown-js-LC1704\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1705\" class=\"blob-num js-line-number\" data-line-number=\"1705\"><\/td>\n        <td id=\"file-markdown-js-LC1705\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1706\" class=\"blob-num js-line-number\" data-line-number=\"1706\"><\/td>\n        <td id=\"file-markdown-js-LC1706\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">++<\/span>i;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1707\" class=\"blob-num js-line-number\" data-line-number=\"1707\"><\/td>\n        <td id=\"file-markdown-js-LC1707\" class=\"blob-code blob-code-inner js-file-line\">      }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1708\" class=\"blob-num js-line-number\" data-line-number=\"1708\"><\/td>\n        <td id=\"file-markdown-js-LC1708\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1709\" class=\"blob-num js-line-number\" data-line-number=\"1709\"><\/td>\n        <td id=\"file-markdown-js-LC1709\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//<\/span> if it&#39;s not a string recurse<\/span><\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1710\" class=\"blob-num js-line-number\" data-line-number=\"1710\"><\/td>\n        <td id=\"file-markdown-js-LC1710\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1711\" class=\"blob-num js-line-number\" data-line-number=\"1711\"><\/td>\n        <td id=\"file-markdown-js-LC1711\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-en\">merge_text_nodes<\/span>( jsonml[ i ] );<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1712\" class=\"blob-num js-line-number\" data-line-number=\"1712\"><\/td>\n        <td id=\"file-markdown-js-LC1712\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-k\">++<\/span>i;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1713\" class=\"blob-num js-line-number\" data-line-number=\"1713\"><\/td>\n        <td id=\"file-markdown-js-LC1713\" class=\"blob-code blob-code-inner js-file-line\">    }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1714\" class=\"blob-num js-line-number\" data-line-number=\"1714\"><\/td>\n        <td id=\"file-markdown-js-LC1714\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1715\" class=\"blob-num js-line-number\" data-line-number=\"1715\"><\/td>\n        <td id=\"file-markdown-js-LC1715\" class=\"blob-code blob-code-inner js-file-line\">}<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1716\" class=\"blob-num js-line-number\" data-line-number=\"1716\"><\/td>\n        <td id=\"file-markdown-js-LC1716\" class=\"blob-code blob-code-inner js-file-line\">\n<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1717\" class=\"blob-num js-line-number\" data-line-number=\"1717\"><\/td>\n        <td id=\"file-markdown-js-LC1717\" class=\"blob-code blob-code-inner js-file-line\">} )( (<span class=\"pl-k\">function<\/span>() {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1718\" class=\"blob-num js-line-number\" data-line-number=\"1718\"><\/td>\n        <td id=\"file-markdown-js-LC1718\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">if<\/span> ( <span class=\"pl-k\">typeof<\/span> <span class=\"pl-c1\">exports<\/span> <span class=\"pl-k\">===<\/span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;<\/span>undefined<span class=\"pl-pds\">&quot;<\/span><\/span> ) {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1719\" class=\"blob-num js-line-number\" data-line-number=\"1719\"><\/td>\n        <td id=\"file-markdown-js-LC1719\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c1\">window<\/span>.<span class=\"pl-smi\">markdown<\/span> <span class=\"pl-k\">=<\/span> {};<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1720\" class=\"blob-num js-line-number\" data-line-number=\"1720\"><\/td>\n        <td id=\"file-markdown-js-LC1720\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">window<\/span>.<span class=\"pl-smi\">markdown<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1721\" class=\"blob-num js-line-number\" data-line-number=\"1721\"><\/td>\n        <td id=\"file-markdown-js-LC1721\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1722\" class=\"blob-num js-line-number\" data-line-number=\"1722\"><\/td>\n        <td id=\"file-markdown-js-LC1722\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">else<\/span> {<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1723\" class=\"blob-num js-line-number\" data-line-number=\"1723\"><\/td>\n        <td id=\"file-markdown-js-LC1723\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">return<\/span> <span class=\"pl-c1\">exports<\/span>;<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1724\" class=\"blob-num js-line-number\" data-line-number=\"1724\"><\/td>\n        <td id=\"file-markdown-js-LC1724\" class=\"blob-code blob-code-inner js-file-line\">  }<\/td>\n      <\/tr>\n      <tr>\n        <td id=\"file-markdown-js-L1725\" class=\"blob-num js-line-number\" data-line-number=\"1725\"><\/td>\n        <td id=\"file-markdown-js-LC1725\" class=\"blob-code blob-code-inner js-file-line\">} )() );<\/td>\n      <\/tr>\n<\/table>\n\n\n  <\/div>\n\n  <\/div>\n<\/div>\n\n      <\/div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/bcardarella/7376550/raw/074e33b8177ab4550012936da2816854e5283ee5/markdown.js\" style=\"float:right\">view raw<\/a>\n        <a href=\"https://gist.github.com/bcardarella/7376550#file-markdown-js\">markdown.js<\/a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub<\/a>\n      <\/div>\n    <\/div>\n<\/div>\n')
